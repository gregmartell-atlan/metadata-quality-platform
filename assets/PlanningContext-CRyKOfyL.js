import{H as E,r as t,J as T,u as D,e as G,j as N}from"./index-BYXjn4hA.js";import{u as M}from"./assistantStore-DxB0jf2q.js";const S=t.createContext(void 0);function q({children:a}){const n=E(),[u,i]=t.useState(null),[d,c]=t.useState(null),{activePlanId:e,setActivePlanId:g,plans:f}=T(),{projects:W,activeProjectId:$}=M(),{assetsWithScores:l}=D(),v=t.useMemo(()=>{if(l.length===0)return null;const s=l.map(({asset:o,metadata:j,scores:R})=>({asset:{guid:o.guid,typeName:o.typeName,attributes:o},metadata:j,scores:R}));return G(s)},[l]),p=t.useCallback(()=>{i("audit"),c(`audit-${Date.now()}`),n("/planning/v2")},[n]),b=t.useCallback(()=>{i("assistant"),c(`assistant-${Date.now()}`),n("/planning/assistant")},[n]),P=t.useCallback(s=>{i(s),s==="audit"?n("/planning/v2"):s==="assistant"&&n("/planning/assistant")},[n]),w=t.useCallback(()=>{i(null),c(null)},[]),C=t.useCallback(s=>{g(s)},[g]),m=t.useCallback(s=>{const o=s||e;n("/planning/workbench",{state:o?{planId:o}:void 0})},[n,e]),A=t.useCallback(()=>{n("/planning/governance")},[n]),h=t.useCallback(()=>{n("/planning/plans")},[n]),r=l.length>0,x=!!e&&f.some(s=>s.id===e),k=r,F=!0,y=t.useMemo(()=>({activeFlow:u,currentRunId:d,activePlanId:e,gapAnalysis:v,startAuditFlow:p,startAssistantFlow:b,switchFlow:P,resetFlow:w,setActivePlan:C,navigateToWorkbench:m,navigateToGovernanceStudio:A,navigateToPlansDashboard:h,hasActiveScores:r,hasActivePlan:x,isAuditFlowReady:k,isAssistantFlowReady:F}),[u,d,e,v,p,b,P,w,C,m,A,h,r,x,k,F]);return N.jsx(S.Provider,{value:y,children:a})}function I(){const a=t.useContext(S);if(a===void 0)throw new Error("usePlanningContext must be used within a PlanningProvider");return a}function z(a){const{activeFlow:n}=I();return n===a}function B(){const{gapAnalysis:a}=I();return a}export{q as PlanningProvider,B as useGapAnalysis,z as useIsInFlow,I as usePlanningContext};
