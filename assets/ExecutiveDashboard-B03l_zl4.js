import{c as Mn,r as m,a as Wt,b as Vr,j as n,R as Ie,d as rs,p as as,l as ss,X as Qr,M as is,B as En,e as os,g as ls,u as le,f as In,h as Wn,i as Ln,k as dn,C as nt,m as Jr,S as cs,n as ds,U as us,o as _n,q as ps,s as Zr,E as ea,t as sr,v as vt,w as hs,T as ta,A as na,x as ir,y as fs,F as ms,z as gs,G as ys,D as xs,L as or,H as vs,I as bs,J as ws,K as js,N as Ss,O as Cs}from"./index-BYXjn4hA.js";import{P as Ds,A as Ps}from"./AppHeader-bBOFCWJR.js";import{H as Ns,a as Xt,b as st,c as Dn}from"./HeaderActions-DWTmbmyV.js";import{g as ra,a as aa,u as As,r as ee}from"./pinnedWidgetsStore-BRj39sfn.js";import{c as wt,a as rt,g as Je,b as un,s as Rs,d as Ts,e as ks,r as pn,D as Hn,f as hn,R as sa,S as Es,h as ia,u as xt,i as Os,L as We,Z as Bn,j as oa,k as la,J as ca,l as zs,m as Qe,n as Ze,o as tn,p as On,P as Ms,q as Is,t as Ws,v as Ls,w as _s,x as Hs,y as Bs,z as qs,A as da,B as $s,C as zt,E as lr,F as nn,T as Fs,G as qn,H as ua,I as pa,K as Us,M as Gs,N as Ks,O as Xs,Q as ha,U as cr,V as Ys,W as Vs,X as fa,Y as Qs,_ as Js,$ as Zs,a0 as ei,a1 as ti,a2 as ni,a3 as ri,a4 as ai,a5 as si,a6 as ii,a7 as dr,a8 as ur,a9 as oi,aa as li,ab as ci,ac as di,ad as ui,ae as pi,af as rn,ag as hi,ah as fi,ai as ma,aj as mi,ak as gi,al as $n,am as ga,an as ya,ao as mt,ap as yi,aq as xa}from"./PolarChart-Cj5jwBuJ.js";import{P as xi}from"./plus-Db2s5bXk.js";import{T as me,g as Mt,a as It,b as an,c as ye,C as Fn,u as vi,d as bi,e as wi,s as Un,f as Gn}from"./graphicalItemSelectors-DS-hZTe9.js";import{G as ji,S as Si}from"./save-B1kDgeWa.js";import{C as va,L as Ci}from"./CartesianGrid-Crd6WZ8Q.js";import{U as Di}from"./user-plus-B8lgQ9YT.js";import{T as ba}from"./triangle-alert-3Hm35Ind.js";import{L as Pi}from"./layout-template-DuBq7i-q.js";import{R as pr}from"./rotate-ccw-wvce0Yom.js";import"./funnel-DPZwMpz0.js";import"./list-k-ASkxhI.js";import"./value-NzwA106W.js";const Ni=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],Ai=Mn("file-pen",Ni);const Ri=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wa=Mn("pen-line",Ri);const Ti=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],ki=Mn("pin-off",Ti);function jt(e){const{margin:t,containerPadding:r,containerWidth:a,cols:i}=e;return(a-t[0]*(i-1)-r[0]*2)/i}function bt(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function Pt(e,t,r,a,i,s,o){const{margin:l,containerPadding:c,rowHeight:d}=e,h=jt(e);let f,g,D,P;if(o?(f=Math.round(o.width),g=Math.round(o.height)):(f=bt(a,h,l[0]),g=bt(i,d,l[1])),s?(D=Math.round(s.top),P=Math.round(s.left)):o?(D=Math.round(o.top),P=Math.round(o.left)):(D=Math.round((d+l[1])*r+c[1]),P=Math.round((h+l[0])*t+c[0])),!s&&!o){if(Number.isFinite(a)){const u=Math.round((h+l[0])*(t+a)+c[0])-P-f;u!==l[0]&&(f+=u-l[0])}if(Number.isFinite(i)){const u=Math.round((d+l[1])*(r+i)+c[1])-D-g;u!==l[1]&&(g+=u-l[1])}}return{top:D,left:P,width:f,height:g}}function Ei(e,t,r,a,i){const{margin:s,containerPadding:o,cols:l,rowHeight:c,maxRows:d}=e,h=jt(e);let f=Math.round((r-o[0])/(h+s[0])),g=Math.round((t-o[1])/(c+s[1]));return f=sn(f,0,l-a),g=sn(g,0,d-i),{x:f,y:g}}function Yt(e,t,r){const{margin:a,containerPadding:i,rowHeight:s}=e,o=jt(e),l=Math.round((r-i[0])/(o+a[0])),c=Math.round((t-i[1])/(s+a[1]));return{x:l,y:c}}function Oi(e,t,r){const{margin:a,rowHeight:i}=e,s=jt(e),o=Math.max(1,Math.round((t+a[0])/(s+a[0]))),l=Math.max(1,Math.round((r+a[1])/(i+a[1])));return{w:o,h:l}}function sn(e,t,r){return Math.max(Math.min(e,r),t)}function Kn(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function lt(e,t){for(let r=0;r<e.length;r++){const a=e[r];if(a!==void 0&&Kn(a,t))return a}}function ja(e,t){return e.filter(r=>Kn(r,t))}function zi(e,t){return t==="horizontal"?Sa(e):t==="vertical"||t==="wrap"?zn(e):[...e]}function zn(e){return[...e].sort((t,r)=>t.y!==r.y?t.y-r.y:t.x-r.x)}function Sa(e){return[...e].sort((t,r)=>t.x!==r.x?t.x-r.x:t.y-r.y)}function fn(e){let t=0;for(let r=0;r<e.length;r++){const a=e[r];if(a!==void 0){const i=a.y+a.h;i>t&&(t=i)}}return t}function it(e,t){for(let r=0;r<e.length;r++){const a=e[r];if(a!==void 0&&a.i===t)return a}}function mn(e){return e.filter(t=>t.static===!0)}function dt(e){return{i:e.i,x:e.x,y:e.y,w:e.w,h:e.h,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,constraints:e.constraints,isBounded:e.isBounded}}function et(e){const t=new Array(e.length);for(let r=0;r<e.length;r++){const a=e[r];a!==void 0&&(t[r]=dt(a))}return t}function Mi(e,t){const r=new Array(e.length);for(let a=0;a<e.length;a++){const i=e[a];i!==void 0&&(t.i===i.i?r[a]=t:r[a]=i)}return r}function Ii(e,t,r){let a=it(e,t);return a?(a=r(dt(a)),[Mi(e,a),a]):[[...e],null]}function Xn(e,t){const r=mn(e);for(let a=0;a<e.length;a++){const i=e[a];if(i!==void 0)if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),!i.static)r.push(i);else for(;lt(r,i);)i.y++}return e}function ot(e,t,r,a,i,s,o,l,c){if(t.static&&t.isDraggable!==!0)return[...e];if(t.y===a&&t.x===r)return[...e];const d=t.x,h=t.y;typeof r=="number"&&(t.x=r),typeof a=="number"&&(t.y=a),t.moved=!0;let f=zi(e,o);(o==="vertical"&&typeof a=="number"?h>=a:o==="horizontal"&&typeof r=="number"&&d>=r)&&(f=f.reverse());const D=ja(f,t),P=D.length>0;if(P&&c)return et(e);if(P&&s)return t.x=d,t.y=h,t.moved=!1,e;let w=[...e];for(let u=0;u<D.length;u++){const p=D[u];p!==void 0&&(p.moved||(p.static?w=hr(w,p,t,i,o):w=hr(w,t,p,i,o)))}return w}function hr(e,t,r,a,i,s){const o=i==="horizontal",l=i==="vertical",c=t.static;if(a){a=!1;const f={x:o?Math.max(t.x-r.w,0):r.x,y:l?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},g=lt(e,f),D=g!==void 0&&g.y+g.h>t.y,P=g!==void 0&&t.x+t.w>g.x;if(!g)return ot(e,r,o?f.x:void 0,l?f.y:void 0,a,c,i);if(D&&l)return ot(e,r,void 0,r.y+1,a,c,i);if(D&&i===null)return t.y=r.y,r.y=r.y+r.h,[...e];if(P&&o)return ot(e,t,r.x,void 0,a,c,i)}const d=o?r.x+1:void 0,h=l?r.y+1:void 0;return d===void 0&&h===void 0?[...e]:ot(e,r,d,h,a,c,i)}function gt(e,t,r){return Math.max(t,Math.min(r,e))}var Wi={name:"gridBounds",constrainPosition(e,t,r,{cols:a,maxRows:i}){return{x:gt(t,0,Math.max(0,a-e.w)),y:gt(r,0,Math.max(0,i-e.h))}},constrainSize(e,t,r,a,{cols:i,maxRows:s}){const o=a==="w"||a==="nw"||a==="sw"?e.x+e.w:i-e.x,l=a==="n"||a==="nw"||a==="ne"?e.y+e.h:s-e.y;return{w:gt(t,1,Math.max(1,o)),h:gt(r,1,Math.max(1,l))}}},Li={name:"minMaxSize",constrainSize(e,t,r){return{w:gt(t,e.minW??1,e.maxW??1/0),h:gt(r,e.minH??1,e.maxH??1/0)}}},Ca=[Wi,Li];function Vt(e,t,r,a,i){let s={x:r,y:a};for(const o of e)o.constrainPosition&&(s=o.constrainPosition(t,s.x,s.y,i));if(t.constraints)for(const o of t.constraints)o.constrainPosition&&(s=o.constrainPosition(t,s.x,s.y,i));return s}function _i(e,t,r,a,i,s){let o={w:r,h:a};for(const l of e)l.constrainSize&&(o=l.constrainSize(t,o.w,o.h,i,s));if(t.constraints)for(const l of t.constraints)l.constrainSize&&(o=l.constrainSize(t,o.w,o.h,i,s));return o}function Da({top:e,left:t,width:r,height:a}){const i=`translate(${t}px,${e}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${r}px`,height:`${a}px`,position:"absolute"}}function Hi({top:e,left:t,width:r,height:a}){return{top:`${e}px`,left:`${t}px`,width:`${r}px`,height:`${a}px`,position:"absolute"}}function fr(e){return e*100+"%"}function Bi(e,t,r,a){return e+r>a?t:r}function Pa(e,t,r){return e<0?t:r}function qi(e){return Math.max(0,e)}function on(e){return Math.max(0,e)}var Yn=(e,t,r)=>{const{left:a,height:i,width:s}=t,o=e.top-(i-e.height);return{left:a,width:s,height:Pa(o,e.height,i),top:on(o)}},Vn=(e,t,r)=>{const{top:a,left:i,height:s,width:o}=t;return{top:a,height:s,width:Bi(e.left,e.width,o,r),left:qi(i)}},Qn=(e,t,r)=>{const{top:a,height:i,width:s}=t,o=e.left+e.width-s;return o<0?{height:i,width:e.left+e.width,top:on(a),left:0}:{height:i,width:s,top:on(a),left:o}},Jn=(e,t,r)=>{const{top:a,left:i,height:s,width:o}=t;return{width:o,left:i,height:Pa(a,e.height,s),top:on(a)}},$i=(e,t,r)=>Yn(e,Vn(e,t,r)),Fi=(e,t,r)=>Yn(e,Qn(e,t)),Ui=(e,t,r)=>Jn(e,Vn(e,t,r)),Gi=(e,t,r)=>Jn(e,Qn(e,t)),Ki={n:Yn,ne:$i,e:Vn,se:Ui,s:Jn,sw:Gi,w:Qn,nw:Fi};function Xi(e,t,r,a){const i=Ki[e];return i?i(t,{...t,...r},a):r}var Yi={type:"transform",scale:1,calcStyle(e){return Da(e)}},Vi=Yi,Qi={cols:12,rowHeight:150,margin:[10,10],containerPadding:null,maxRows:1/0},Ji={enabled:!0,bounded:!1,threshold:3},Zi={enabled:!0,handles:["se"]},eo={enabled:!1,defaultItem:{w:1,h:1}};function Zn(e,t,r,a,i){const s=a==="x"?"w":"h";t[a]+=1;const o=e.findIndex(c=>c.i===t.i),l=i??mn(e).length>0;for(let c=o+1;c<e.length;c++){const d=e[c];if(d!==void 0&&!d.static){if(!l&&d.y>t.y+t.h)break;Kn(t,d)&&Zn(e,d,r+t[s],a,l)}}t[a]=r}function to(e,t,r,a){for(t.x=Math.max(t.x,0),t.y=Math.max(t.y,0),t.y=Math.min(a,t.y);t.y>0&&!lt(e,t);)t.y--;let i;for(;(i=lt(e,t))!==void 0;)Zn(r,t,i.y+i.h,"y");return t.y=Math.max(t.y,0),t}function no(e,t,r,a){for(t.x=Math.max(t.x,0),t.y=Math.max(t.y,0);t.x>0&&!lt(e,t);)t.x--;let i;for(;(i=lt(e,t))!==void 0;)if(Zn(a,t,i.x+i.w,"x"),t.x+t.w>r)for(t.x=r-t.w,t.y++;t.x>0&&!lt(e,t);)t.x--;return t.x=Math.max(t.x,0),t}var Na={type:"vertical",allowOverlap:!1,compact(e,t){const r=mn(e);let a=fn(r);const i=zn(e),s=new Array(e.length);for(let o=0;o<i.length;o++){const l=i[o];if(l===void 0)continue;let c=dt(l);c.static||(c=to(r,c,i,a),a=Math.max(a,c.y+c.h),r.push(c));const d=e.indexOf(l);s[d]=c,c.moved=!1}return s}},Aa={type:"horizontal",allowOverlap:!1,compact(e,t){const r=mn(e),a=Sa(e),i=new Array(e.length);for(let s=0;s<a.length;s++){const o=a[s];if(o===void 0)continue;let l=dt(o);l.static||(l=no(r,l,t,a),r.push(l));const c=e.indexOf(o);i[c]=l,l.moved=!1}return i}},Ra={type:null,allowOverlap:!1,compact(e,t){return et(e)}},ro={...Na,allowOverlap:!0,compact(e,t){return et(e)}},ao={...Aa,allowOverlap:!0,compact(e,t){return et(e)}},so={...Ra,allowOverlap:!0};function er(e,t=!1,r=!1){let a;return t?e==="vertical"?a=ro:e==="horizontal"?a=ao:a=so:e==="vertical"?a=Na:e==="horizontal"?a=Aa:a=Ra,r?{...a,preventCollision:r}:a}function Ta(e){return Object.keys(e).sort((r,a)=>e[r]-e[a])}function mr(e,t){const r=Ta(e);let a=r[0];if(a===void 0)throw new Error("No breakpoints defined");for(let i=1;i<r.length;i++){const s=r[i];if(s===void 0)continue;const o=e[s];t>o&&(a=s)}return a}function gr(e,t){const r=t[e];if(r===void 0)throw new Error(`ResponsiveReactGridLayout: \`cols\` entry for breakpoint ${String(e)} is missing!`);return r}function Pn(e,t,r,a,i,s){const o=e[r];if(o)return et(o);let l=e[a];const c=Ta(t),d=c.slice(c.indexOf(r));for(let D=0;D<d.length;D++){const P=d[D];if(P===void 0)continue;const w=e[P];if(w){l=w;break}}const h=et(l||[]),f=Xn(h,{cols:i});return(typeof s=="object"&&s!==null?s:er(s)).compact(f,i)}function Qt(e,t){if(Array.isArray(e))return e;const r=e,a=r[t];if(a!==void 0)return a;const i=Object.keys(r);for(const s of i){const o=r[s];if(o!==void 0)return o}return[10,10]}function ka(e){return function(r,a,i,s,o,l,c){return e(r,a,c)}}function gn(e){return function(r,a,i,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,i,s);var o=s.get(r),l=s.get(a);if(o&&l)return o===a&&l===r;s.set(r,a),s.set(a,r);var c=e(r,a,i,s);return s.delete(r),s.delete(a),c}}function Ea(e,t){var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]=t[a];return r}function yr(e){return e.constructor===Object||e.constructor==null}function xr(e){return typeof e.then=="function"}function yn(e,t){return e===t||e!==e&&t!==t}var io="[object Arguments]",oo="[object Boolean]",lo="[object Date]",co="[object RegExp]",uo="[object Map]",po="[object Number]",ho="[object Object]",fo="[object Set]",mo="[object String]",vr=Object.prototype.toString;function xn(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areMapsEqual,i=e.areObjectsEqual,s=e.areRegExpsEqual,o=e.areSetsEqual,l=e.createIsNestedEqual,c=l(d);function d(h,f,g){if(h===f)return!0;if(!h||!f||typeof h!="object"||typeof f!="object")return h!==h&&f!==f;if(yr(h)&&yr(f))return i(h,f,c,g);var D=Array.isArray(h),P=Array.isArray(f);if(D||P)return D===P&&t(h,f,c,g);var w=vr.call(h);return w!==vr.call(f)?!1:w===lo?r(h,f,c,g):w===co?s(h,f,c,g):w===uo?a(h,f,c,g):w===fo?o(h,f,c,g):w===ho||w===io?xr(h)||xr(f)?!1:i(h,f,c,g):w===oo||w===po||w===mo?yn(h.valueOf(),f.valueOf()):!1}return d}function Oa(e,t,r,a){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r(e[i],t[i],i,i,e,t,a))return!1;return!0}var go=gn(Oa);function za(e,t){return yn(e.valueOf(),t.valueOf())}function Ma(e,t,r,a){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var s={},o=0;return e.forEach(function(l,c){if(i){var d=!1,h=0;t.forEach(function(f,g){!d&&!s[h]&&(d=r(c,g,o,h,e,t,a)&&r(l,f,c,g,e,t,a))&&(s[h]=!0),h++}),o++,i=d}}),i}var yo=gn(Ma),xo="_owner",vo=Object.prototype.hasOwnProperty;function Ia(e,t,r,a){var i=Object.keys(e),s=i.length;if(Object.keys(t).length!==s)return!1;for(var o;s-- >0;){if(o=i[s],o===xo){var l=!!e.$$typeof,c=!!t.$$typeof;if((l||c)&&l!==c)return!1}if(!vo.call(t,o)||!r(e[o],t[o],o,o,e,t,a))return!1}return!0}var bo=gn(Ia);function Wa(e,t){return e.source===t.source&&e.flags===t.flags}function La(e,t,r,a){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var s={};return e.forEach(function(o,l){if(i){var c=!1,d=0;t.forEach(function(h,f){!c&&!s[d]&&(c=r(o,h,l,f,e,t,a))&&(s[d]=!0),d++}),i=c}}),i}var wo=gn(La),_a=Object.freeze({areArraysEqual:Oa,areDatesEqual:za,areMapsEqual:Ma,areObjectsEqual:Ia,areRegExpsEqual:Wa,areSetsEqual:La,createIsNestedEqual:ka}),Ha=Object.freeze({areArraysEqual:go,areDatesEqual:za,areMapsEqual:yo,areObjectsEqual:bo,areRegExpsEqual:Wa,areSetsEqual:wo,createIsNestedEqual:ka}),jo=xn(_a);function He(e,t){return jo(e,t,void 0)}xn(Ea(_a,{createIsNestedEqual:function(){return yn}}));xn(Ha);xn(Ea(Ha,{createIsNestedEqual:function(){return yn}}));function So(e={}){const{measureBeforeMount:t=!1,initialWidth:r=1280}=e,[a,i]=m.useState(r),[s,o]=m.useState(!t),l=m.useRef(null),c=m.useRef(null),d=m.useCallback(()=>{const h=l.current;if(h){const f=h.offsetWidth;i(f),s||o(!0)}},[s]);return m.useEffect(()=>{const h=l.current;if(h)return d(),typeof ResizeObserver<"u"&&(c.current=new ResizeObserver(f=>{const g=f[0];if(g){const D=g.contentRect.width;i(D)}}),c.current.observe(h)),()=>{c.current&&(c.current.disconnect(),c.current=null)}},[d]),{width:a,mounted:s,containerRef:l,measureWidth:d}}var Nt={exports:{}},Nn={},An={exports:{}},Rn,br;function Co(){if(br)return Rn;br=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Rn=e,Rn}var Tn,wr;function Do(){if(wr)return Tn;wr=1;var e=Co();function t(){}function r(){}return r.resetWarningCache=t,Tn=function(){function a(o,l,c,d,h,f){if(f!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}a.isRequired=a;function i(){return a}var s={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s},Tn}var jr;function vn(){return jr||(jr=1,An.exports=Do()()),An.exports}var Jt={exports:{}},Sr;function Po(){if(Sr)return Jt.exports;Sr=1;function e(r){var a,i,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(a=0;a<o;a++)r[a]&&(i=e(r[a]))&&(s&&(s+=" "),s+=i)}else for(i in r)r[i]&&(s&&(s+=" "),s+=i);return s}function t(){for(var r,a,i=0,s="",o=arguments.length;i<o;i++)(r=arguments[i])&&(a=e(r))&&(s&&(s+=" "),s+=a);return s}return Jt.exports=t,Jt.exports.clsx=t,Jt.exports}var re={},Ye={},Cr;function bn(){if(Cr)return Ye;Cr=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.dontSetMe=i,Ye.findInArray=e,Ye.int=a,Ye.isFunction=t,Ye.isNum=r;function e(s,o){for(let l=0,c=s.length;l<c;l++)if(o.apply(o,[s[l],l,s]))return s[l]}function t(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Function]"}function r(s){return typeof s=="number"&&!isNaN(s)}function a(s){return parseInt(s,10)}function i(s,o,l){if(s[o])return new Error(`Invalid prop ${o} passed to ${l} - do not set this, set it on the child.`)}return Ye}var Ve={},Dr;function No(){if(Dr)return Ve;Dr=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.browserPrefixToKey=r,Ve.browserPrefixToStyle=a,Ve.default=void 0,Ve.getPrefix=t;const e=["Moz","Webkit","O","ms"];function t(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const o=window.document?.documentElement?.style;if(!o||s in o)return"";for(let l=0;l<e.length;l++)if(r(s,e[l])in o)return e[l];return""}function r(s,o){return o?`${o}${i(s)}`:s}function a(s,o){return o?`-${o.toLowerCase()}-${s}`:s}function i(s){let o="",l=!0;for(let c=0;c<s.length;c++)l?(o+=s[c].toUpperCase(),l=!1):s[c]==="-"?l=!0:o+=s[c];return o}return Ve.default=t(),Ve}var Pr;function tr(){if(Pr)return re;Pr=1,Object.defineProperty(re,"__esModule",{value:!0}),re.addClassName=C,re.addEvent=o,re.addUserSelectStyles=y,re.createCSSTransform=D,re.createSVGTransform=P,re.getTouch=u,re.getTouchIdentifier=p,re.getTranslation=w,re.innerHeight=h,re.innerWidth=f,re.matchesSelector=i,re.matchesSelectorAndParentsTo=s,re.offsetXYFromParent=g,re.outerHeight=c,re.outerWidth=d,re.removeClassName=b,re.removeEvent=l,re.scheduleRemoveUserSelectStyles=x;var e=bn(),t=r(No());function r(v,S){if(typeof WeakMap=="function")var N=new WeakMap,T=new WeakMap;return(r=function(R,E){if(!E&&R&&R.__esModule)return R;var A,k,M={__proto__:null,default:R};if(R===null||typeof R!="object"&&typeof R!="function")return M;if(A=E?T:N){if(A.has(R))return A.get(R);A.set(R,M)}for(const W in R)W!=="default"&&{}.hasOwnProperty.call(R,W)&&((k=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(R,W))&&(k.get||k.set)?A(M,W,k):M[W]=R[W]);return M})(v,S)}let a="";function i(v,S){return a||(a=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(N){return(0,e.isFunction)(v[N])})),(0,e.isFunction)(v[a])?v[a](S):!1}function s(v,S,N){let T=v;do{if(i(T,S))return!0;if(T===N)return!1;T=T.parentNode}while(T);return!1}function o(v,S,N,T){if(!v)return;const R={capture:!0,...T};v.addEventListener?v.addEventListener(S,N,R):v.attachEvent?v.attachEvent("on"+S,N):v["on"+S]=N}function l(v,S,N,T){if(!v)return;const R={capture:!0,...T};v.removeEventListener?v.removeEventListener(S,N,R):v.detachEvent?v.detachEvent("on"+S,N):v["on"+S]=null}function c(v){let S=v.clientHeight;const N=v.ownerDocument.defaultView.getComputedStyle(v);return S+=(0,e.int)(N.borderTopWidth),S+=(0,e.int)(N.borderBottomWidth),S}function d(v){let S=v.clientWidth;const N=v.ownerDocument.defaultView.getComputedStyle(v);return S+=(0,e.int)(N.borderLeftWidth),S+=(0,e.int)(N.borderRightWidth),S}function h(v){let S=v.clientHeight;const N=v.ownerDocument.defaultView.getComputedStyle(v);return S-=(0,e.int)(N.paddingTop),S-=(0,e.int)(N.paddingBottom),S}function f(v){let S=v.clientWidth;const N=v.ownerDocument.defaultView.getComputedStyle(v);return S-=(0,e.int)(N.paddingLeft),S-=(0,e.int)(N.paddingRight),S}function g(v,S,N){const R=S===S.ownerDocument.body?{left:0,top:0}:S.getBoundingClientRect(),E=(v.clientX+S.scrollLeft-R.left)/N,A=(v.clientY+S.scrollTop-R.top)/N;return{x:E,y:A}}function D(v,S){const N=w(v,S,"px");return{[(0,t.browserPrefixToKey)("transform",t.default)]:N}}function P(v,S){return w(v,S,"")}function w(v,S,N){let{x:T,y:R}=v,E=`translate(${T}${N},${R}${N})`;if(S){const A=`${typeof S.x=="string"?S.x:S.x+N}`,k=`${typeof S.y=="string"?S.y:S.y+N}`;E=`translate(${A}, ${k})`+E}return E}function u(v,S){return v.targetTouches&&(0,e.findInArray)(v.targetTouches,N=>S===N.identifier)||v.changedTouches&&(0,e.findInArray)(v.changedTouches,N=>S===N.identifier)}function p(v){if(v.targetTouches&&v.targetTouches[0])return v.targetTouches[0].identifier;if(v.changedTouches&&v.changedTouches[0])return v.changedTouches[0].identifier}function y(v){if(!v)return;let S=v.getElementById("react-draggable-style-el");S||(S=v.createElement("style"),S.type="text/css",S.id="react-draggable-style-el",S.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,S.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,v.getElementsByTagName("head")[0].appendChild(S)),v.body&&C(v.body,"react-draggable-transparent-selection")}function x(v){window.requestAnimationFrame?window.requestAnimationFrame(()=>{j(v)}):j(v)}function j(v){if(v)try{if(v.body&&b(v.body,"react-draggable-transparent-selection"),v.selection)v.selection.empty();else{const S=(v.defaultView||window).getSelection();S&&S.type!=="Caret"&&S.removeAllRanges()}}catch{}}function C(v,S){v.classList?v.classList.add(S):v.className.match(new RegExp(`(?:^|\\s)${S}(?!\\S)`))||(v.className+=` ${S}`)}function b(v,S){v.classList?v.classList.remove(S):v.className=v.className.replace(new RegExp(`(?:^|\\s)${S}(?!\\S)`,"g"),"")}return re}var Me={},Nr;function Ba(){if(Nr)return Me;Nr=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.canDragX=i,Me.canDragY=s,Me.createCoreData=l,Me.createDraggableData=c,Me.getBoundPosition=r,Me.getControlPosition=o,Me.snapToGrid=a;var e=bn(),t=tr();function r(f,g,D){if(!f.props.bounds)return[g,D];let{bounds:P}=f.props;P=typeof P=="string"?P:d(P);const w=h(f);if(typeof P=="string"){const{ownerDocument:u}=w,p=u.defaultView;let y;if(P==="parent"?y=w.parentNode:y=w.getRootNode().querySelector(P),!(y instanceof p.HTMLElement))throw new Error('Bounds selector "'+P+'" could not find an element.');const x=y,j=p.getComputedStyle(w),C=p.getComputedStyle(x);P={left:-w.offsetLeft+(0,e.int)(C.paddingLeft)+(0,e.int)(j.marginLeft),top:-w.offsetTop+(0,e.int)(C.paddingTop)+(0,e.int)(j.marginTop),right:(0,t.innerWidth)(x)-(0,t.outerWidth)(w)-w.offsetLeft+(0,e.int)(C.paddingRight)-(0,e.int)(j.marginRight),bottom:(0,t.innerHeight)(x)-(0,t.outerHeight)(w)-w.offsetTop+(0,e.int)(C.paddingBottom)-(0,e.int)(j.marginBottom)}}return(0,e.isNum)(P.right)&&(g=Math.min(g,P.right)),(0,e.isNum)(P.bottom)&&(D=Math.min(D,P.bottom)),(0,e.isNum)(P.left)&&(g=Math.max(g,P.left)),(0,e.isNum)(P.top)&&(D=Math.max(D,P.top)),[g,D]}function a(f,g,D){const P=Math.round(g/f[0])*f[0],w=Math.round(D/f[1])*f[1];return[P,w]}function i(f){return f.props.axis==="both"||f.props.axis==="x"}function s(f){return f.props.axis==="both"||f.props.axis==="y"}function o(f,g,D){const P=typeof g=="number"?(0,t.getTouch)(f,g):null;if(typeof g=="number"&&!P)return null;const w=h(D),u=D.props.offsetParent||w.offsetParent||w.ownerDocument.body;return(0,t.offsetXYFromParent)(P||f,u,D.props.scale)}function l(f,g,D){const P=!(0,e.isNum)(f.lastX),w=h(f);return P?{node:w,deltaX:0,deltaY:0,lastX:g,lastY:D,x:g,y:D}:{node:w,deltaX:g-f.lastX,deltaY:D-f.lastY,lastX:f.lastX,lastY:f.lastY,x:g,y:D}}function c(f,g){const D=f.props.scale;return{node:g.node,x:f.state.x+g.deltaX/D,y:f.state.y+g.deltaY/D,deltaX:g.deltaX/D,deltaY:g.deltaY/D,lastX:f.state.x,lastY:f.state.y}}function d(f){return{left:f.left,top:f.top,right:f.right,bottom:f.bottom}}function h(f){const g=f.findDOMNode();if(!g)throw new Error("<DraggableCore>: Unmounted during event!");return g}return Me}var At={},Zt={},Ar;function qa(){if(Ar)return Zt;Ar=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.default=e;function e(){}return Zt}var Rr;function Ao(){if(Rr)return At;Rr=1,Object.defineProperty(At,"__esModule",{value:!0}),At.default=void 0;var e=c(Wt()),t=l(vn()),r=l(Vr()),a=tr(),i=Ba(),s=bn(),o=l(qa());function l(w){return w&&w.__esModule?w:{default:w}}function c(w,u){if(typeof WeakMap=="function")var p=new WeakMap,y=new WeakMap;return(c=function(x,j){if(!j&&x&&x.__esModule)return x;var C,b,v={__proto__:null,default:x};if(x===null||typeof x!="object"&&typeof x!="function")return v;if(C=j?y:p){if(C.has(x))return C.get(x);C.set(x,v)}for(const S in x)S!=="default"&&{}.hasOwnProperty.call(x,S)&&((b=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(x,S))&&(b.get||b.set)?C(v,S,b):v[S]=x[S]);return v})(w,u)}function d(w,u,p){return(u=h(u))in w?Object.defineProperty(w,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[u]=p,w}function h(w){var u=f(w,"string");return typeof u=="symbol"?u:u+""}function f(w,u){if(typeof w!="object"||!w)return w;var p=w[Symbol.toPrimitive];if(p!==void 0){var y=p.call(w,u);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(w)}const g={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let D=g.mouse,P=class extends e.Component{constructor(){super(...arguments),d(this,"dragging",!1),d(this,"lastX",NaN),d(this,"lastY",NaN),d(this,"touchIdentifier",null),d(this,"mounted",!1),d(this,"handleDragStart",u=>{if(this.props.onMouseDown(u),!this.props.allowAnyClick&&typeof u.button=="number"&&u.button!==0)return!1;const p=this.findDOMNode();if(!p||!p.ownerDocument||!p.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:y}=p;if(this.props.disabled||!(u.target instanceof y.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(u.target,this.props.handle,p)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(u.target,this.props.cancel,p))return;u.type==="touchstart"&&!this.props.allowMobileScroll&&u.preventDefault();const x=(0,a.getTouchIdentifier)(u);this.touchIdentifier=x;const j=(0,i.getControlPosition)(u,x,this);if(j==null)return;const{x:C,y:b}=j,v=(0,i.createCoreData)(this,C,b);(0,o.default)("DraggableCore: handleDragStart: %j",v),(0,o.default)("calling",this.props.onStart),!(this.props.onStart(u,v)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(y),this.dragging=!0,this.lastX=C,this.lastY=b,(0,a.addEvent)(y,D.move,this.handleDrag),(0,a.addEvent)(y,D.stop,this.handleDragStop))}),d(this,"handleDrag",u=>{const p=(0,i.getControlPosition)(u,this.touchIdentifier,this);if(p==null)return;let{x:y,y:x}=p;if(Array.isArray(this.props.grid)){let b=y-this.lastX,v=x-this.lastY;if([b,v]=(0,i.snapToGrid)(this.props.grid,b,v),!b&&!v)return;y=this.lastX+b,x=this.lastY+v}const j=(0,i.createCoreData)(this,y,x);if((0,o.default)("DraggableCore: handleDrag: %j",j),this.props.onDrag(u,j)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const v=document.createEvent("MouseEvents");v.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(v)}return}this.lastX=y,this.lastY=x}),d(this,"handleDragStop",u=>{if(!this.dragging)return;const p=(0,i.getControlPosition)(u,this.touchIdentifier,this);if(p==null)return;let{x:y,y:x}=p;if(Array.isArray(this.props.grid)){let v=y-this.lastX||0,S=x-this.lastY||0;[v,S]=(0,i.snapToGrid)(this.props.grid,v,S),y=this.lastX+v,x=this.lastY+S}const j=(0,i.createCoreData)(this,y,x);if(this.props.onStop(u,j)===!1||this.mounted===!1)return!1;const b=this.findDOMNode();b&&this.props.enableUserSelectHack&&(0,a.scheduleRemoveUserSelectStyles)(b.ownerDocument),(0,o.default)("DraggableCore: handleDragStop: %j",j),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,b&&((0,o.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(b.ownerDocument,D.move,this.handleDrag),(0,a.removeEvent)(b.ownerDocument,D.stop,this.handleDragStop))}),d(this,"onMouseDown",u=>(D=g.mouse,this.handleDragStart(u))),d(this,"onMouseUp",u=>(D=g.mouse,this.handleDragStop(u))),d(this,"onTouchStart",u=>(D=g.touch,this.handleDragStart(u))),d(this,"onTouchEnd",u=>(D=g.touch,this.handleDragStop(u)))}componentDidMount(){this.mounted=!0;const u=this.findDOMNode();u&&(0,a.addEvent)(u,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const u=this.findDOMNode();if(u){const{ownerDocument:p}=u;(0,a.removeEvent)(p,g.mouse.move,this.handleDrag),(0,a.removeEvent)(p,g.touch.move,this.handleDrag),(0,a.removeEvent)(p,g.mouse.stop,this.handleDragStop),(0,a.removeEvent)(p,g.touch.stop,this.handleDragStop),(0,a.removeEvent)(u,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.scheduleRemoveUserSelectStyles)(p)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:r.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return At.default=P,d(P,"displayName","DraggableCore"),d(P,"propTypes",{allowAnyClick:t.default.bool,allowMobileScroll:t.default.bool,children:t.default.node.isRequired,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:function(w,u){if(w[u]&&w[u].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:t.default.arrayOf(t.default.number),handle:t.default.string,cancel:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number,className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),d(P,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),At}var Tr;function Ro(){return Tr||(Tr=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var t=f(Wt()),r=h(vn()),a=h(Vr()),i=Po(),s=tr(),o=Ba(),l=bn(),c=h(Ao()),d=h(qa());function h(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(typeof WeakMap=="function")var x=new WeakMap,j=new WeakMap;return(f=function(C,b){if(!b&&C&&C.__esModule)return C;var v,S,N={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return N;if(v=b?j:x){if(v.has(C))return v.get(C);v.set(C,N)}for(const T in C)T!=="default"&&{}.hasOwnProperty.call(C,T)&&((S=(v=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,T))&&(S.get||S.set)?v(N,T,S):N[T]=C[T]);return N})(p,y)}function g(){return g=Object.assign?Object.assign.bind():function(p){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var j in x)({}).hasOwnProperty.call(x,j)&&(p[j]=x[j])}return p},g.apply(null,arguments)}function D(p,y,x){return(y=P(y))in p?Object.defineProperty(p,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):p[y]=x,p}function P(p){var y=w(p,"string");return typeof y=="symbol"?y:y+""}function w(p,y){if(typeof p!="object"||!p)return p;var x=p[Symbol.toPrimitive];if(x!==void 0){var j=x.call(p,y);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(p)}class u extends t.Component{static getDerivedStateFromProps(y,x){let{position:j}=y,{prevPropsPosition:C}=x;return j&&(!C||j.x!==C.x||j.y!==C.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:j,prevPropsPosition:C}),{x:j.x,y:j.y,prevPropsPosition:{...j}}):null}constructor(y){super(y),D(this,"onDragStart",(x,j)=>{if((0,d.default)("Draggable: onDragStart: %j",j),this.props.onStart(x,(0,o.createDraggableData)(this,j))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),D(this,"onDrag",(x,j)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",j);const C=(0,o.createDraggableData)(this,j),b={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:N}=b;b.x+=this.state.slackX,b.y+=this.state.slackY;const[T,R]=(0,o.getBoundPosition)(this,b.x,b.y);b.x=T,b.y=R,b.slackX=this.state.slackX+(S-b.x),b.slackY=this.state.slackY+(N-b.y),C.x=b.x,C.y=b.y,C.deltaX=b.x-this.state.x,C.deltaY=b.y-this.state.y}if(this.props.onDrag(x,C)===!1)return!1;this.setState(b)}),D(this,"onDragStop",(x,j)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,j))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",j);const b={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:N}=this.props.position;b.x=S,b.y=N}this.setState(b)}),this.state={dragging:!1,dragged:!1,x:y.position?y.position.x:y.defaultPosition.x,y:y.position?y.position.y:y.defaultPosition.y,prevPropsPosition:{...y.position},slackX:0,slackY:0,isElementSVG:!1},y.position&&!(y.onDrag||y.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??a.default.findDOMNode(this)}render(){const{axis:y,bounds:x,children:j,defaultPosition:C,defaultClassName:b,defaultClassNameDragging:v,defaultClassNameDragged:S,position:N,positionOffset:T,scale:R,...E}=this.props;let A={},k=null;const W=!!!N||this.state.dragging,$=N||C,ne={x:(0,o.canDragX)(this)&&W?this.state.x:$.x,y:(0,o.canDragY)(this)&&W?this.state.y:$.y};this.state.isElementSVG?k=(0,s.createSVGTransform)(ne,T):A=(0,s.createCSSTransform)(ne,T);const Se=(0,i.clsx)(j.props.className||"",b,{[v]:this.state.dragging,[S]:this.state.dragged});return t.createElement(c.default,g({},E,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(j),{className:Se,style:{...j.props.style,...A},transform:k}))}}e.default=u,D(u,"displayName","Draggable"),D(u,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),D(u,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Nn)),Nn}var kr;function nr(){if(kr)return Nt.exports;kr=1;const{default:e,DraggableCore:t}=Ro();return Nt.exports=e,Nt.exports.default=e,Nt.exports.DraggableCore=t,Nt.exports}var To=nr(),Rt={exports:{}},Tt={},en={},Er;function ko(){if(Er)return en;Er=1,en.__esModule=!0,en.cloneElement=l;var e=t(Wt());function t(c){return c&&c.__esModule?c:{default:c}}function r(c,d){var h=Object.keys(c);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(c);d&&(f=f.filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})),h.push.apply(h,f)}return h}function a(c){for(var d=1;d<arguments.length;d++){var h=arguments[d]!=null?arguments[d]:{};d%2?r(Object(h),!0).forEach(function(f){i(c,f,h[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):r(Object(h)).forEach(function(f){Object.defineProperty(c,f,Object.getOwnPropertyDescriptor(h,f))})}return c}function i(c,d,h){return(d=s(d))in c?Object.defineProperty(c,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[d]=h,c}function s(c){var d=o(c,"string");return typeof d=="symbol"?d:d+""}function o(c,d){if(typeof c!="object"||!c)return c;var h=c[Symbol.toPrimitive];if(h!==void 0){var f=h.call(c,d);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(c)}function l(c,d){return d.style&&c.props.style&&(d.style=a(a({},c.props.style),d.style)),d.className&&c.props.className&&(d.className=`${c.props.className} ${d.className}`),e.default.cloneElement(c,d)}return en}var kt={},Or;function $a(){if(Or)return kt;Or=1,kt.__esModule=!0,kt.resizableProps=void 0;var e=t(vn());nr();function t(r){return r&&r.__esModule?r:{default:r}}return kt.resizableProps={axis:e.default.oneOf(["both","x","y","none"]),className:e.default.string,children:e.default.element.isRequired,draggableOpts:e.default.shape({allowAnyClick:e.default.bool,cancel:e.default.string,children:e.default.node,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:typeof Element<"u"?e.default.instanceOf(Element):e.default.any,grid:e.default.arrayOf(e.default.number),handle:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number}),height:function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];const[s]=a;return s.axis==="both"||s.axis==="y"?e.default.number.isRequired(...a):e.default.number(...a)},handle:e.default.oneOfType([e.default.node,e.default.func]),handleSize:e.default.arrayOf(e.default.number),lockAspectRatio:e.default.bool,maxConstraints:e.default.arrayOf(e.default.number),minConstraints:e.default.arrayOf(e.default.number),onResizeStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,resizeHandles:e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:e.default.number,width:function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];const[s]=a;return s.axis==="both"||s.axis==="x"?e.default.number.isRequired(...a):e.default.number(...a)}},kt}var zr;function Fa(){if(zr)return Tt;zr=1,Tt.__esModule=!0,Tt.default=void 0;var e=s(Wt()),t=nr(),r=ko(),a=$a();const i=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function s(w,u){if(typeof WeakMap=="function")var p=new WeakMap,y=new WeakMap;return(s=function(x,j){if(!j&&x&&x.__esModule)return x;var C,b,v={__proto__:null,default:x};if(x===null||typeof x!="object"&&typeof x!="function")return v;if(C=j?y:p){if(C.has(x))return C.get(x);C.set(x,v)}for(const S in x)S!=="default"&&{}.hasOwnProperty.call(x,S)&&((b=(C=Object.defineProperty)&&Object.getOwnPropertyDescriptor(x,S))&&(b.get||b.set)?C(v,S,b):v[S]=x[S]);return v})(w,u)}function o(){return o=Object.assign?Object.assign.bind():function(w){for(var u=1;u<arguments.length;u++){var p=arguments[u];for(var y in p)({}).hasOwnProperty.call(p,y)&&(w[y]=p[y])}return w},o.apply(null,arguments)}function l(w,u){if(w==null)return{};var p,y,x=c(w,u);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(w);for(y=0;y<j.length;y++)p=j[y],u.indexOf(p)===-1&&{}.propertyIsEnumerable.call(w,p)&&(x[p]=w[p])}return x}function c(w,u){if(w==null)return{};var p={};for(var y in w)if({}.hasOwnProperty.call(w,y)){if(u.indexOf(y)!==-1)continue;p[y]=w[y]}return p}function d(w,u){var p=Object.keys(w);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(w);u&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(w,x).enumerable})),p.push.apply(p,y)}return p}function h(w){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?d(Object(p),!0).forEach(function(y){f(w,y,p[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(p)):d(Object(p)).forEach(function(y){Object.defineProperty(w,y,Object.getOwnPropertyDescriptor(p,y))})}return w}function f(w,u,p){return(u=g(u))in w?Object.defineProperty(w,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[u]=p,w}function g(w){var u=D(w,"string");return typeof u=="symbol"?u:u+""}function D(w,u){if(typeof w!="object"||!w)return w;var p=w[Symbol.toPrimitive];if(p!==void 0){var y=p.call(w,u);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(w)}let P=class extends e.Component{constructor(){super(...arguments),this.handleRefs={},this.lastHandleRect=null,this.slack=null,this.lastSize=null}componentWillUnmount(){this.resetData()}resetData(){this.lastHandleRect=this.slack=this.lastSize=null}runConstraints(u,p){const{minConstraints:y,maxConstraints:x,lockAspectRatio:j}=this.props;if(!y&&!x&&!j)return[u,p];if(j){const N=this.props.width/this.props.height,T=u-this.props.width,R=p-this.props.height;Math.abs(T)>Math.abs(R*N)?p=u/N:u=p*N}const[C,b]=[u,p];let[v,S]=this.slack||[0,0];return u+=v,p+=S,y&&(u=Math.max(y[0],u),p=Math.max(y[1],p)),x&&(u=Math.min(x[0],u),p=Math.min(x[1],p)),this.slack=[v+(C-u),S+(b-p)],[u,p]}resizeHandler(u,p){return(y,x)=>{let{node:j,deltaX:C,deltaY:b}=x;u==="onResizeStart"&&this.resetData();const v=(this.props.axis==="both"||this.props.axis==="x")&&p!=="n"&&p!=="s",S=(this.props.axis==="both"||this.props.axis==="y")&&p!=="e"&&p!=="w";if(!v&&!S)return;const N=p[0],T=p[p.length-1],R=j.getBoundingClientRect();if(this.lastHandleRect!=null){if(T==="w"){const $=R.left-this.lastHandleRect.left;C+=$}if(N==="n"){const $=R.top-this.lastHandleRect.top;b+=$}}this.lastHandleRect=R,T==="w"&&(C=-C),N==="n"&&(b=-b);let E=this.props.width+(v?C/this.props.transformScale:0),A=this.props.height+(S?b/this.props.transformScale:0);[E,A]=this.runConstraints(E,A),u==="onResizeStop"&&this.lastSize&&({width:E,height:A}=this.lastSize);const k=E!==this.props.width||A!==this.props.height;u!=="onResizeStop"&&(this.lastSize={width:E,height:A});const M=typeof this.props[u]=="function"?this.props[u]:null;M&&!(u==="onResize"&&!k)&&(y.persist?.(),M(y,{node:j,size:{width:E,height:A},handle:p})),u==="onResizeStop"&&this.resetData()}}renderResizeHandle(u,p){const{handle:y}=this.props;if(!y)return e.createElement("span",{className:`react-resizable-handle react-resizable-handle-${u}`,ref:p});if(typeof y=="function")return y(u,p);const x=typeof y.type=="string",j=h({ref:p},x?{}:{handleAxis:u});return e.cloneElement(y,j)}render(){const u=this.props,{children:p,className:y,draggableOpts:x,width:j,height:C,handle:b,handleSize:v,lockAspectRatio:S,axis:N,minConstraints:T,maxConstraints:R,onResize:E,onResizeStop:A,onResizeStart:k,resizeHandles:M,transformScale:W}=u,$=l(u,i);return(0,r.cloneElement)(p,h(h({},$),{},{className:`${y?`${y} `:""}react-resizable`,children:[...e.Children.toArray(p.props.children),...M.map(ne=>{const Se=this.handleRefs[ne]??(this.handleRefs[ne]=e.createRef());return e.createElement(t.DraggableCore,o({},x,{nodeRef:Se,key:`resizableHandle-${ne}`,onStop:this.resizeHandler("onResizeStop",ne),onStart:this.resizeHandler("onResizeStart",ne),onDrag:this.resizeHandler("onResize",ne)}),this.renderResizeHandle(ne,Se))})]}))}};return Tt.default=P,P.propTypes=a.resizableProps,P.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},Tt}var Et={},Mr;function Eo(){if(Mr)return Et;Mr=1,Et.__esModule=!0,Et.default=void 0;var e=o(Wt()),t=s(vn()),r=s(Fa()),a=$a();const i=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function s(u){return u&&u.__esModule?u:{default:u}}function o(u,p){if(typeof WeakMap=="function")var y=new WeakMap,x=new WeakMap;return(o=function(j,C){if(!C&&j&&j.__esModule)return j;var b,v,S={__proto__:null,default:j};if(j===null||typeof j!="object"&&typeof j!="function")return S;if(b=C?x:y){if(b.has(j))return b.get(j);b.set(j,S)}for(const N in j)N!=="default"&&{}.hasOwnProperty.call(j,N)&&((v=(b=Object.defineProperty)&&Object.getOwnPropertyDescriptor(j,N))&&(v.get||v.set)?b(S,N,v):S[N]=j[N]);return S})(u,p)}function l(){return l=Object.assign?Object.assign.bind():function(u){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var x in y)({}).hasOwnProperty.call(y,x)&&(u[x]=y[x])}return u},l.apply(null,arguments)}function c(u,p){var y=Object.keys(u);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);p&&(x=x.filter(function(j){return Object.getOwnPropertyDescriptor(u,j).enumerable})),y.push.apply(y,x)}return y}function d(u){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?c(Object(y),!0).forEach(function(x){h(u,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(y)):c(Object(y)).forEach(function(x){Object.defineProperty(u,x,Object.getOwnPropertyDescriptor(y,x))})}return u}function h(u,p,y){return(p=f(p))in u?Object.defineProperty(u,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):u[p]=y,u}function f(u){var p=g(u,"string");return typeof p=="symbol"?p:p+""}function g(u,p){if(typeof u!="object"||!u)return u;var y=u[Symbol.toPrimitive];if(y!==void 0){var x=y.call(u,p);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(u)}function D(u,p){if(u==null)return{};var y,x,j=P(u,p);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);for(x=0;x<C.length;x++)y=C[x],p.indexOf(y)===-1&&{}.propertyIsEnumerable.call(u,y)&&(j[y]=u[y])}return j}function P(u,p){if(u==null)return{};var y={};for(var x in u)if({}.hasOwnProperty.call(u,x)){if(p.indexOf(x)!==-1)continue;y[x]=u[x]}return y}let w=class extends e.Component{constructor(){super(...arguments),this.state={width:this.props.width,height:this.props.height,propsWidth:this.props.width,propsHeight:this.props.height},this.onResize=(p,y)=>{const{size:x}=y;this.props.onResize?(p.persist?.(),this.setState(x,()=>this.props.onResize&&this.props.onResize(p,y))):this.setState(x)}}static getDerivedStateFromProps(p,y){return y.propsWidth!==p.width||y.propsHeight!==p.height?{width:p.width,height:p.height,propsWidth:p.width,propsHeight:p.height}:null}render(){const p=this.props,{handle:y,handleSize:x,onResize:j,onResizeStart:C,onResizeStop:b,draggableOpts:v,minConstraints:S,maxConstraints:N,lockAspectRatio:T,axis:R,width:E,height:A,resizeHandles:k,style:M,transformScale:W}=p,$=D(p,i);return e.createElement(r.default,{axis:R,draggableOpts:v,handle:y,handleSize:x,height:this.state.height,lockAspectRatio:T,maxConstraints:N,minConstraints:S,onResizeStart:C,onResize:this.onResize,onResizeStop:b,resizeHandles:k,transformScale:W,width:this.state.width},e.createElement("div",l({},$,{style:d(d({},M),{},{width:this.state.width+"px",height:this.state.height+"px"})})))}};return Et.default=w,w.propTypes=d(d({},a.resizableProps),{},{children:t.default.element}),Et}var Ir;function Oo(){return Ir||(Ir=1,Rt.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Rt.exports.Resizable=Fa().default,Rt.exports.ResizableBox=Eo().default),Rt.exports}var zo=Oo();function Wr(e){const{children:t,cols:r,containerWidth:a,margin:i,containerPadding:s,rowHeight:o,maxRows:l,isDraggable:c,isResizable:d,isBounded:h,static:f,useCSSTransforms:g=!0,usePercentages:D=!1,transformScale:P=1,positionStrategy:w,dragThreshold:u=0,droppingPosition:p,className:y="",style:x,handle:j="",cancel:C="",x:b,y:v,w:S,h:N,minW:T=1,maxW:R=1/0,minH:E=1,maxH:A=1/0,i:k,resizeHandles:M,resizeHandle:W,constraints:$=Ca,layoutItem:ne,layout:Se=[],onDragStart:ae,onDrag:Ae,onDragStop:Ee,onResizeStart:at,onResize:Be,onResizeStop:qe}=e,[ce,de]=m.useState(!1),[Ce,G]=m.useState(!1),ue=m.useRef(null),L=m.useRef({left:0,top:0}),pe=m.useRef({top:0,left:0,width:0,height:0}),he=m.useRef(void 0),$e=m.useRef(Se);$e.current=Se;const Re=m.useRef(null),se=m.useRef(null),xe=m.useRef(!1),ut=m.useRef({x:0,y:0}),V=m.useRef(!1),K=m.useMemo(()=>({cols:r,containerPadding:s,containerWidth:a,margin:i,maxRows:l,rowHeight:o}),[r,s,a,i,l,o]),ve=m.useMemo(()=>({cols:r,maxRows:l,containerWidth:a,containerHeight:0,rowHeight:o,margin:i,layout:[]}),[r,l,a,o,i]),fe=m.useCallback(()=>({...ve,layout:$e.current}),[ve]),Te=m.useMemo(()=>ne??{i:k,x:b,y:v,w:S,h:N,minW:T,maxW:R,minH:E,maxH:A},[ne,k,b,v,S,N,T,R,E,A]),_t=m.useCallback(H=>{if(w?.calcStyle)return w.calcStyle(H);if(g)return Da(H);const B=Hi(H);return D?{...B,left:fr(H.left/a),width:fr(H.width/a)}:B},[w,g,D,a]),Oe=m.useCallback((H,{node:B})=>{if(!ae)return;const{offsetParent:J}=B;if(!J)return;const F=J.getBoundingClientRect(),ie=B.getBoundingClientRect(),be=ie.left/P,je=F.left/P,we=ie.top/P,Pe=F.top/P;let Ne;if(w?.calcDragPosition){const I=H;Ne=w.calcDragPosition(I.clientX,I.clientY,I.clientX-ie.left,I.clientY-ie.top)}else Ne={left:be-je+J.scrollLeft,top:we-Pe+J.scrollTop};if(L.current=Ne,u>0){const I=H;ut.current={x:I.clientX,y:I.clientY},xe.current=!0,V.current=!1,de(!0);return}de(!0);const Ke=Yt(K,Ne.top,Ne.left),{x:Xe,y:O}=Vt($,Te,Ke.x,Ke.y,fe());ae(k,Xe,O,{e:H,node:B,newPosition:Ne})},[ae,P,K,w,u,$,Te,fe,k]),pt=m.useCallback((H,{node:B,deltaX:J,deltaY:F})=>{if(!Ae||!ce)return;const ie=H;if(xe.current&&!V.current){const Xe=ie.clientX-ut.current.x,O=ie.clientY-ut.current.y;if(Math.hypot(Xe,O)<u)return;if(V.current=!0,xe.current=!1,ae){const z=Yt(K,L.current.top,L.current.left),{x:_,y:U}=Vt($,Te,z.x,z.y,fe());ae(k,_,U,{e:H,node:B,newPosition:L.current})}}let be=L.current.top+F,je=L.current.left+J;if(h){const{offsetParent:Xe}=B;if(Xe){const O=Xe.clientHeight-bt(N,o,i[1]);be=sn(be,0,O);const I=jt(K),z=a-bt(S,I,i[0]);je=sn(je,0,z)}}const we={top:be,left:je};L.current=we;const Pe=Yt(K,be,je),{x:Ne,y:Ke}=Vt($,Te,Pe.x,Pe.y,fe());Ae(k,Ne,Ke,{e:H,node:B,newPosition:we})},[Ae,ae,ce,u,h,N,o,i,K,a,S,k,$,Te,fe]),Fe=m.useCallback((H,{node:B})=>{if(!Ee||!ce)return;const J=xe.current;if(xe.current=!1,V.current=!1,ut.current={x:0,y:0},J){de(!1),L.current={left:0,top:0};return}const{left:F,top:ie}=L.current,be={top:ie,left:F};de(!1),L.current={left:0,top:0};const je=Yt(K,ie,F),{x:we,y:Pe}=Vt($,Te,je.x,je.y,fe());Ee(k,we,Pe,{e:H,node:B,newPosition:be})},[Ee,ce,K,$,Te,fe,k]);Re.current=Oe,se.current=pt;const ke=m.useCallback((H,{node:B,size:J,handle:F},ie,be)=>{const je=be==="onResizeStart"?at:be==="onResize"?Be:qe;if(!je)return;let we;B?we=Xi(F,ie,J,a):we={...J,top:ie.top,left:ie.left},pe.current=we;const Pe=Oi(K,we.width,we.height),{w:Ne,h:Ke}=_i($,Te,Pe.w,Pe.h,F,fe());je(k,Ne,Ke,{e:H.nativeEvent,node:B,size:we,handle:F})},[at,Be,qe,a,K,k,$,Te,fe]),ht=m.useCallback((H,B)=>{G(!0);const J=Pt(K,b,v,S,N),F={...B,handle:B.handle};ke(H,F,J,"onResizeStart")},[ke,K,b,v,S,N]),ft=m.useCallback((H,B)=>{const J=Pt(K,b,v,S,N),F={...B,handle:B.handle};ke(H,F,J,"onResize")},[ke,K,b,v,S,N]),Ue=m.useCallback((H,B)=>{G(!1),pe.current={top:0,left:0,width:0,height:0};const J=Pt(K,b,v,S,N),F={...B,handle:B.handle};ke(H,F,J,"onResizeStop")},[ke,K,b,v,S,N]);m.useEffect(()=>{if(!p)return;const H=ue.current;if(!H)return;const B=he.current||{left:0,top:0},J=ce&&(p.left!==B.left||p.top!==B.top);if(ce){if(J){const F=p.left-L.current.left,ie=p.top-L.current.top,be={node:H,deltaX:F,deltaY:ie,lastX:L.current.left,lastY:L.current.top,x:p.left,y:p.top};se.current?.(p.e,be)}}else{const F={node:H,deltaX:p.left,deltaY:p.top,lastX:0,lastY:0,x:p.left,y:p.top};Re.current?.(p.e,F)}he.current=p},[p,ce,k]);const ze=Pt(K,b,v,S,N,ce?L.current:null,Ce?pe.current:null),St=Ie.Children.only(t),Ct=Pt(K,0,0,1,1),Ht=[Ct.width,Ct.height],Bt=[1/0,1/0],De=St.props,jn=De.className,qt=De.style;let Ge=Ie.cloneElement(St,{ref:ue,className:wt("react-grid-item",jn,y,{static:f,resizing:Ce,"react-draggable":c,"react-draggable-dragging":ce,dropping:!!p,cssTransforms:g}),style:{...x,...qt,..._t(ze)}});const $t=W;return Ge=n.jsx(zo.Resizable,{draggableOpts:{disabled:!d},className:d?void 0:"react-resizable-hide",width:ze.width,height:ze.height,minConstraints:Ht,maxConstraints:Bt,onResizeStart:ht,onResize:ft,onResizeStop:Ue,transformScale:P,resizeHandles:M,handle:$t,children:Ge}),Ge=n.jsx(To.DraggableCore,{disabled:!c,onStart:Oe,onDrag:pt,onStop:Fe,handle:j,cancel:".react-resizable-handle"+(C?","+C:""),scale:P,nodeRef:ue,children:Ge}),Ge}var _e=()=>{},Lr="react-grid-layout",Ua=!1;try{Ua=/firefox/i.test(navigator.userAgent)}catch{}function Mo(e,t){const r=Ie.Children.toArray(e),a=Ie.Children.toArray(t);if(r.length!==a.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],o=a[i];if(s?.key!==o?.key)return!1}return!0}function _r(e,t,r,a){const i=[],s=new Set;Ie.Children.forEach(t,l=>{if(!Ie.isValidElement(l)||l.key===null)return;const c=String(l.key);s.add(c);const d=e.find(h=>h.i===c);if(d)i.push(dt(d));else{const f=l.props["data-grid"];f?i.push({i:c,x:f.x??0,y:f.y??0,w:f.w??1,h:f.h??1,minW:f.minW,maxW:f.maxW,minH:f.minH,maxH:f.maxH,static:f.static,isDraggable:f.isDraggable,isResizable:f.isResizable,resizeHandles:f.resizeHandles,isBounded:f.isBounded}):i.push({i:c,x:0,y:fn(i),w:1,h:1})}});const o=Xn(i,{cols:r});return a.compact(o,r)}function Io(e){const{children:t,width:r,gridConfig:a,dragConfig:i,resizeConfig:s,dropConfig:o,positionStrategy:l=Vi,compactor:c,constraints:d=Ca,layout:h=[],droppingItem:f,autoSize:g=!0,className:D="",style:P={},innerRef:w,onLayoutChange:u=_e,onDragStart:p=_e,onDrag:y=_e,onDragStop:x=_e,onResizeStart:j=_e,onResize:C=_e,onResizeStop:b=_e,onDrop:v=_e,onDropDragOver:S=_e}=e,N=m.useMemo(()=>({...Qi,...a}),[a]),T=m.useMemo(()=>({...Ji,...i}),[i]),R=m.useMemo(()=>({...Zi,...s}),[s]),E=m.useMemo(()=>({...eo,...o}),[o]),{cols:A,rowHeight:k,maxRows:M,margin:W,containerPadding:$}=N,{enabled:ne,bounded:Se,handle:ae,cancel:Ae,threshold:Ee}=T,{enabled:at,handles:Be,handleComponent:qe}=R,{enabled:ce,defaultItem:de,onDragOver:Ce}=E,G=c??er("vertical"),ue=G.type,L=G.allowOverlap,pe=G.preventCollision??!1,he=m.useMemo(()=>f??{i:"__dropping-elem__",...de},[f,de]),$e=l.type==="transform",Re=l.scale,se=$??W,[xe,ut]=m.useState(!1),[V,K]=m.useState(()=>_r(h,t,A,G)),[ve,fe]=m.useState(null),[Te,_t]=m.useState(!1),[Oe,pt]=m.useState(null),[Fe,ke]=m.useState(),ht=m.useRef(null),ft=m.useRef(null),Ue=m.useRef(null),ze=m.useRef(0),St=m.useRef(V),Ct=m.useRef(h),Ht=m.useRef(t),Bt=m.useRef(ue),De=m.useRef(V);De.current=V,m.useEffect(()=>{ut(!0),He(V,h)||u(V)},[]),m.useEffect(()=>{if(ve||Oe)return;const O=!He(h,Ct.current),I=!Mo(t,Ht.current),z=ue!==Bt.current;if(O||I||z){const U=_r(O?h:V,t,A,G);He(U,V)||K(U)}Ct.current=h,Ht.current=t,Bt.current=ue},[h,t,A,ue,G,ve,Oe,V]),m.useEffect(()=>{if(!ve&&!He(V,St.current)){St.current=V;const O=V.filter(I=>I.i!==he.i);u(O)}},[V,ve,u,he.i]);const jn=m.useMemo(()=>{if(!g)return;const O=fn(V),I=se[1];return O*k+(O-1)*W[1]+I*2+"px"},[g,V,k,W,se]),qt=m.useCallback((O,I,z,_)=>{const U=De.current,q=it(U,O);if(!q)return;const X={w:q.w,h:q.h,x:q.x,y:q.y,i:O};ht.current=dt(q),Ue.current=U,fe(X),p(U,q,q,null,_.e,_.node)},[p]),Ge=m.useCallback((O,I,z,_)=>{const U=De.current,q=ht.current,X=it(U,O);if(!X)return;const oe={w:X.w,h:X.h,x:X.x,y:X.y,i:O},Y=ot(U,X,I,z,!0,pe,ue,A,L);y(Y,q,X,oe,_.e,_.node),K(G.compact(Y,A)),fe(oe)},[pe,ue,A,L,G,y]),$t=m.useCallback((O,I,z,_)=>{if(!ve)return;const U=De.current,q=ht.current,X=it(U,O);if(!X)return;const oe=ot(U,X,I,z,!0,pe,ue,A,L),Y=G.compact(oe,A);x(Y,q,X,null,_.e,_.node);const ge=Ue.current;ht.current=null,Ue.current=null,fe(null),K(Y),ge&&!He(ge,Y)&&u(Y)},[ve,pe,ue,A,L,G,x,u]),H=m.useCallback((O,I,z,_)=>{const U=De.current,q=it(U,O);q&&(ft.current=dt(q),Ue.current=U,_t(!0),j(U,q,q,null,_.e,_.node))},[j]),B=m.useCallback((O,I,z,_)=>{const U=De.current,q=ft.current,{handle:X}=_;let oe=!1,Y,ge;const[Ft,Le]=Ii(U,O,Q=>(Y=Q.x,ge=Q.y,["sw","w","nw","n","ne"].includes(X)&&(["sw","nw","w"].includes(X)&&(Y=Q.x+(Q.w-I),I=Q.x!==Y&&Y<0?Q.w:I,Y=Y<0?0:Y),["ne","n","nw"].includes(X)&&(ge=Q.y+(Q.h-z),z=Q.y!==ge&&ge<0?Q.h:z,ge=ge<0?0:ge),oe=!0),pe&&!L&&ja(U,{...Q,w:I,h:z,x:Y??Q.x,y:ge??Q.y}).filter(Gt=>Gt.i!==Q.i).length>0&&(ge=Q.y,z=Q.h,Y=Q.x,I=Q.w,oe=!1),Q.w=I,Q.h=z,Q));if(!Le)return;let Dt=Ft;oe&&Y!==void 0&&ge!==void 0&&(Dt=ot(Ft,Le,Y,ge,!0,pe,ue,A,L));const Ut={w:Le.w,h:Le.h,x:Le.x,y:Le.y,i:O,static:!0};C(Dt,q,Le,Ut,_.e,_.node),K(G.compact(Dt,A)),fe(Ut)},[pe,ue,A,L,G,C]),J=m.useCallback((O,I,z,_)=>{const U=De.current,q=ft.current,X=it(U,O),oe=G.compact(U,A);b(oe,q,X??null,null,_.e,_.node);const Y=Ue.current;ft.current=null,Ue.current=null,fe(null),_t(!1),K(oe),Y&&!He(Y,oe)&&u(oe)},[A,G,b,u]),F=m.useCallback(()=>{const O=De.current;if(!O.some(_=>_.i===he.i)){pt(null),fe(null),ke(void 0);return}const z=G.compact(O.filter(_=>_.i!==he.i),A);K(z),pt(null),fe(null),ke(void 0)},[he.i,A,G]),ie=m.useCallback(O=>{if(O.preventDefault(),O.stopPropagation(),Ua&&!O.nativeEvent.target?.classList.contains(Lr))return!1;const I=Ce?Ce(O.nativeEvent):S(O);if(I===!1)return Oe&&F(),!1;const{dragOffsetX:z=0,dragOffsetY:_=0,...U}=I??{},q={...he,...U},X=O.currentTarget.getBoundingClientRect(),oe={cols:A,margin:W,maxRows:M,rowHeight:k,containerWidth:r,containerPadding:se},Y=jt(oe),ge=bt(q.w,Y,W[0]),Ft=bt(q.h,k,W[1]),Le=ge/2,Dt=Ft/2,Ut=O.clientX-X.left+z-Le,Q=O.clientY-X.top+_-Dt,Sn=Math.max(0,Ut),Gt=Math.max(0,Q),Kt={left:Sn/Re,top:Gt/Re,e:O.nativeEvent};if(Oe)Fe&&(Fe.left!==Kt.left||Fe.top!==Kt.top)&&ke(Kt);else{const Cn=Ei(oe,Gt,Sn,q.w,q.h);pt(n.jsx("div",{},q.i)),ke(Kt),K([...De.current,{...q,x:Cn.x,y:Cn.y,static:!1,isDraggable:!0}])}},[Oe,Fe,he,Ce,S,F,Re,A,W,M,k,r,se]),be=m.useCallback(O=>{O.preventDefault(),O.stopPropagation(),ze.current--,ze.current<0&&(ze.current=0),ze.current===0&&F()},[F]),je=m.useCallback(O=>{O.preventDefault(),O.stopPropagation(),ze.current++},[]),we=m.useCallback(O=>{O.preventDefault(),O.stopPropagation();const I=De.current,z=I.find(_=>_.i===he.i);ze.current=0,F(),v(I,z,O.nativeEvent)},[he.i,F,v]),Pe=m.useCallback((O,I)=>{if(!O||!O.key)return null;const z=it(V,String(O.key));if(!z)return null;const _=typeof z.isDraggable=="boolean"?z.isDraggable:!z.static&&ne,U=typeof z.isResizable=="boolean"?z.isResizable:!z.static&&at,q=z.resizeHandles||[...Be],X=_&&Se&&z.isBounded!==!1,oe=qe;return n.jsx(Wr,{containerWidth:r,cols:A,margin:W,containerPadding:se,maxRows:M,rowHeight:k,cancel:Ae,handle:ae,onDragStart:qt,onDrag:Ge,onDragStop:$t,onResizeStart:H,onResize:B,onResizeStop:J,isDraggable:_,isResizable:U,isBounded:X,useCSSTransforms:$e&&xe,usePercentages:!xe,transformScale:Re,positionStrategy:l,dragThreshold:Ee,w:z.w,h:z.h,x:z.x,y:z.y,i:z.i,minH:z.minH,minW:z.minW,maxH:z.maxH,maxW:z.maxW,static:z.static,droppingPosition:I?Fe:void 0,resizeHandles:q,resizeHandle:oe,constraints:d,layoutItem:z,layout:V,children:O},z.i)},[V,r,A,W,se,M,k,Ae,ae,qt,Ge,$t,H,B,J,ne,at,Se,$e,xe,Re,l,Ee,Fe,Be,qe,d]),Ne=()=>ve?n.jsx(Wr,{w:ve.w,h:ve.h,x:ve.x,y:ve.y,i:ve.i,className:`react-grid-placeholder ${Te?"placeholder-resizing":""}`,containerWidth:r,cols:A,margin:W,containerPadding:se,maxRows:M,rowHeight:k,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:$e,transformScale:Re,constraints:d,layout:V,children:n.jsx("div",{})}):null,Ke=wt(Lr,D),Xe={height:jn,...P};return n.jsxs("div",{ref:w,className:Ke,style:Xe,onDrop:ce?we:void 0,onDragLeave:ce?be:void 0,onDragEnter:ce?je:void 0,onDragOver:ce?ie:void 0,children:[Ie.Children.map(t,O=>Ie.isValidElement(O)?Pe(O):null),ce&&Oe&&Pe(Oe,!0),Ne()]})}var Wo={lg:1200,md:996,sm:768,xs:480,xxs:0},Lo={lg:12,md:10,sm:6,xs:4,xxs:2},kn=()=>{};function _o(e,t,r,a){const i=[];Ie.Children.forEach(t,o=>{if(!Ie.isValidElement(o)||o.key===null)return;const l=String(o.key),c=e.find(d=>d.i===l);if(c)i.push({...c,i:l});else{const h=o.props["data-grid"];h?i.push({i:l,x:h.x??0,y:h.y??0,w:h.w??1,h:h.h??1,minW:h.minW,maxW:h.maxW,minH:h.minH,maxH:h.maxH,static:h.static,isDraggable:h.isDraggable,isResizable:h.isResizable,resizeHandles:h.resizeHandles,isBounded:h.isBounded}):i.push({i:l,x:0,y:fn(i),w:1,h:1})}});const s=Xn(i,{cols:r});return a.compact(s,r)}function Ho(e){const{children:t,width:r,breakpoint:a,breakpoints:i=Wo,cols:s=Lo,layouts:o={},rowHeight:l=150,maxRows:c=1/0,margin:d=[10,10],containerPadding:h=null,compactor:f,onBreakpointChange:g=kn,onLayoutChange:D=kn,onWidthChange:P=kn,...w}=e,u=f??er("vertical"),p=u.type,y=u.allowOverlap,x=m.useMemo(()=>a??mr(i,r),[]),j=m.useMemo(()=>gr(x,s),[x,s]),C=m.useMemo(()=>Pn(o,i,x,x,j,p),[]),[b,v]=m.useState(x),[S,N]=m.useState(j),[T,R]=m.useState(C),[E,A]=m.useState(o),k=m.useRef(r),M=m.useRef(a),W=m.useRef(i),$=m.useRef(s),ne=m.useRef(o),Se=m.useRef(p),ae=m.useRef(E);m.useEffect(()=>{ae.current=E},[E]);const Ae=m.useMemo(()=>He(o,ne.current)?null:Pn(o,i,b,b,S,u),[o,i,b,S,u]),Ee=Ae??T;m.useEffect(()=>{Ae!==null&&(R(Ae),A(o),ae.current=o,ne.current=o)},[Ae,o]),m.useEffect(()=>{if(p!==Se.current){const de=u.compact(et(Ee),S),Ce={...ae.current,[b]:de};R(de),A(Ce),ae.current=Ce,D(de,Ce),Se.current=p}},[p,u,Ee,S,y,b,D]),m.useEffect(()=>{const de=r!==k.current,Ce=a!==M.current,G=!He(i,W.current),ue=!He(s,$.current);if(de||Ce||G||ue){const L=a??mr(i,r),pe=gr(L,s),he=b;if(he!==L||G||ue){const se={...ae.current};se[he]||(se[he]=et(T));let xe=Pn(se,i,L,he,pe,u);xe=_o(xe,t,pe,u),se[L]=xe,v(L),N(pe),R(xe),A(se),ae.current=se,g(L,pe),D(xe,se)}const $e=Qt(d,L),Re=h?Qt(h,L):null;P(r,$e,pe,Re),k.current=r,M.current=a,W.current=i,$.current=s}},[r,a,i,s,b,S,T,t,u,p,y,d,h,g,D,P]);const at=m.useCallback(de=>{const G={...ae.current,[b]:de};R(de),A(G),ae.current=G,D(de,G)},[b,D]),Be=m.useMemo(()=>Qt(d,b),[d,b]),qe=m.useMemo(()=>h===null?null:Qt(h,b),[h,b]),ce=m.useMemo(()=>({cols:S,rowHeight:l,maxRows:c,margin:Be,containerPadding:qe}),[S,l,c,Be,qe]);return n.jsx(Io,{...w,width:r,gridConfig:ce,compactor:u,onLayoutChange:at,layout:Ee,children:t})}const ln=[{id:"executive",name:"Executive Overview",description:"Comprehensive view for C-level and VPs",isBuiltIn:!0,layouts:{lg:[{i:"scorecard-1",x:0,y:0,w:3,h:2,minW:3,minH:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"stats-row-1",x:3,y:0,w:9,h:1,minW:6,minH:1,widgetType:"stats-row",widgetId:"stats-row-1"},{i:"heatmap-1",x:3,y:1,w:9,h:2,minW:6,minH:2,widgetType:"heatmap",widgetId:"heatmap-1"},{i:"trend-chart-1",x:0,y:3,w:4,h:2,minW:4,minH:2,widgetType:"trend-chart",widgetId:"trend-chart-1"},{i:"campaigns-1",x:4,y:3,w:4,h:2,minW:3,minH:2,widgetType:"campaigns",widgetId:"campaigns-1"},{i:"tasks-1",x:8,y:3,w:4,h:2,minW:3,minH:2,widgetType:"tasks",widgetId:"tasks-1"},{i:"owner-pivot-1",x:0,y:5,w:12,h:2,minW:8,minH:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"},{i:"accountability-1",x:0,y:7,w:6,h:2,minW:4,minH:2,widgetType:"accountability",widgetId:"accountability-1"}],md:[{i:"scorecard-1",x:0,y:0,w:6,h:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"stats-row-1",x:6,y:0,w:6,h:1,widgetType:"stats-row",widgetId:"stats-row-1"},{i:"heatmap-1",x:0,y:2,w:12,h:2,widgetType:"heatmap",widgetId:"heatmap-1"},{i:"trend-chart-1",x:0,y:4,w:6,h:2,widgetType:"trend-chart",widgetId:"trend-chart-1"},{i:"campaigns-1",x:6,y:4,w:6,h:2,widgetType:"campaigns",widgetId:"campaigns-1"},{i:"owner-pivot-1",x:0,y:6,w:12,h:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}],sm:[{i:"scorecard-1",x:0,y:0,w:12,h:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"stats-row-1",x:0,y:2,w:12,h:1,widgetType:"stats-row",widgetId:"stats-row-1"},{i:"heatmap-1",x:0,y:3,w:12,h:2,widgetType:"heatmap",widgetId:"heatmap-1"},{i:"owner-pivot-1",x:0,y:5,w:12,h:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}]}},{id:"quality-focus",name:"Quality Focus",description:"Deep-dive into quality dimensions and trends",isBuiltIn:!0,layouts:{lg:[{i:"scorecard-1",x:0,y:0,w:4,h:2,minW:3,minH:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"data-quality-trends-1",x:4,y:0,w:8,h:2,minW:6,minH:2,widgetType:"data-quality-trends",widgetId:"data-quality-trends-1",isNew:!0},{i:"heatmap-1",x:0,y:2,w:12,h:2,minW:6,minH:2,widgetType:"heatmap",widgetId:"heatmap-1"},{i:"asset-type-distribution-1",x:0,y:4,w:4,h:2,minW:4,minH:2,widgetType:"asset-type-distribution",widgetId:"asset-type-distribution-1",isNew:!0},{i:"owner-pivot-1",x:4,y:4,w:8,h:2,minW:8,minH:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}],md:[{i:"scorecard-1",x:0,y:0,w:6,h:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"data-quality-trends-1",x:6,y:0,w:6,h:2,widgetType:"data-quality-trends",widgetId:"data-quality-trends-1"},{i:"heatmap-1",x:0,y:2,w:12,h:2,widgetType:"heatmap",widgetId:"heatmap-1"}],sm:[{i:"scorecard-1",x:0,y:0,w:12,h:2,widgetType:"scorecard",widgetId:"scorecard-1"},{i:"heatmap-1",x:0,y:2,w:12,h:2,widgetType:"heatmap",widgetId:"heatmap-1"}]}},{id:"stewardship",name:"Stewardship Dashboard",description:"Focus on ownership, tasks, and accountability",isBuiltIn:!0,layouts:{lg:[{i:"top-stewards-leaderboard-1",x:0,y:0,w:4,h:3,minW:4,minH:3,widgetType:"top-stewards-leaderboard",widgetId:"top-stewards-leaderboard-1",isNew:!0},{i:"tasks-1",x:4,y:0,w:4,h:3,minW:3,minH:2,widgetType:"tasks",widgetId:"tasks-1"},{i:"campaigns-1",x:8,y:0,w:4,h:3,minW:3,minH:2,widgetType:"campaigns",widgetId:"campaigns-1"},{i:"accountability-1",x:0,y:3,w:6,h:2,minW:4,minH:2,widgetType:"accountability",widgetId:"accountability-1"},{i:"recent-activity-1",x:6,y:3,w:6,h:2,minW:4,minH:2,widgetType:"recent-activity",widgetId:"recent-activity-1",isNew:!0},{i:"owner-pivot-1",x:0,y:5,w:12,h:2,minW:8,minH:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}],md:[{i:"top-stewards-leaderboard-1",x:0,y:0,w:6,h:3,widgetType:"top-stewards-leaderboard",widgetId:"top-stewards-leaderboard-1"},{i:"tasks-1",x:6,y:0,w:6,h:3,widgetType:"tasks",widgetId:"tasks-1"},{i:"owner-pivot-1",x:0,y:3,w:12,h:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}],sm:[{i:"tasks-1",x:0,y:0,w:12,h:2,widgetType:"tasks",widgetId:"tasks-1"},{i:"owner-pivot-1",x:0,y:2,w:12,h:2,widgetType:"owner-pivot",widgetId:"owner-pivot-1"}]}},{id:"custom",name:"Blank Canvas",description:"Start from scratch and add your own widgets",isBuiltIn:!0,layouts:{lg:[{i:"scorecard-1",x:0,y:0,w:3,h:2,minW:3,minH:2,widgetType:"scorecard",widgetId:"scorecard-1"}],md:[{i:"scorecard-1",x:0,y:0,w:6,h:2,widgetType:"scorecard",widgetId:"scorecard-1"}],sm:[{i:"scorecard-1",x:0,y:0,w:12,h:2,widgetType:"scorecard",widgetId:"scorecard-1"}]}}],Bo={lg:[],md:[],sm:[]};function Hr(){console.log("[DashboardStore] Getting initial layouts..."),console.log("[DashboardStore] Available templates:",ln.map(t=>t.id));const e=ln.find(t=>t.id==="executive");return e?(console.log("[DashboardStore] Found executive template with",e.layouts.lg.length,"widgets"),JSON.parse(JSON.stringify(e.layouts))):(console.log("[DashboardStore] No executive template found, using empty layout"),Bo)}function qo(e,t){const r=ln.find(i=>i.id===e);return r||t.find(i=>i.id===e)||null}const Lt=rs()(as((e,t)=>({activeTemplateId:"executive",currentLayouts:Hr(),isEditMode:!1,customTemplates:[],setActiveTemplate:r=>{const a=qo(r,t().customTemplates);a&&e({activeTemplateId:r,currentLayouts:JSON.parse(JSON.stringify(a.layouts))})},updateLayout:(r,a)=>{e(i=>({currentLayouts:{...i.currentLayouts,[r]:a}}))},addWidget:(r,a="lg")=>{const i=`${r}-${Date.now()}`,s=ra(r);if(!s){console.warn(`Widget type ${r} not found in registry`);return}const o=t().currentLayouts,l=o[a]||o.lg,c=l.length>0?Math.max(...l.map(f=>f.y+f.h)):0,d={i,x:0,y:c,w:s.defaultSize.w,h:s.defaultSize.h,minW:s.minSize.w,minH:s.minSize.h,maxW:s.maxSize?.w,maxH:s.maxSize?.h,widgetType:r,widgetId:i},h=a;e(f=>({currentLayouts:{...f.currentLayouts,[h]:[...f.currentLayouts[h]||[],d]}}))},removeWidget:r=>{e(a=>({currentLayouts:{lg:a.currentLayouts.lg.filter(i=>i.widgetId!==r),md:a.currentLayouts.md.filter(i=>i.widgetId!==r),sm:a.currentLayouts.sm.filter(i=>i.widgetId!==r)}}))},toggleEditMode:()=>{e(r=>({isEditMode:!r.isEditMode}))},resetToTemplate:r=>{t().setActiveTemplate(r)},saveAsCustomTemplate:(r,a)=>{const i={id:`custom-${Date.now()}`,name:r,description:a,layouts:JSON.parse(JSON.stringify(t().currentLayouts)),isBuiltIn:!1};e(s=>({customTemplates:[...s.customTemplates,i]}))},deleteCustomTemplate:r=>{e(a=>({customTemplates:a.customTemplates.filter(i=>i.id!==r)}))}}),{name:"dashboard-layout-storage",version:3,migrate:(e,t)=>t<3||!e.currentLayouts?.lg?.length?(console.log("[DashboardStore] Migrating from version",t,"-> 3, resetting layouts"),{...e,currentLayouts:Hr()}):e,partialize:e=>({activeTemplateId:e.activeTemplateId,currentLayouts:e.currentLayouts,customTemplates:e.customTemplates})})),$o={lg:1200,md:768,sm:0},Fo={lg:12,md:12,sm:12};function Uo(){const e=m.useRef(null),t=So(e),r=typeof t=="number"?t:t?.width??0,{currentLayouts:a,isEditMode:i,updateLayout:s}=Lt(),o=(c,d)=>{i&&Object.entries(d).forEach(([h,f])=>{if(!f)return;const g=f.map(D=>{const P=a[h]?.find(w=>w.i===D.i);return{...D,widgetType:P?.widgetType||"",widgetId:P?.widgetId||D.i,config:P?.config}});s(h,g)})},l=m.useMemo(()=>a.lg.map(c=>{const d=ra(c.widgetType);if(!d)return ss.warn(`[DashboardGrid] Widget type ${c.widgetType} NOT FOUND in registry`),null;const h=d.component;return n.jsx("div",{className:"dashboard-widget-container",children:n.jsx(h,{widgetId:c.widgetId,widgetType:c.widgetType,isEditMode:i,config:c.config})},c.i)}),[a.lg,i]);return n.jsx("div",{ref:e,className:"dashboard-grid-wrapper",children:r>0&&n.jsx(Ho,{className:"dashboard-grid-layout",width:r,layouts:a,breakpoints:$o,cols:Fo,rowHeight:140,containerPadding:[20,20],margin:[20,20],isDraggable:i,isResizable:i,draggableHandle:".widget-drag-handle",onLayoutChange:o,useCSSTransforms:!0,compactType:"vertical",preventCollision:!1,children:l})})}function Go(){const[e,t]=m.useState(!1),{addWidget:r}=Lt(),a=[{id:"core",label:"Core"},{id:"analytics",label:"Analytics"},{id:"activity",label:"Activity"},{id:"management",label:"Management"}],i=s=>{r(s),t(!1)};return n.jsxs("div",{className:"widget-picker-panel",style:{position:"relative"},children:[n.jsxs("button",{className:"add-widget-btn",onClick:()=>t(!e),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:e?"var(--bg-tertiary)":"var(--accent-primary)",color:e?"var(--text-primary)":"var(--bg-primary)",border:e?"1px solid var(--border-color)":"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s"},children:[e?n.jsx(Qr,{size:16}):n.jsx(xi,{size:16}),e?"Close":"Add Widget"]}),e&&n.jsx("div",{className:"widget-picker-dropdown",style:{position:"absolute",top:"100%",right:0,marginTop:"8px",width:"320px",maxHeight:"400px",overflowY:"auto",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3},children:a.map(s=>{const o=aa(s.id);return o.length===0?null:n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase",padding:"8px",letterSpacing:"0.5px"},children:s.label}),o.map(l=>n.jsxs("button",{onClick:()=>i(l.type),style:{width:"100%",padding:"12px",textAlign:"left",background:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",color:"var(--text-primary)",transition:"background 0.2s"},onMouseEnter:c=>c.currentTarget.style.background="var(--bg-tertiary)",onMouseLeave:c=>c.currentTarget.style.background="transparent",children:[n.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[l.title,l.isNew&&n.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:"var(--accent-primary)",color:"var(--bg-primary)",borderRadius:"4px"},children:"New"})]}),n.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:l.description})]},l.id))]},s.id)})})]})}function Ko({isOpen:e,onClose:t}){const{activeTemplateId:r,setActiveTemplate:a,customTemplates:i}=Lt(),[s,o]=m.useState(r),l=[...ln,...i],c=()=>{s&&a(s),t()};return n.jsx(is,{isOpen:e,onClose:t,title:"Choose Dashboard Template",children:n.jsxs("div",{className:"template-selector",children:[n.jsx("div",{className:"template-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",padding:"16px 0",maxHeight:"60vh",overflowY:"auto"},children:l.map(d=>n.jsxs("div",{className:`template-card ${s===d.id?"selected":""}`,onClick:()=>o(d.id),style:{padding:"16px",border:s===d.id?"2px solid var(--accent-primary)":"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",background:"var(--bg-secondary)",transition:"all 0.2s"},children:[n.jsxs("div",{style:{width:"100%",height:"120px",background:"var(--bg-tertiary)",borderRadius:"6px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",color:"var(--text-muted)",flexDirection:"column",gap:"4px"},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--accent-primary)"},children:d.layouts.lg.length}),n.jsx("div",{children:"widgets"})]}),n.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[d.name,d.isBuiltIn&&n.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",background:"var(--accent-primary)",color:"var(--bg-primary)",borderRadius:"4px"},children:"Built-in"})]}),n.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:d.description})]},d.id))}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:[n.jsx(En,{variant:"secondary",onClick:t,children:"Cancel"}),n.jsx(En,{variant:"primary",onClick:c,children:"Apply Template"})]})]})})}function Xo(e,t,r){const a=ls(e.fieldGaps);return{name:t,requirements:a,progress:[],status:"draft"}}function Yo(e,t,r){if(e.length===0)return null;const a=os(e);return{plan:Xo(a,t),gapAnalysis:a}}function Br({value:e,size:t=160}){const{getScoreColor:r,getScoreLabel:a}=Ln(),i=12,s=(t-i)/2,o=s*2*Math.PI,l=o-e/100*o;return n.jsxs("div",{className:"circular-gauge",style:{width:t,height:t},children:[n.jsxs("svg",{width:t,height:t,children:[n.jsx("circle",{cx:t/2,cy:t/2,r:s,fill:"none",stroke:"var(--bg-tertiary, #1a1a1d)",strokeWidth:i}),n.jsx("circle",{cx:t/2,cy:t/2,r:s,fill:"none",stroke:r(e),strokeWidth:i,strokeLinecap:"round",strokeDasharray:o,strokeDashoffset:l,transform:`rotate(-90 ${t/2} ${t/2})`,style:{transition:"stroke-dashoffset 0.5s ease-out, stroke 0.3s"}})]}),n.jsxs("div",{className:"gauge-content",children:[n.jsx("div",{className:"gauge-value",style:{color:r(e)},children:e}),n.jsx("div",{className:"gauge-label",children:a(e)})]})]})}function Ot({label:e,value:t,icon:r,dimensionKey:a,onClick:i}){const{getScoreColor:s}=Ln(),o=It(a),l=Mt(t);return n.jsx(me,{content:n.jsxs("div",{className:"dimension-tooltip",children:[n.jsxs("div",{className:"dimension-tooltip-header",children:[n.jsx("span",{className:"dimension-tooltip-icon",children:r}),n.jsx("strong",{children:o?.name||e})]}),n.jsx("p",{className:"dimension-tooltip-desc",children:o?.description}),n.jsxs("div",{className:"dimension-tooltip-score",children:[n.jsx("span",{className:"dimension-tooltip-value",children:t}),n.jsx("span",{className:`dimension-tooltip-band dimension-band-${l.name.toLowerCase()}`,children:l.name})]}),o?.factors&&n.jsxs("div",{className:"dimension-tooltip-factors",children:[n.jsx("span",{children:"Key factors:"}),n.jsx("ul",{children:o.factors.map((c,d)=>n.jsx("li",{children:c},d))})]})]}),position:"right",maxWidth:280,children:n.jsxs("div",{className:`dimension-bar ${i?"dimension-bar-clickable":""}`,onClick:i,title:i?`Click to see lowest-scoring asset for ${e}`:void 0,children:[n.jsxs("div",{className:"dimension-header",children:[n.jsx("span",{className:"dimension-icon",children:r}),n.jsx("span",{className:"dimension-name",children:e}),n.jsx("span",{className:"dimension-value",style:{color:s(t)},children:t})]}),n.jsx("div",{className:"dimension-track",children:n.jsx("div",{className:"dimension-fill",style:{width:`${t}%`,backgroundColor:s(t)}})})]})})}function Vo(){const{setAssetsWithScores:e,assetsWithScores:t}=le(),{contextAssets:r,getAssetCount:a}=In(),{openPreview:i}=Wn(),{calculateWeightedScore:s}=Ln(),{snapshots:o}=dn(),l=r.length>0?a():t.length,c=P=>t.length===0?null:t.reduce((w,u)=>u.scores[P]<w.scores[P]?u:w),d=P=>{const w=c(P);w&&i(w.asset)},h=m.useMemo(()=>{if(t.length===0)return null;let P=0,w=0,u=0,p=0,y=0;t.forEach(({scores:j})=>{P+=j.completeness,w+=j.accuracy,u+=j.timeliness,p+=j.consistency,y+=j.usability});const x=t.length;return{completeness:Math.round(P/x),accuracy:Math.round(w/x),timeliness:Math.round(u/x),consistency:Math.round(p/x),usability:Math.round(y/x)}},[t]),f=h?s(h):0,g=m.useMemo(()=>{if(o.length===0||f===0)return null;const P=o[0];if(!P?.overallScores?.overall)return null;const w=P.overallScores.overall;if(w===0)return null;const u=(f-w)/w*100;return Math.round(u*10)/10},[o,f]),D=()=>{r.length>0&&e(r)};return n.jsx(nt,{className:"scorecard-v2",title:"Health Score",children:h?n.jsxs("div",{className:"scorecard-content",children:[n.jsxs("div",{className:"scorecard-gauge-section",children:[n.jsx(me,{content:n.jsxs("div",{className:"gauge-tooltip",children:[n.jsx("strong",{children:"Overall Health Score"}),n.jsx("p",{children:"A weighted average of all quality dimensions. This score indicates the overall metadata health of your selected assets."}),n.jsxs("div",{className:"gauge-tooltip-band",children:["Status: ",n.jsx("span",{className:`gauge-band gauge-band-${Mt(f).name.toLowerCase()}`,children:Mt(f).name})]}),n.jsx("div",{className:"gauge-tooltip-action",children:Mt(f).action})]}),position:"right",maxWidth:280,children:n.jsx("div",{className:"gauge-wrapper",children:n.jsx(Br,{value:f})})}),n.jsx("div",{className:"gauge-meta",children:g!==null?n.jsxs(n.Fragment,{children:[n.jsx(me,{content:"Percent change compared to the most recent snapshot",children:n.jsxs("span",{className:`score-trend ${g>=0?"up":"down"}`,children:[g>=0?"":""," ",Math.abs(g),"%"]})}),n.jsx("span",{className:"trend-label",children:"vs last snapshot"})]}):n.jsx("span",{className:"trend-label",children:"No previous snapshot"})})]}),n.jsxs("div",{className:"scorecard-dimensions",children:[n.jsx(Ot,{label:"Completeness",value:h.completeness,icon:"",dimensionKey:"completeness",onClick:()=>d("completeness")}),n.jsx(Ot,{label:"Accuracy",value:h.accuracy,icon:"",dimensionKey:"accuracy",onClick:()=>d("accuracy")}),n.jsx(Ot,{label:"Timeliness",value:h.timeliness,icon:"",dimensionKey:"timeliness",onClick:()=>d("timeliness")}),n.jsx(Ot,{label:"Consistency",value:h.consistency,icon:"",dimensionKey:"consistency",onClick:()=>d("consistency")}),n.jsx(Ot,{label:"Usability",value:h.usability,icon:"",dimensionKey:"usability",onClick:()=>d("usability")})]}),n.jsxs("div",{className:"scorecard-footer",children:[n.jsxs("span",{className:"asset-count",children:[n.jsx("strong",{children:l})," assets scored"]}),n.jsxs(En,{onClick:D,variant:"ghost",className:"refresh-btn",children:[n.jsx(Jr,{size:14}),"Refresh"]})]})]}):n.jsxs("div",{className:"scorecard-empty",children:[n.jsx("div",{className:"empty-gauge",children:n.jsx(Br,{value:0,size:120})}),n.jsx("p",{className:"empty-message",children:"Set asset context to view health scores"}),n.jsx("p",{className:"empty-hint",children:"Use the Browse button or drop assets into the context bar"})]})})}const te=m.memo(function({title:t,widgetId:r,widgetType:a,isEditMode:i,onRemove:s,onSettings:o,children:l,dragHandleClassName:c="widget-drag-handle"}){const[d,h]=m.useState(!1),{currentLayouts:f,updateLayout:g}=Lt(),{isPinned:D,pinWidget:P,unpinWidget:w}=As(),u=a?D(a):!1,p=()=>{a&&(u?w(a):P(a))},y=m.useMemo(()=>d?aa().reduce((C,b)=>(C[b.category]||(C[b.category]=[]),C[b.category].push(b),C),{}):{},[d]),x=j=>{const C={lg:f.lg.map(b=>b.widgetId===r?{...b,widgetType:j}:b),md:f.md.map(b=>b.widgetId===r?{...b,widgetType:j}:b),sm:f.sm.map(b=>b.widgetId===r?{...b,widgetType:j}:b)};g("lg",C.lg),g("md",C.md),g("sm",C.sm),h(!1)};return n.jsx(nt,{className:"dashboard-widget",title:n.jsxs("div",{className:"widget-header",style:{display:"flex",alignItems:"center",gap:"8px"},children:[i&&n.jsx("div",{className:c,style:{cursor:"grab",display:"flex"},children:n.jsx(ji,{size:16})}),n.jsx("span",{children:t})]}),actions:n.jsxs("div",{className:"widget-actions",style:{display:"flex",gap:"4px",position:"relative"},children:[a&&n.jsx("button",{onClick:p,className:"widget-action-btn",title:u?"Unpin from Home":"Pin to Home",style:{background:u?"var(--bg-selected)":"transparent",border:"none",color:u?"var(--button-primary-bg)":"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex"},children:u?n.jsx(ki,{size:14}):n.jsx(Ds,{size:14})}),i&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>h(!d),className:"widget-action-btn",title:"Change widget type",style:{background:d?"var(--bg-hover)":"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex"},children:n.jsx(Jr,{size:14})}),d&&n.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",background:"var(--bg-card)",border:"1px solid var(--border-subtle)",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",zIndex:1e3,minWidth:"220px",maxHeight:"300px",overflowY:"auto"},children:Object.entries(y).map(([j,C])=>n.jsxs("div",{children:[n.jsx("div",{style:{padding:"8px 12px",fontSize:"10px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",color:"var(--text-muted)",borderBottom:"1px solid var(--border-subtle)",background:"var(--bg-secondary)"},children:j}),C.map(b=>n.jsxs("button",{onClick:()=>x(b.type),style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 12px",background:b.type===a?"var(--bg-hover)":"transparent",border:"none",color:b.type===a?"var(--accent-primary)":"var(--text-primary)",fontSize:"12px",textAlign:"left",cursor:"pointer"},children:[n.jsx("span",{style:{flex:1},children:b.title}),b.isNew&&n.jsx("span",{style:{fontSize:"9px",padding:"2px 4px",background:"var(--accent-primary)",color:"var(--bg-primary)",borderRadius:"3px",fontWeight:600},children:"NEW"})]},b.type))]},j))}),o&&n.jsx("button",{onClick:o,className:"widget-action-btn",style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex"},children:n.jsx(cs,{size:14})}),s&&n.jsx("button",{onClick:s,className:"widget-action-btn",style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex"},children:n.jsx(Qr,{size:14})})]})]}),children:l})});function Qo({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Health Score",widgetId:e,widgetType:t||"scorecard",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(Vo,{})})}const Jo={"With Descriptions":{title:"Assets with Descriptions",description:"Assets that have a human-readable description explaining what the data contains and how it should be used.",impact:"Descriptions are critical for discoverability. Without them, users cannot understand what data assets contain."},"With Owners":{title:"Assets with Owners",description:"Assets that have an assigned owner (individual or team) who is accountable for the data quality and metadata.",impact:"Ownership is essential for accountability. Unowned assets have no one responsible for their quality."},"Stale Assets":{title:"Stale Assets",description:"Assets whose metadata has not been updated recently and may be outdated or no longer accurate.",impact:"Stale metadata can mislead users and erode trust in the data catalog. Regular reviews are recommended."},Certified:{title:"Certified Assets",description:"Assets that have been reviewed and approved for use. Certified assets are trusted for business decisions.",impact:"Certification signals quality and reliability. Aim to certify your most important data products."}};function Zo(){const{stats:e,assetsWithScores:t}=le(),{getAssetCount:r}=In(),a=t.length||r(),i=m.useMemo(()=>{const s=a>0?Math.round(e.assetsWithDescriptions/a*100):0,o=a>0?Math.round(e.assetsWithOwners/a*100):0,l=a>0?Math.round(e.staleAssets/a*100):0,c=a>0?Math.round(e.certifiedAssets/a*100):0;return[{icon:ds,iconClass:"green",value:e.assetsWithDescriptions,label:"With Descriptions",percent:s,trend:s,color:"var(--accent-primary, #00d4aa)"},{icon:us,iconClass:"blue",value:e.assetsWithOwners,label:"With Owners",percent:o,trend:o,color:"var(--accent-info, #3b82f6)"},{icon:_n,iconClass:"yellow",value:e.staleAssets,label:"Stale Assets",percent:l,trend:-l,color:"var(--accent-warning, #f59e0b)",inverted:!0},{icon:ps,iconClass:"green",value:e.certifiedAssets,label:"Certified",percent:c,trend:c,color:"var(--score-excellent, #22c55e)"}]},[e,a]);return n.jsx("div",{className:"stats-row",children:i.map((s,o)=>{const l=s.icon,c=Jo[s.label];return n.jsx(me,{content:n.jsxs("div",{className:"stat-tooltip",children:[n.jsxs("div",{className:"stat-tooltip-header",children:[n.jsx("div",{className:`stat-tooltip-icon ${s.iconClass}`,children:n.jsx(l,{size:16})}),n.jsx("strong",{children:c?.title||s.label})]}),n.jsx("p",{className:"stat-tooltip-desc",children:c?.description}),n.jsxs("div",{className:"stat-tooltip-stats",children:[n.jsxs("div",{className:"stat-tooltip-stat",children:[n.jsx("span",{className:"stat-tooltip-value",children:s.value}),n.jsx("span",{className:"stat-tooltip-label",children:"Assets"})]}),n.jsxs("div",{className:"stat-tooltip-stat",children:[n.jsxs("span",{className:"stat-tooltip-value",children:[s.percent,"%"]}),n.jsx("span",{className:"stat-tooltip-label",children:"of Total"})]})]}),n.jsxs("div",{className:"stat-tooltip-impact",children:[n.jsx("strong",{children:"Why it matters:"})," ",c?.impact]})]}),position:"bottom",maxWidth:300,children:n.jsxs("div",{className:"stat-card",children:[n.jsxs("div",{className:"stat-header",children:[n.jsx("div",{className:`stat-icon ${s.iconClass}`,children:n.jsx(l,{size:18})}),n.jsxs("span",{className:`stat-trend ${s.trend>=0?"up":"down"}`,children:[s.trend>=0?"":""," ",Math.abs(s.trend),"%"]})]}),n.jsx("div",{className:"stat-value",children:s.value}),n.jsx("div",{className:"stat-label",children:s.label}),n.jsxs("div",{className:"stat-progress",children:[n.jsx("div",{className:"stat-progress-track",children:n.jsx("div",{className:"stat-progress-fill",style:{width:`${s.percent}%`,backgroundColor:s.color}})}),n.jsxs("span",{className:"stat-progress-label",children:[s.percent,"% of total"]})]})]})},o)})})}function el({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Key Metrics",widgetId:e,widgetType:t||"stats-row",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(Zo,{})})}function tl(){const{byDomain:e,byOwner:t,bySchema:r,byConnection:a,byTag:i,byCertification:s,byClassification:o,byAssetType:l}=le(),{dashboardHeatmapDimension:c,setDashboardHeatmapDimension:d}=Zr(),{openPreview:h}=Wn(),[f,g]=m.useState(c);m.useEffect(()=>{g(c)},[c]);const D=()=>{switch(f){case"owner":return t;case"schema":return r;case"connection":return a;case"tag":return i;case"certification":return s;case"classification":return o;case"assetType":return l;default:return e}},P=x=>{if(x.length===0)return{completeness:0,accuracy:0,timeliness:0,consistency:0,usability:0,overall:0};const j=x.reduce((b,{scores:v})=>({completeness:b.completeness+v.completeness,accuracy:b.accuracy+v.accuracy,timeliness:b.timeliness+v.timeliness,consistency:b.consistency+v.consistency,usability:b.usability+v.usability}),{completeness:0,accuracy:0,timeliness:0,consistency:0,usability:0}),C=x.length;return{completeness:Math.round(j.completeness/C),accuracy:Math.round(j.accuracy/C),timeliness:Math.round(j.timeliness/C),consistency:Math.round(j.consistency/C),usability:Math.round(j.usability/C),overall:Math.round((j.completeness+j.accuracy+j.timeliness+j.consistency+j.usability)/(C*5))}},w=D(),u=Array.from(w.entries()).map(([x,j])=>({key:x,assets:j,scores:P(j)})).sort((x,j)=>j.scores.overall-x.scores.overall),p=x=>{x.length>0&&h(x[0].asset)},y=()=>{switch(f){case"owner":return"Owner";case"schema":return"Schema";case"connection":return"Connection";case"tag":return"Tag";case"certification":return"Certification Status";case"classification":return"Classification";case"assetType":return"Asset Type";default:return"Domain"}};return n.jsxs(nt,{className:"heatmap-card",title:`Quality by ${y()}  Dimension`,children:[n.jsxs("div",{className:"heatmap-controls",style:{marginBottom:"12px",display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"Pivot by:"}),n.jsxs("select",{value:f,onChange:x=>{const j=x.target.value;g(j),d(j)},style:{padding:"4px 8px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontSize:"12px"},children:[n.jsx("option",{value:"domain",children:"Domain"}),n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"schema",children:"Schema"}),n.jsx("option",{value:"connection",children:"Connection"}),n.jsx("option",{value:"tag",children:"Tag"}),n.jsx("option",{value:"certification",children:"Certification Status"}),n.jsx("option",{value:"classification",children:"Classification"}),n.jsx("option",{value:"assetType",children:"Asset Type"})]})]}),n.jsx("div",{className:"heatmap-container",children:n.jsxs("table",{className:"heatmap",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx(me,{content:n.jsxs("div",{className:"heatmap-dimension-tooltip",children:[n.jsx("strong",{children:an(f)?.name||y()}),n.jsx("p",{children:an(f)?.description||"Pivot dimension"})]}),position:"bottom",maxWidth:250,children:n.jsx("span",{className:"heatmap-header-label",children:y()})})}),["completeness","accuracy","timeliness","consistency","usability","overall"].map(x=>{const j=It(x);return n.jsx("th",{children:n.jsx(me,{content:n.jsxs("div",{className:"heatmap-quality-tooltip",children:[n.jsx("strong",{children:j?.name}),n.jsx("p",{children:j?.description}),j?.factors&&x!=="overall"&&n.jsxs("div",{className:"heatmap-quality-factors",children:[n.jsx("span",{children:"Key factors:"}),n.jsx("ul",{children:j.factors.map((C,b)=>n.jsx("li",{children:C},b))})]})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"heatmap-header-label",children:j?.name})})},x)})]})}),n.jsx("tbody",{children:u.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No assets selected. Select assets and calculate scores to see quality breakdown."})}):u.map(x=>n.jsxs("tr",{className:"heatmap-row-clickable",children:[n.jsxs("td",{className:"heatmap-row-label",onClick:()=>p(x.assets),title:`Click to preview assets in ${x.key}`,children:[n.jsx("span",{className:"heatmap-row-name",children:x.key}),n.jsxs("span",{className:"heatmap-row-count",children:[n.jsx(ea,{size:12}),x.assets.length]})]}),["completeness","accuracy","timeliness","consistency","usability"].map(j=>{const C=x.scores[j],b=Mt(C),v=It(j);return n.jsx("td",{children:n.jsx(me,{content:n.jsxs("div",{className:"heatmap-cell-tooltip",children:[n.jsxs("div",{className:"heatmap-cell-tooltip-header",children:[n.jsx("span",{children:x.key}),n.jsx("span",{children:""}),n.jsx("span",{children:v?.name})]}),n.jsxs("div",{className:"heatmap-cell-tooltip-score",children:[n.jsx("span",{className:"score-value",children:C}),n.jsx("span",{className:`score-band score-band-${sr(C)}`,children:b.name})]}),n.jsx("p",{className:"heatmap-cell-tooltip-desc",children:b.description}),n.jsx("div",{className:"heatmap-cell-tooltip-action",children:b.action})]}),position:"top",maxWidth:280,children:n.jsx("span",{className:`heatmap-cell ${sr(C)}`,children:C})})},j)}),n.jsx("td",{className:"heatmap-row-avg",children:n.jsx(me,{content:n.jsxs("div",{className:"heatmap-overall-tooltip",children:[n.jsxs("strong",{children:[x.key," - Overall Score"]}),n.jsx("p",{children:"Weighted average of all quality dimensions for assets in this group."}),n.jsxs("div",{className:"heatmap-overall-breakdown",children:[n.jsxs("div",{children:["Completeness: ",x.scores.completeness]}),n.jsxs("div",{children:["Accuracy: ",x.scores.accuracy]}),n.jsxs("div",{children:["Timeliness: ",x.scores.timeliness]}),n.jsxs("div",{children:["Consistency: ",x.scores.consistency]}),n.jsxs("div",{children:["Usability: ",x.scores.usability]})]})]}),position:"left",maxWidth:250,children:n.jsx("span",{className:"heatmap-overall-score",children:x.scores.overall})})})]},x.key))})]})}),n.jsxs("div",{className:"heatmap-legend",children:[n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-color",style:{background:"var(--score-excellent)"}}),"Excellent (80+)"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-color",style:{background:"var(--score-good)"}}),"Good (60-79)"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-color",style:{background:"var(--score-fair)"}}),"Fair (40-59)"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-color",style:{background:"var(--score-poor)"}}),"Poor (20-39)"]}),n.jsxs("div",{className:"legend-item",children:[n.jsx("div",{className:"legend-color",style:{background:"var(--score-critical)"}}),"Critical (<20)"]})]})]})}function nl({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Quality Heatmap",widgetId:e,widgetType:t||"heatmap",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(tl,{})})}function rl(){const{byOwner:e,byTag:t,byCertification:r,byClassification:a,byAssetType:i,bySchema:s,byConnection:o}=le(),{dashboardOwnerPivotDimension:l,dashboardOwnerPivotColumn:c,setDashboardOwnerPivotDimension:d,setDashboardOwnerPivotColumn:h}=Zr(),{openPreview:f}=Wn(),[g,D]=m.useState(l==="owner"?"owner":l),[P,w]=m.useState(c);m.useEffect(()=>{D(l==="ownerGroup"?"owner":l)},[l]),m.useEffect(()=>{w(c)},[c]);const p=Array.from((()=>{switch(g){case"tag":return t;case"certification":return r;case"classification":return a;case"assetType":return i;case"schema":return s;case"connection":return o;default:return e}})().entries()).map(([C,b])=>{let v=0,S=0,N=0,T=0,R=0;b.forEach(({scores:A})=>{const k=A[P];k<25?v++:k<50?S++:k<75?N++:T++,R+=k});const E=b.length>0?Math.round(R/b.length):0;return{name:C,assets:b,critical:v,poor:S,fair:N,good:T,total:b.length,avgScore:E}}).sort((C,b)=>C.name.startsWith("No ")||C.name==="Unowned"||C.name==="Not Certified"?1:b.name.startsWith("No ")||b.name==="Unowned"||b.name==="Not Certified"?-1:b.total-C.total),y=C=>{C.length>0&&f(C[0].asset)},x=()=>{switch(g){case"tag":return"Tag";case"certification":return"Certification";case"classification":return"Classification";case"assetType":return"Asset Type";case"schema":return"Schema";case"connection":return"Connection";default:return"Owner Group"}},j=()=>{switch(P){case"accuracy":return"Accuracy";case"timeliness":return"Timeliness";case"consistency":return"Consistency";case"usability":return"Usability";default:return"Completeness"}};return n.jsxs(nt,{className:"pivot-card",title:`Assets by ${x()}  ${j()} Score`,children:[n.jsxs("div",{className:"pivot-controls",children:[n.jsxs("div",{className:"pivot-shelf",children:[n.jsx("div",{className:"pivot-shelf-label",children:"Rows"}),n.jsx("div",{className:"pivot-shelf-items",children:n.jsxs("select",{value:g,onChange:C=>{const b=C.target.value;D(b),d(b==="owner"?"ownerGroup":b)},className:"pivot-select",style:{padding:"4px 8px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontSize:"12px"},children:[n.jsx("option",{value:"owner",children:"Owner Group"}),n.jsx("option",{value:"tag",children:"Tag"}),n.jsx("option",{value:"certification",children:"Certification Status"}),n.jsx("option",{value:"classification",children:"Classification"}),n.jsx("option",{value:"assetType",children:"Asset Type"}),n.jsx("option",{value:"schema",children:"Schema"}),n.jsx("option",{value:"connection",children:"Connection"})]})})]}),n.jsxs("div",{className:"pivot-shelf",children:[n.jsx("div",{className:"pivot-shelf-label",children:"Columns"}),n.jsx("div",{className:"pivot-shelf-items",children:n.jsxs("select",{value:P,onChange:C=>{const b=C.target.value;w(b),h(b)},className:"pivot-select",style:{padding:"4px 8px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"4px",color:"var(--text-primary)",fontSize:"12px"},children:[n.jsx("option",{value:"completeness",children:"Completeness Band"}),n.jsx("option",{value:"accuracy",children:"Accuracy Band"}),n.jsx("option",{value:"timeliness",children:"Timeliness Band"}),n.jsx("option",{value:"consistency",children:"Consistency Band"}),n.jsx("option",{value:"usability",children:"Usability Band"})]})})]}),n.jsxs("div",{className:"pivot-shelf",children:[n.jsx("div",{className:"pivot-shelf-label",children:"Measures"}),n.jsxs("div",{className:"pivot-shelf-items",children:[n.jsx(me,{content:"Count of assets in each score band for this group",position:"top",children:n.jsx("span",{className:"pivot-chip",children:"Asset Count"})}),n.jsx(me,{content:"Average score across all assets in this group",position:"top",children:n.jsx("span",{className:"pivot-chip",children:"Avg Score"})})]})]})]}),n.jsx("div",{className:"card-body",style:{padding:0},children:n.jsx("div",{className:"pivot-table-container",children:n.jsxs("table",{className:"pivot-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx(me,{content:n.jsxs("div",{className:"pivot-dimension-tooltip",children:[n.jsx("strong",{children:an(g)?.name||x()}),n.jsx("p",{children:an(g)?.description||"Group dimension for rows"})]}),position:"bottom",maxWidth:250,children:n.jsx("span",{className:"pivot-header-label",children:x()})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:n.jsxs("div",{className:"score-band-tooltip",children:[n.jsxs("strong",{children:[ye("critical")?.name," (",ye("critical")?.range,")"]}),n.jsx("p",{children:ye("critical")?.description}),n.jsx("div",{className:"score-band-action",children:ye("critical")?.action})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"pivot-header-label score-critical",children:"Critical (0-24)"})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:n.jsxs("div",{className:"score-band-tooltip",children:[n.jsxs("strong",{children:[ye("poor")?.name," (",ye("poor")?.range,")"]}),n.jsx("p",{children:ye("poor")?.description}),n.jsx("div",{className:"score-band-action",children:ye("poor")?.action})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"pivot-header-label score-poor",children:"Poor (25-49)"})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:n.jsxs("div",{className:"score-band-tooltip",children:[n.jsxs("strong",{children:[ye("fair")?.name," (",ye("fair")?.range,")"]}),n.jsx("p",{children:ye("fair")?.description}),n.jsx("div",{className:"score-band-action",children:ye("fair")?.action})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"pivot-header-label score-fair",children:"Fair (50-74)"})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:n.jsxs("div",{className:"score-band-tooltip",children:[n.jsxs("strong",{children:[ye("good")?.name," (",ye("good")?.range,")"]}),n.jsx("p",{children:ye("good")?.description}),n.jsx("div",{className:"score-band-action",children:ye("good")?.action})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"pivot-header-label score-good",children:"Good (75-100)"})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:"Total number of assets in this group",position:"bottom",children:n.jsx("span",{className:"pivot-header-label",children:"Total Assets"})})}),n.jsx("th",{className:"measure",children:n.jsx(me,{content:n.jsxs("div",{className:"quality-dimension-tooltip",children:[n.jsxs("strong",{children:["Average ",It(P)?.name," Score"]}),n.jsx("p",{children:It(P)?.description})]}),position:"bottom",maxWidth:280,children:n.jsx("span",{className:"pivot-header-label",children:"Avg Score"})})})]})}),n.jsx("tbody",{children:p.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"20px",color:"var(--text-muted)"},children:"No assets selected. Select assets and calculate scores to see owner accountability."})}):p.map((C,b)=>n.jsxs("tr",{className:"pivot-row-clickable",children:[n.jsxs("td",{className:`dimension-cell dimension-cell-clickable ${C.name==="Unowned"||C.name.startsWith("No ")||C.name==="Not Certified"?"unowned":""}`,onClick:()=>y(C.assets),title:`Click to preview assets in ${C.name}`,children:[n.jsx("span",{className:"dimension-cell-name",children:C.name==="Unowned"?" Unowned":C.name.startsWith("No ")?` ${C.name}`:C.name==="Not Certified"?" Not Certified":C.name}),n.jsxs("span",{className:"dimension-cell-count",children:[n.jsx(ea,{size:12}),C.total]})]}),n.jsx("td",{className:`measure ${C.name==="Unowned"||C.name.startsWith("No ")||C.name==="Not Certified"?"unowned":""}`,children:C.critical}),n.jsx("td",{className:"measure",children:C.poor}),n.jsx("td",{className:"measure",children:C.fair}),n.jsx("td",{className:"measure",children:C.good}),n.jsx("td",{className:`measure ${C.name==="Unowned"||C.name.startsWith("No ")||C.name==="Not Certified"?"unowned":""}`,children:n.jsx("strong",{children:C.total})}),n.jsx("td",{className:"measure",children:n.jsx(vt,{score:C.avgScore})})]},b))})]})})})]})}function al({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Owner Pivot Analysis",widgetId:e,widgetType:t||"owner-pivot",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(rl,{})})}const sl=[{id:"1",name:"Q4 Description Blitz",type:"Resolution",status:"active",progress:68,totalTasks:503,completedTasks:342,dueDate:"2024-12-31",stewardCount:3},{id:"2",name:"Owner Assignment Sprint",type:"Resolution",status:"at-risk",progress:34,totalTasks:264,completedTasks:89,dueDate:"2025-01-15",stewardCount:5},{id:"3",name:"PII Classification Review",type:"Certification",status:"active",progress:82,totalTasks:190,completedTasks:156,dueDate:"2025-01-05",stewardCount:2}],il=[{id:"1",title:"Add description to customer_transactions",asset:"snowflake/prod/customer_transactions",priority:"critical",assignee:"JD",dueDate:"2024-12-20",overdue:!0},{id:"2",title:"Assign owner to marketing_campaigns",asset:"bigquery/analytics/marketing_campaigns",priority:"high",assignee:"AS",dueDate:new Date().toISOString().split("T")[0],overdue:!1},{id:"3",title:"Review PII classification for user_profiles",asset:"redshift/warehouse/user_profiles",priority:"medium",assignee:"MK",dueDate:new Date(Date.now()+4320*60*1e3).toISOString().split("T")[0],overdue:!1},{id:"4",title:"Certify dim_products after review",asset:"snowflake/analytics/dim_products",priority:"medium",assignee:"RJ",dueDate:new Date(Date.now()+7200*60*1e3).toISOString().split("T")[0],overdue:!1},{id:"5",title:"Update stale metadata on legacy_orders",asset:"postgres/legacy/orders",priority:"low",assignee:"TL",dueDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],overdue:!1}],ol=[{id:"1",name:"Jane Doe",initials:"JD",assetCount:342,avgScore:76,tasksDone:48,tasksTotal:52,trend:8},{id:"2",name:"Alex Smith",initials:"AS",assetCount:289,avgScore:71,tasksDone:35,tasksTotal:41,trend:5},{id:"3",name:"Maria Kim",initials:"MK",assetCount:198,avgScore:62,tasksDone:22,tasksTotal:38,trend:0},{id:"4",name:"Raj Patel",initials:"RJ",assetCount:156,avgScore:58,tasksDone:18,tasksTotal:29,trend:-3}],ll=[{date:"2024-10-01",score:50},{date:"2024-10-15",score:52},{date:"2024-11-01",score:55},{date:"2024-11-15",score:58},{date:"2024-12-01",score:62},{date:"2024-12-15",score:65},{date:new Date().toISOString().split("T")[0],score:67}];function cl(){const e=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"});return n.jsx(nt,{className:"campaign-card",title:"Active Campaigns",children:n.jsx("div",{className:"campaign-list",children:sl.map(t=>n.jsxs("div",{className:"campaign-item",children:[n.jsxs("div",{className:"campaign-header",children:[n.jsxs("div",{children:[n.jsx("div",{className:"campaign-name",children:t.name}),n.jsxs("div",{className:"campaign-type",children:[t.type,"  ",t.stewardCount," stewards"]})]}),n.jsx("span",{className:`campaign-status ${t.status==="active"?"active":"at-risk"}`,children:t.status==="active"?"On Track":"At Risk"})]}),n.jsx("div",{className:"campaign-progress-bar",children:n.jsx("div",{className:"campaign-progress-fill",style:{width:`${t.progress}%`}})}),n.jsxs("div",{className:"campaign-stats",children:[n.jsxs("span",{className:"campaign-stat",children:[n.jsx("span",{children:t.completedTasks})," / ",t.totalTasks," tasks"]}),n.jsxs("span",{className:"campaign-stat",children:["Due ",n.jsx("span",{children:e(t.dueDate)})]})]})]},t.id))})})}function dl({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Active Campaigns",widgetId:e,widgetType:t||"campaigns",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(cl,{})})}function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qr(Object(r),!0).forEach(function(a){ul(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ul(e,t,r){return(t=pl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pl(e){var t=hl(e,"string");return typeof t=="symbol"?t:t+""}function hl(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fl=(e,t)=>t,rr=rt([ks,fl],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),ml=[],ar=(e,t,r)=>r?.length===0?ml:r,Ga=rt([Ts,rr,ar],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=a,(!i||!i.length)&&r!=null&&(i=r.map(s=>$r($r({},t.presentationProps),s.props))),i!=null)return i}}),gl=rt([Ga,rr,ar],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,i)=>{var s,o=Je(a,t.nameKey,t.name),l;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[i].props.fill:typeof a=="object"&&a!=null&&"fill"in a?l=a.fill:l=t.fill,{value:un(o,t.dataKey),color:l,payload:a,type:t.legendType}})}),yl=rt([Ga,rr,ar,Rs],(e,t,r,a)=>{if(!(t==null||e==null))return Ll({offset:a,pieSettings:t,displayedData:e,cells:r})}),xl=["key"],vl=["onMouseEnter","onClick","onMouseLeave"],bl=["id"],wl=["id"];function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fr(Object(r),!0).forEach(function(a){jl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jl(e,t,r){return(t=Sl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e){var t=Cl(e,"string");return typeof t=="symbol"?t:t+""}function Cl(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tt.apply(null,arguments)}function wn(e,t){if(e==null)return{};var r,a,i=Dl(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Dl(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Pl(e){var t=m.useMemo(()=>ia(e.children,Fn),[e.children]),r=xt(a=>gl(a,e.id,t));return r==null?null:m.createElement(Os,{legendPayload:r})}var Nl=m.memo(e=>{var{dataKey:t,nameKey:r,sectors:a,stroke:i,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:d,id:h}=e,f={dataDefinedOnItem:a.map(g=>g.tooltipPayload),positions:a.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:t,nameKey:r,name:un(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:h}};return m.createElement(oa,{tooltipEntrySettings:f})}),Al=(e,t)=>e>t?"start":e<t?"end":"middle",Rl=(e,t,r)=>typeof t=="function"?zt(t(e),r,r*.8):zt(t,r,r*.8),Tl=(e,t,r)=>{var{top:a,left:i,width:s,height:o}=t,l=$s(s,o),c=i+zt(e.cx,s,s/2),d=a+zt(e.cy,o,o/2),h=zt(e.innerRadius,l,0),f=Rl(r,e.outerRadius,l),g=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:d,innerRadius:h,outerRadius:f,maxRadius:g}},kl=(e,t)=>{var r=tn(t-e),a=Math.min(Math.abs(t-e),360);return r*a};function El(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Ol=(e,t)=>{if(m.isValidElement(e))return m.cloneElement(e,t);if(typeof e=="function")return e(t);var r=wt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:a}=t,i=wn(t,xl);return m.createElement(nn,tt({},i,{type:"linear",className:r}))},zl=(e,t,r)=>{if(m.isValidElement(e))return m.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),m.isValidElement(a)))return a;var i=wt("recharts-pie-label-text",El(e));return m.createElement(Fs,tt({},t,{alignmentBaseline:"middle",className:i}),a)};function Ml(e){var{sectors:t,props:r,showLabels:a}=e,{label:i,labelLine:s,dataKey:o}=r;if(!a||!i||!t)return null;var l=hn(r),c=lr(i),d=lr(s),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=t.map((g,D)=>{var P=(g.startAngle+g.endAngle)/2,w=On(g.cx,g.cy,g.outerRadius+h,P),u=Z(Z(Z(Z({},l),g),{},{stroke:"none"},c),{},{index:D,textAnchor:Al(w.x,g.cx)},w),p=Z(Z(Z(Z({},l),g),{},{fill:"none",stroke:g.fill},d),{},{index:D,points:[On(g.cx,g.cy,g.outerRadius,P),w],key:"line"});return m.createElement(Bn,{zIndex:Hn.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(D)},m.createElement(We,null,s&&Ol(s,p),zl(i,u,Je(g,o))))});return m.createElement(We,{className:"recharts-pie-labels"},f)}function Il(e){var{sectors:t,props:r,showLabels:a}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?m.createElement(da,{label:i}):m.createElement(Ml,{sectors:t,props:r,showLabels:a})}function Wl(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:i,shape:s,id:o}=e,l=xt(Is),c=xt(Ws),d=xt(Ls),{onMouseEnter:h,onClick:f,onMouseLeave:g}=i,D=wn(i,vl),P=vi(h,i.dataKey,o),w=bi(g),u=wi(f,i.dataKey,o);return t==null||t.length===0?null:m.createElement(m.Fragment,null,t.map((p,y)=>{if(p?.startAngle===0&&p?.endAngle===0&&t.length!==1)return null;var x=d==null||d===o,j=String(y)===l&&(c==null||i.dataKey===c)&&x,C=l?a:null,b=r&&j?r:C,v=Z(Z({},p),{},{stroke:p.stroke,tabIndex:-1,[Hs]:y,[_s]:o});return m.createElement(We,tt({key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Bs(D,p,y),{onMouseEnter:P(p,y),onMouseLeave:w(p,y),onClick:u(p,y)}),m.createElement(qs,tt({option:s??b,index:y,shapeType:"sector",isActive:j},v)))}))}function Ll(e){var t,{pieSettings:r,displayedData:a,cells:i,offset:s}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:h,tooltipType:f}=r,g=Math.abs(r.minAngle),D=kl(l,c),P=Math.abs(D),w=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,u=a.filter(b=>Je(b,d,0)!==0).length,p=(P>=360?u:u-1)*w,y=P-u*g-p,x=a.reduce((b,v)=>{var S=Je(v,d,0);return b+(Ze(S)?S:0)},0),j;if(x>0){var C;j=a.map((b,v)=>{var S=Je(b,d,0),N=Je(b,h,v),T=Tl(r,s,b),R=(Ze(S)?S:0)/x,E,A=Z(Z({},b),i&&i[v]&&i[v].props);v?E=C.endAngle+tn(D)*w*(S!==0?1:0):E=l;var k=E+tn(D)*((S!==0?g:0)+R*y),M=(E+k)/2,W=(T.innerRadius+T.outerRadius)/2,$=[{name:N,value:S,payload:A,dataKey:d,type:f,graphicalItemId:r.id}],ne=On(T.cx,T.cy,W,M);return C=Z(Z(Z(Z({},r.presentationProps),{},{percent:R,cornerRadius:typeof o=="string"?parseFloat(o):o,name:N,tooltipPayload:$,midAngle:M,middleRadius:W,tooltipPosition:ne},A),T),{},{value:S,dataKey:d,startAngle:E,endAngle:k,payload:A,paddingAngle:tn(D)*w}),C})}return j}function _l(e){var{showLabels:t,sectors:r,children:a}=e,i=m.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return m.createElement(Ms,{value:t?i:void 0},a)}function Hl(e){var{props:t,previousSectorsRef:r,id:a}=e,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:h,onAnimationStart:f,onAnimationEnd:g}=t,D=la(t,"recharts-pie-"),P=r.current,[w,u]=m.useState(!1),p=m.useCallback(()=>{typeof g=="function"&&g(),u(!1)},[g]),y=m.useCallback(()=>{typeof f=="function"&&f(),u(!0)},[f]);return m.createElement(_l,{showLabels:!w,sectors:i},m.createElement(ca,{animationId:D,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:p,key:D},x=>{var j=[],C=i&&i[0],b=C?.startAngle;return i?.forEach((v,S)=>{var N=P&&P[S],T=S>0?zs(v,"paddingAngle",0):0;if(N){var R=Qe(N.endAngle-N.startAngle,v.endAngle-v.startAngle,x),E=Z(Z({},v),{},{startAngle:b+T,endAngle:b+R+T});j.push(E),b=E.endAngle}else{var{endAngle:A,startAngle:k}=v,M=Qe(0,A-k,x),W=Z(Z({},v),{},{startAngle:b+T,endAngle:b+M+T});j.push(W),b=W.endAngle}}),r.current=j,m.createElement(We,null,m.createElement(Wl,{sectors:j,activeShape:d,inactiveShape:h,allOtherPieProps:t,shape:t.shape,id:a}))}),m.createElement(Il,{showLabels:!w,sectors:i,props:t}),t.children)}var Bl={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Hn.area};function ql(e){var{id:t}=e,r=wn(e,bl),{hide:a,className:i,rootTabIndex:s}=e,o=m.useMemo(()=>ia(e.children,Fn),[e.children]),l=xt(h=>yl(h,t,o)),c=m.useRef(null),d=wt("recharts-pie",i);return a||l==null?(c.current=null,m.createElement(We,{tabIndex:s,className:d})):m.createElement(Bn,{zIndex:e.zIndex},m.createElement(Nl,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),m.createElement(We,{tabIndex:s,className:d},m.createElement(Hl,{props:Z(Z({},r),{},{sectors:l}),previousSectorsRef:c,id:t})))}function Ka(e){var t=pn(e,Bl),{id:r}=t,a=wn(t,wl),i=hn(a);return m.createElement(sa,{id:r,type:"pie"},s=>m.createElement(m.Fragment,null,m.createElement(Es,{type:"pie",id:s,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),m.createElement(Pl,tt({},a,{id:s})),m.createElement(ql,tt({},a,{id:s}))))}Ka.displayName="Pie";var Xa=(e,t,r)=>ua(e,"xAxis",Un(e,t),r),Ya=(e,t,r)=>pa(e,"xAxis",Un(e,t),r),Va=(e,t,r)=>ua(e,"yAxis",Gn(e,t),r),Qa=(e,t,r)=>pa(e,"yAxis",Gn(e,t),r),$l=rt([qn,Xa,Va,Ya,Qa],(e,t,r,a,i)=>ha(e,"xAxis")?cr(t,a,!1):cr(r,i,!1)),Fl=(e,t)=>t,Ja=rt([Ys,Fl],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),Za=e=>{var t=qn(e),r=ha(t,"xAxis");return r?"yAxis":"xAxis"},Ul=(e,t)=>{var r=Za(e);return r==="yAxis"?Gn(e,t):Un(e,t)},Gl=(e,t,r)=>Ks(e,Za(e),Ul(e,t),r),Kl=rt([Ja,Gl],(e,t)=>{var r;if(!(e==null||t==null)){var{stackId:a}=e,i=Xs(e);if(!(a==null||i==null)){var s=(r=t[a])===null||r===void 0?void 0:r.stackedData,o=s?.find(l=>l.key===i);if(o!=null)return o.map(l=>[l[0],l[1]])}}}),Xl=rt([qn,Xa,Va,Ya,Qa,Kl,Us,$l,Ja,Gs],(e,t,r,a,i,s,o,l,c,d)=>{var{chartData:h,dataStartIndex:f,dataEndIndex:g}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||a==null||i==null||a.length===0||i.length===0||l==null)){var{data:D}=c,P;if(D&&D.length>0?P=D:P=h?.slice(f,g+1),P!=null)return hc({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:i,dataStartIndex:f,areaSettings:c,stackedData:s,displayedData:P,chartBaseValue:d,bandSize:l})}}),Yl=["id"],Vl=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ct.apply(null,arguments)}function es(e,t){if(e==null)return{};var r,a,i=Ql(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ql(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ur(Object(r),!0).forEach(function(a){Jl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Jl(e,t,r){return(t=Zl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zl(e){var t=ec(e,"string");return typeof t=="symbol"?t:t+""}function ec(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cn(e,t){return e&&e!=="none"?e:t}var tc=e=>{var{dataKey:t,name:r,stroke:a,fill:i,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:cn(a,i),value:un(r,t),payload:e}]},nc=m.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:i,fill:s,name:o,hide:l,unit:c,tooltipType:d,id:h}=e,f={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:un(o,t),hide:l,type:d,color:cn(a,s),unit:c,graphicalItemId:h}};return m.createElement(oa,{tooltipEntrySettings:f})});function rc(e){var{clipPathId:t,points:r,props:a}=e,{needClip:i,dot:s,dataKey:o}=a,l=hn(a);return m.createElement(pi,{points:r,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:l,needClip:i,clipPathId:t})}function ac(e){var{showLabels:t,children:r,points:a}=e,i=a.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return yt(yt({},c),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return m.createElement(di,{value:t?i:void 0},r)}function Gr(e){var{points:t,baseLine:r,needClip:a,clipPathId:i,props:s}=e,{layout:o,type:l,stroke:c,connectNulls:d,isRange:h}=s,{id:f}=s,g=es(s,Yl),D=hn(g),P=ui(g);return m.createElement(m.Fragment,null,t?.length>1&&m.createElement(We,{clipPath:a?"url(#clipPath-".concat(i,")"):void 0},m.createElement(nn,ct({},P,{id:f,points:t,connectNulls:d,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),c!=="none"&&m.createElement(nn,ct({},D,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),c!=="none"&&h&&m.createElement(nn,ct({},D,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:r}))),m.createElement(rc,{points:t,props:g,clipPathId:i}))}function sc(e){var t,r,{alpha:a,baseLine:i,points:s,strokeWidth:o}=e,l=(t=s[0])===null||t===void 0?void 0:t.y,c=(r=s[s.length-1])===null||r===void 0?void 0:r.y;if(!rn(l)||!rn(c))return null;var d=a*Math.abs(l-c),h=Math.max(...s.map(f=>f.x||0));return Ze(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(f=>f.x||0),h)),Ze(h)?m.createElement("rect",{x:0,y:l<c?l:l-d,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}function ic(e){var t,r,{alpha:a,baseLine:i,points:s,strokeWidth:o}=e,l=(t=s[0])===null||t===void 0?void 0:t.x,c=(r=s[s.length-1])===null||r===void 0?void 0:r.x;if(!rn(l)||!rn(c))return null;var d=a*Math.abs(l-c),h=Math.max(...s.map(f=>f.y||0));return Ze(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(f=>f.y||0),h)),Ze(h)?m.createElement("rect",{x:l<c?l:l-d,y:0,width:d,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}function oc(e){var{alpha:t,layout:r,points:a,baseLine:i,strokeWidth:s}=e;return r==="vertical"?m.createElement(sc,{alpha:t,points:a,baseLine:i,strokeWidth:s}):m.createElement(ic,{alpha:t,points:a,baseLine:i,strokeWidth:s})}function lc(e){var{needClip:t,clipPathId:r,props:a,previousPointsRef:i,previousBaselineRef:s}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:h,animationEasing:f,onAnimationStart:g,onAnimationEnd:D}=a,P=m.useMemo(()=>({points:o,baseLine:l}),[o,l]),w=la(P,"recharts-area-"),u=oi(),[p,y]=m.useState(!1),x=!p,j=m.useCallback(()=>{typeof D=="function"&&D(),y(!1)},[D]),C=m.useCallback(()=>{typeof g=="function"&&g(),y(!0)},[g]);if(u==null)return null;var b=i.current,v=s.current;return m.createElement(ac,{showLabels:x,points:o},a.children,m.createElement(ca,{animationId:w,begin:d,duration:h,isActive:c,easing:f,onAnimationEnd:j,onAnimationStart:C,key:w},S=>{if(b){var N=b.length/o.length,T=S===1?o:o.map((E,A)=>{var k=Math.floor(A*N);if(b[k]){var M=b[k];return yt(yt({},E),{},{x:Qe(M.x,E.x,S),y:Qe(M.y,E.y,S)})}return E}),R;return Ze(l)?R=Qe(v,l,S):li(l)||ci(l)?R=Qe(v,0,S):R=l.map((E,A)=>{var k=Math.floor(A*N);if(Array.isArray(v)&&v[k]){var M=v[k];return yt(yt({},E),{},{x:Qe(M.x,E.x,S),y:Qe(M.y,E.y,S)})}return E}),S>0&&(i.current=T,s.current=R),m.createElement(Gr,{points:T,baseLine:R,needClip:t,clipPathId:r,props:a})}return S>0&&(i.current=o,s.current=l),m.createElement(We,null,c&&m.createElement("defs",null,m.createElement("clipPath",{id:"animationClipPath-".concat(r)},m.createElement(oc,{alpha:S,points:o,baseLine:l,layout:u,strokeWidth:a.strokeWidth}))),m.createElement(We,{clipPath:"url(#animationClipPath-".concat(r,")")},m.createElement(Gr,{points:o,baseLine:l,needClip:t,clipPathId:r,props:a})))}),m.createElement(da,{label:a.label}))}function cc(e){var{needClip:t,clipPathId:r,props:a}=e,i=m.useRef(null),s=m.useRef();return m.createElement(lc,{needClip:t,clipPathId:r,props:a,previousPointsRef:i,previousBaselineRef:s})}class dc extends m.PureComponent{render(){var{hide:t,dot:r,points:a,className:i,top:s,left:o,needClip:l,xAxisId:c,yAxisId:d,width:h,height:f,id:g,baseLine:D,zIndex:P}=this.props;if(t)return null;var w=wt("recharts-area",i),u=g,{r:p,strokeWidth:y}=ai(r),x=si(r),j=p*2+y,C=l?"url(#clipPath-".concat(x?"":"dots-").concat(u,")"):void 0;return m.createElement(Bn,{zIndex:P},m.createElement(We,{className:w},l&&m.createElement("defs",null,m.createElement(ii,{clipPathId:u,xAxisId:c,yAxisId:d}),!x&&m.createElement("clipPath",{id:"clipPath-dots-".concat(u)},m.createElement("rect",{x:o-j/2,y:s-j/2,width:h+j,height:f+j}))),m.createElement(cc,{needClip:l,clipPathId:u,props:this.props})),m.createElement(dr,{points:a,mainColor:cn(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:C}),this.props.isRange&&Array.isArray(D)&&m.createElement(dr,{points:D,mainColor:cn(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:C}))}}var ts={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Hn.area};function uc(e){var t,r=pn(e,ts),{activeDot:a,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:h,hide:f,isAnimationActive:g,legendType:D,stroke:P,xAxisId:w,yAxisId:u}=r,p=es(r,Vl),y=ei(),x=ti(),{needClip:j}=ni(w,u),C=fa(),{points:b,isRange:v,baseLine:S}=(t=xt(k=>Xl(k,e.id,C)))!==null&&t!==void 0?t:{},N=ri();if(y!=="horizontal"&&y!=="vertical"||N==null||x!=="AreaChart"&&x!=="ComposedChart")return null;var{height:T,width:R,x:E,y:A}=N;return!b||!b.length?null:m.createElement(dc,ct({},p,{activeDot:a,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:S,connectNulls:l,dot:c,fill:d,fillOpacity:h,height:T,hide:f,layout:y,isAnimationActive:g==="auto"?!hi.isSsr:g,isRange:v,legendType:D,needClip:j,points:b,stroke:P,width:R,left:E,top:A,xAxisId:w,yAxisId:u}))}var pc=(e,t,r,a,i)=>{var s=r??t;if(Ze(s))return s;var o=e==="horizontal"?i:a,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return s==="dataMin"?d:s==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function hc(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:a},stackedData:i,layout:s,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:h,xAxisTicks:f,yAxisTicks:g,bandSize:D}=e,P=i&&i.length,w=pc(s,o,r,l,c),u=s==="horizontal",p=!1,y=d.map((j,C)=>{var b,v,S;if(P)S=i[h+C];else{var N=Je(j,a);Array.isArray(N)?(S=N,p=!0):S=[w,N]}var T=(b=(v=S)===null||v===void 0?void 0:v[1])!==null&&b!==void 0?b:null,R=T==null||P&&!t&&Je(j,a)==null;return u?{x:ur({axis:l,ticks:f,bandSize:D,entry:j,index:C}),y:R?null:c.scale(T),value:S,payload:j}:{x:R?null:l.scale(T),y:ur({axis:c,ticks:g,bandSize:D,entry:j,index:C}),value:S,payload:j}}),x;return P||p?x=y.map(j=>{var C=Array.isArray(j.value)?j.value[0]:null;return u?{x:j.x,y:C!=null&&j.y!=null?c.scale(C):null,payload:j.payload}:{x:C!=null?l.scale(C):null,y:j.y,payload:j.payload}}):x=u?c.scale(w):l.scale(w),{points:y,baseLine:x,isRange:p}}function fc(e){var t=pn(e,ts),r=fa();return m.createElement(sa,{id:t.id,type:"area"},a=>m.createElement(m.Fragment,null,m.createElement(Qs,{legendPayload:tc(t)}),m.createElement(nc,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),m.createElement(Js,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Zs(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),m.createElement(uc,ct({},t,{id:a}))))}var ns=m.memo(fc,Vs);ns.displayName="Area";function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,a)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kr(Object(r),!0).forEach(function(a){mc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mc(e,t,r){return(t=gc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gc(e){var t=yc(e,"string");return typeof t=="symbol"?t:t+""}function yc(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xc=["item"],vc=Xr(Xr({},mi),{},{layout:"centric",startAngle:0,endAngle:360}),bc=m.forwardRef((e,t)=>{var r=pn(e,vc);return m.createElement(fi,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:xc,tooltipPayloadSearcher:ma,categoricalChartProps:r,ref:t})}),wc=["axis"],jc=m.forwardRef((e,t)=>m.createElement(gi,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wc,tooltipPayloadSearcher:ma,categoricalChartProps:e,ref:t}));function Sc(){const e=ll.map(t=>({date:new Date(t.date).toLocaleDateString("en-US",{month:"short"}),score:t.score}));return n.jsx(nt,{className:"trend-card",title:"Health Score Trend (90 Days)",children:n.jsx("div",{className:"trend-chart",children:n.jsx($n,{width:"100%",height:200,children:n.jsxs(jc,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"var(--accent-primary)",stopOpacity:.3}),n.jsx("stop",{offset:"100%",stopColor:"var(--accent-primary)",stopOpacity:0})]})}),n.jsx(va,{strokeDasharray:"3 3",stroke:"var(--border-subtle)"}),n.jsx(ga,{dataKey:"date",stroke:"var(--text-muted)",style:{fontSize:"10px",fontFamily:"var(--font-mono)"}}),n.jsx(ya,{stroke:"var(--text-muted)",style:{fontSize:"10px",fontFamily:"var(--font-mono)"},domain:[0,100]}),n.jsx(ns,{type:"monotone",dataKey:"score",stroke:"var(--accent-primary)",strokeWidth:2,fill:"url(#trendGradient)"}),n.jsx(mt,{type:"monotone",dataKey:"score",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)",strokeWidth:2,r:4},activeDot:{r:6}})]})})})})}function Cc({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Quality Trend (90 Days)",widgetId:e,widgetType:t||"trend-chart",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(Sc,{})})}function Dc(){const e=(t,r)=>{if(r)return`Overdue ${Math.floor((Date.now()-new Date(t).getTime())/864e5)}d`;const a=new Date().toISOString().split("T")[0];return t===a?"Due Today":`Due in ${Math.ceil((new Date(t).getTime()-Date.now())/(1e3*60*60*24))}d`};return n.jsx(nt,{className:"tasks-card",title:"Recent Tasks",children:n.jsx("div",{className:"card-body",style:{padding:0},children:n.jsx("div",{className:"task-list",children:il.map(t=>n.jsxs("div",{className:"task-item",children:[n.jsx("div",{className:`task-priority ${t.priority}`}),n.jsxs("div",{className:"task-content",children:[n.jsx("div",{className:"task-title",children:t.title}),n.jsx("div",{className:"task-meta",children:n.jsx("span",{className:"task-asset",children:t.asset})})]}),n.jsx("div",{className:"task-assignee",children:n.jsx("div",{className:"task-avatar",children:t.assignee})}),n.jsx("div",{className:`task-due ${t.overdue?"overdue":""}`,children:e(t.dueDate,t.overdue)})]},t.id))})})})}function Pc({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Open Tasks",widgetId:e,widgetType:t||"tasks",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(Dc,{})})}function Nc(){return n.jsx(nt,{className:"accountability-card",title:"Steward Performance",children:n.jsx("div",{className:"card-body",style:{padding:0},children:n.jsxs("table",{className:"accountability-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Steward"}),n.jsx("th",{children:"Assets"}),n.jsx("th",{children:"Avg Score"}),n.jsx("th",{children:"Tasks Done"}),n.jsx("th",{children:"Trend"})]})}),n.jsx("tbody",{children:ol.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"owner-cell",children:[n.jsx("div",{className:"owner-avatar",children:e.initials}),n.jsx("span",{className:"owner-name",children:e.name})]})}),n.jsx("td",{className:"assets-cell",children:e.assetCount}),n.jsx("td",{children:n.jsx(vt,{score:e.avgScore})}),n.jsxs("td",{className:"assets-cell",children:[e.tasksDone,"/",e.tasksTotal]}),n.jsxs("td",{style:{color:e.trend>=0?"var(--accent-primary)":"var(--accent-danger)"},children:[e.trend>=0?"":""," ",Math.abs(e.trend),"%"]})]},e.id))})]})})})}function Ac({widgetId:e,widgetType:t,isEditMode:r}){return n.jsx(te,{title:"Accountability",widgetId:e,widgetType:t||"accountability",isEditMode:r||!1,dragHandleClassName:"widget-drag-handle",children:n.jsx(Nc,{})})}function Rc({widgetId:e,widgetType:t,isEditMode:r}){const{snapshots:a}=dn(),{assetsWithScores:i}=le(),[s,o]=m.useState([]);m.useEffect(()=>{(async()=>{try{const h=await hs.getRecentTrend(90);o(h),console.log("[DataQualityTrendsWidget] Loaded",h.length,"daily aggregations")}catch(h){console.error("[DataQualityTrendsWidget] Failed to load trend data:",h)}})()},[]);const l=m.useMemo(()=>{const d=[],h=new Map;if(s.forEach(g=>{h.set(g.date,{timestamp:g.timestamp,completeness:g.scores.completeness,accuracy:g.scores.accuracy,timeliness:g.scores.timeliness,consistency:g.scores.consistency,usability:g.scores.usability})}),a.forEach(g=>{const D=new Date(g.timestamp).toISOString().split("T")[0];h.has(D)||h.set(D,{timestamp:g.timestamp,completeness:g.overallScores.completeness,accuracy:g.overallScores.accuracy,timeliness:g.overallScores.timeliness,consistency:g.overallScores.consistency,usability:g.overallScores.usability})}),[...h.entries()].sort((g,D)=>g[1].timestamp-D[1].timestamp).forEach(([g,D])=>{d.push({date:new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric"}),...D})}),i.length>0){const g=i.reduce((u,{scores:p})=>({completeness:u.completeness+p.completeness,accuracy:u.accuracy+p.accuracy,timeliness:u.timeliness+p.timeliness,consistency:u.consistency+p.consistency,usability:u.usability+p.usability}),{completeness:0,accuracy:0,timeliness:0,consistency:0,usability:0}),D=i.length,P=Date.now(),w=d[d.length-1];(!w||P-w.timestamp>6e4)&&d.push({date:"Now",timestamp:P,completeness:Math.round(g.completeness/D),accuracy:Math.round(g.accuracy/D),timeliness:Math.round(g.timeliness/D),consistency:Math.round(g.consistency/D),usability:Math.round(g.usability/D)})}return d},[s,a,i]),c=l.length>0;return n.jsx(te,{title:"Data Quality Trends",widgetId:e,widgetType:t||"data-quality-trends",isEditMode:r||!1,children:n.jsx("div",{style:{width:"100%",height:"100%",minHeight:250},children:c?n.jsx($n,{children:n.jsxs(yi,{data:l,margin:{top:5,right:20,bottom:5,left:0},children:[n.jsx(va,{strokeDasharray:"3 3",stroke:"var(--border-subtle)"}),n.jsx(ga,{dataKey:"date",stroke:"var(--text-muted)",style:{fontSize:"11px"}}),n.jsx(ya,{stroke:"var(--text-muted)",style:{fontSize:"11px"},domain:[0,100]}),n.jsx(xa,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px"}}),n.jsx(Ci,{}),n.jsx(mt,{type:"monotone",dataKey:"completeness",stroke:"#22c55e",strokeWidth:2,dot:!1,name:"Completeness"}),n.jsx(mt,{type:"monotone",dataKey:"accuracy",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"Accuracy"}),n.jsx(mt,{type:"monotone",dataKey:"timeliness",stroke:"#a855f7",strokeWidth:2,dot:!1,name:"Timeliness"}),n.jsx(mt,{type:"monotone",dataKey:"consistency",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"Consistency"}),n.jsx(mt,{type:"monotone",dataKey:"usability",stroke:"#ec4899",strokeWidth:2,dot:!1,name:"Usability"})]})}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)",textAlign:"center",padding:"20px"},children:[n.jsx("p",{style:{marginBottom:"8px"},children:"No trend data yet"}),n.jsx("p",{style:{fontSize:"12px"},children:"Capture snapshots to track quality over time"})]})})})}const Yr=["#00d4aa","#3b82f6","#a855f7","#f59e0b","#ec4899","#14b8a6","#8b5cf6","#06b6d4"];function Tc({widgetId:e,widgetType:t,isEditMode:r}){const{byAssetType:a}=le(),i=m.useMemo(()=>Array.from(a.entries()).map(([s,o])=>({name:s,value:o.length})).sort((s,o)=>o.value-s.value).slice(0,8),[a]);return n.jsx(te,{title:"Asset Type Distribution",widgetId:e,widgetType:t||"asset-type-distribution",isEditMode:r||!1,children:i.length>0?n.jsx("div",{style:{width:"100%",height:"100%",minHeight:250},children:n.jsx($n,{children:n.jsxs(bc,{children:[n.jsx(Ka,{data:i,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,fill:"#8884d8",paddingAngle:2,dataKey:"value",label:s=>`${s.name}: ${s.value}`,labelLine:{stroke:"var(--text-muted)"},children:i.map((s,o)=>n.jsx(Fn,{fill:Yr[o%Yr.length]},`cell-${o}`))}),n.jsx(xa,{contentStyle:{background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"6px"}})]})})}):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:"No asset data available"})})}function kc({widgetId:e,widgetType:t,isEditMode:r}){const{byOwner:a}=le(),{snapshots:i}=dn(),s=m.useMemo(()=>{const o=new Map;return i.length>0&&i[0].byOwner&&Object.entries(i[0].byOwner).forEach(([c,d])=>{o.set(c,d.avgScores.overall)}),Array.from(a.entries()).map(([c,d])=>{const h=d.map(P=>P.scores?.overall||0),f=h.length>0?h.reduce((P,w)=>P+w,0)/h.length:0,g=o.get(c);let D=null;return g!==void 0&&g>0&&(D=Math.round((f-g)/g*100*10)/10),{name:c||"Unassigned",initials:(c||"U").split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2),assetCount:d.length,avgScore:Math.round(f),trend:D}}).filter(c=>c.name!=="Unassigned").sort((c,d)=>d.avgScore-c.avgScore).slice(0,5)},[a,i]);return n.jsx(te,{title:"Top Stewards Leaderboard",widgetId:e,widgetType:t||"top-stewards-leaderboard",isEditMode:r||!1,children:n.jsx("div",{className:"stewards-leaderboard",style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Rank"}),n.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Steward"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Assets"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Avg Score"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Trend"})]})}),n.jsx("tbody",{children:s.length>0?s.map((o,l)=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-subtle)"},children:[n.jsxs("td",{style:{padding:"12px 8px",fontWeight:"bold",color:"var(--accent-primary)"},children:["#",l+1]}),n.jsx("td",{style:{padding:"12px 8px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--accent-primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"var(--bg-primary)"},children:o.initials}),n.jsx("span",{style:{fontSize:"13px"},children:o.name})]})}),n.jsx("td",{style:{padding:"12px 8px",textAlign:"center",fontSize:"13px"},children:o.assetCount}),n.jsx("td",{style:{padding:"12px 8px",textAlign:"center"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",background:o.avgScore>=70?"rgba(34, 197, 94, 0.1)":"rgba(234, 179, 8, 0.1)",color:o.avgScore>=70?"var(--score-excellent)":"var(--score-fair)",fontSize:"12px",fontWeight:"bold"},children:o.avgScore})}),n.jsx("td",{style:{padding:"12px 8px",textAlign:"center"},children:o.trend!==null?n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"2px",color:o.trend>=0?"var(--score-excellent)":"var(--score-critical)",fontSize:"12px"},children:[o.trend>=0?"":"",Math.abs(o.trend),"%"]}):n.jsx("span",{style:{color:"var(--text-muted)",fontSize:"11px"},children:""})})]},o.name)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:"No steward data available"})})})]})})})}const Ec={description:Ai,owner:Di,certification:na,classification:ta};function Oc({widgetId:e,widgetType:t,isEditMode:r}){const a=m.useMemo(()=>{const s=Date.now();return[{id:"1",type:"description",asset:"snowflake/prod/customer_transactions",user:"Jane Doe",timestamp:new Date(s-3e5),details:"Added description"},{id:"2",type:"owner",asset:"bigquery/analytics/marketing_campaigns",user:"Alex Smith",timestamp:new Date(s-9e5),details:"Assigned owner to Analytics team"},{id:"3",type:"certification",asset:"redshift/warehouse/dim_products",user:"Maria Kim",timestamp:new Date(s-27e5),details:"Certified asset"},{id:"4",type:"classification",asset:"postgres/legacy/user_profiles",user:"Raj Patel",timestamp:new Date(s-72e5),details:"Added PII classification"},{id:"5",type:"description",asset:"snowflake/analytics/fact_sales",user:"Jane Doe",timestamp:new Date(s-108e5),details:"Updated description"}]},[]),i=s=>{const l=Date.now()-s.getTime(),c=Math.floor(l/6e4),d=Math.floor(l/36e5),h=Math.floor(l/864e5);return c<1?"Just now":c<60?`${c}m ago`:d<24?`${d}h ago`:`${h}d ago`};return n.jsx(te,{title:"Recent Activity",widgetId:e,widgetType:t||"recent-activity",isEditMode:r||!1,children:n.jsx("div",{className:"activity-feed",style:{maxHeight:"300px",overflowY:"auto"},children:a.map(s=>{const o=Ec[s.type];return n.jsxs("div",{className:"activity-item",style:{display:"flex",gap:"12px",padding:"12px 0",borderBottom:"1px solid var(--border-subtle)"},children:[n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n.jsx(o,{size:16,color:"var(--accent-primary)"})}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsxs("div",{style:{fontSize:"13px",color:"var(--text-primary)",marginBottom:"4px"},children:[n.jsx("span",{style:{fontWeight:"500"},children:s.user})," ",s.details]}),n.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.asset})]}),n.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",flexShrink:0},children:i(s.timestamp)})]},s.id)})})})}function zc({widgetId:e,widgetType:t,isEditMode:r}){const{byDomain:a}=le(),i=m.useMemo(()=>Array.from(a.entries()).map(([s,o])=>{const l=o.map(d=>d.score||0),c=l.length>0?l.reduce((d,h)=>d+h,0)/l.length:0;return{domain:s||"Unassigned",assetCount:o.length,avgScore:Math.round(c),withOwner:o.filter(d=>d.ownerUsers&&d.ownerUsers.length>0).length,withDescription:o.filter(d=>d.description||d.userDescription).length,certified:o.filter(d=>d.certificateStatus==="VERIFIED").length}}).sort((s,o)=>o.avgScore-s.avgScore),[a]);return n.jsx(te,{title:"Domain Coverage Matrix",widgetId:e,widgetType:t||"domain-coverage",isEditMode:r||!1,children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Domain"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Assets"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Score"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Owner%"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Desc%"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Cert%"})]})}),n.jsx("tbody",{children:i.map(s=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-subtle)"},children:[n.jsx("td",{style:{padding:"10px 8px",fontSize:"13px",fontWeight:500},children:s.domain}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"13px"},children:s.assetCount}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:n.jsx(vt,{score:s.avgScore,showLabel:!1})}),n.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"12px"},children:[Math.round(s.withOwner/s.assetCount*100),"%"]}),n.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"12px"},children:[Math.round(s.withDescription/s.assetCount*100),"%"]}),n.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"12px"},children:[Math.round(s.certified/s.assetCount*100),"%"]})]},s.domain))})]})})})}function Mc({widgetId:e,widgetType:t,isEditMode:r}){const{byCertification:a}=le(),i=m.useMemo(()=>{const l=Array.from(a.entries()).map(([d,h])=>({status:d||"None",count:h.length,percentage:0})),c=l.reduce((d,h)=>d+h.count,0);return l.forEach(d=>{d.percentage=c>0?Math.round(d.count/c*100):0}),l.sort((d,h)=>h.count-d.count)},[a]),s=l=>l==="VERIFIED"?na:l==="DRAFT"?ir:l==="DEPRECATED"?ba:ir,o=l=>l==="VERIFIED"?"var(--score-excellent)":l==="DRAFT"?"var(--score-fair)":l==="DEPRECATED"?"var(--score-critical)":"var(--text-muted)";return n.jsx(te,{title:"Certification Status",widgetId:e,widgetType:t||"certification-status",isEditMode:r||!1,children:n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",padding:"8px 0"},children:i.map(l=>{const c=s(l.status),d=o(l.status);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:"var(--bg-tertiary)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:n.jsx(c,{size:18,color:d})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:500,marginBottom:"4px"},children:l.status}),n.jsx("div",{style:{width:"100%",height:"6px",background:"var(--bg-tertiary)",borderRadius:"3px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${l.percentage}%`,height:"100%",background:d,transition:"width 0.3s"}})})]}),n.jsxs("div",{style:{textAlign:"right",minWidth:"80px"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:d},children:l.count}),n.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:[l.percentage,"%"]})]})]},l.status)})})})}function Ic({widgetId:e,widgetType:t,isEditMode:r}){const{assetsWithScores:a}=le(),i=m.useMemo(()=>{const o=Date.now(),l=1440*60*1e3,c={current:0,recent:0,aging:0,stale:0,veryStale:0};return a.forEach(d=>{const h=d.updateTime||d.sourceUpdatedAt||0,f=o-h;f<l?c.current++:f<7*l?c.recent++:f<30*l?c.aging++:f<90*l?c.stale++:c.veryStale++}),[{label:"Current",sublabel:"< 24 hours",count:c.current,color:"var(--score-excellent)",percent:0},{label:"Recent",sublabel:"1-7 days",count:c.recent,color:"var(--score-good)",percent:0},{label:"Aging",sublabel:"7-30 days",count:c.aging,color:"var(--score-fair)",percent:0},{label:"Stale",sublabel:"30-90 days",count:c.stale,color:"var(--score-poor)",percent:0},{label:"Very Stale",sublabel:"> 90 days",count:c.veryStale,color:"var(--score-critical)",percent:0}].map(d=>({...d,percent:a.length>0?Math.round(d.count/a.length*100):0}))},[a]),s=i[3].count+i[4].count;return n.jsxs(te,{title:"Data Freshness",widgetId:e,widgetType:t||"freshness-dashboard",isEditMode:r||!1,children:[s>0&&n.jsxs("div",{style:{padding:"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"#ef4444"},children:[n.jsx(ba,{size:14}),s," assets haven't been updated in 30+ days"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.map(o=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(fs,{size:14,color:o.color,style:{flexShrink:0}}),n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:o.label}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:o.sublabel})]}),n.jsx("div",{style:{width:"100%",height:"6px",background:"var(--bg-tertiary)",borderRadius:"3px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${o.percent}%`,height:"100%",background:o.color,transition:"width 0.3s"}})})]}),n.jsxs("div",{style:{textAlign:"right",minWidth:"60px",fontSize:"12px",color:o.color,fontWeight:"bold"},children:[o.count," (",o.percent,"%)"]})]},o.label))})]})}function Wc({widgetId:e,widgetType:t,isEditMode:r}){const{assetsWithScores:a}=le(),i=m.useMemo(()=>{const s=a.length,o=a.filter(d=>d.userDescription).length,l=a.filter(d=>d.description&&!d.userDescription).length,c=s-o-l;return[{label:"User Description",sublabel:"Manually added",count:o,percent:s>0?Math.round(o/s*100):0,icon:wa,color:"var(--score-excellent)"},{label:"System Description",sublabel:"Auto-generated",count:l,percent:s>0?Math.round(l/s*100):0,icon:ms,color:"var(--score-good)"},{label:"No Description",sublabel:"Missing",count:c,percent:s>0?Math.round(c/s*100):0,icon:_n,color:"var(--score-critical)"}]},[a]);return n.jsx(te,{title:"Description Coverage Funnel",widgetId:e,widgetType:t||"description-coverage",isEditMode:r||!1,children:n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px",padding:"8px 0"},children:i.map((s,o)=>{const l=s.icon,c=100-o*15;return n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(l,{size:14,color:s.color}),n.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:s.label}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)",marginLeft:"auto"},children:s.sublabel})]}),n.jsxs("div",{style:{width:`${c}%`,height:"40px",background:`linear-gradient(90deg, ${s.color}, ${s.color}aa)`,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",color:"white",fontWeight:"bold",marginLeft:`${(100-c)/2}%`,transition:"all 0.3s"},children:[n.jsxs("span",{children:[s.count," assets"]}),n.jsxs("span",{children:[s.percent,"%"]})]})]},s.label)})})})}function Lc({widgetId:e,widgetType:t,isEditMode:r}){const{byClassification:a,assetsWithScores:i}=le(),s=m.useMemo(()=>{const l=Array.from(a.entries()).sort((f,g)=>g[1].length-f[1].length).slice(0,6).map(([f])=>f),c=new Set(i.map(f=>f.asset.connectionName).filter(Boolean));return{matrix:Array.from(c).slice(0,5).map(f=>{const g={connection:f};return l.forEach(D=>{const P=i.filter(w=>w.asset.connectionName===f&&w.asset.classificationNames?.includes(D)).length;g[D]=P}),g}),classifications:l}},[a,i]),o=Math.max(...s.matrix.flatMap(l=>s.classifications.map(c=>l[c]||0)),1);return n.jsx(te,{title:"Classification Heatmap",widgetId:e,widgetType:t||"classification-heatmap",isEditMode:r||!1,children:n.jsx("div",{className:"heatmap-container",style:{overflowX:"auto",height:"100%"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:{padding:"12px 8px",textAlign:"left",borderBottom:"1px solid var(--border-subtle)",fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Connection"}),s.classifications.map(l=>n.jsx("th",{style:{padding:"12px 8px",textAlign:"center",borderBottom:"1px solid var(--border-subtle)",fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:l},l))]})}),n.jsx("tbody",{children:s.matrix.map(l=>n.jsxs("tr",{children:[n.jsx("td",{style:{padding:"12px 8px",fontWeight:500,borderBottom:"1px solid var(--border-canvas)",fontSize:"12px"},children:l.connection}),s.classifications.map(c=>{const d=l[c]||0,h=d/o,f=`rgba(0, 212, 170, ${h*.9})`;return n.jsx("td",{style:{padding:"12px 8px",textAlign:"center",background:d>0?f:"transparent",borderBottom:"1px solid var(--border-canvas)",fontWeight:d>0?"600":"400",color:h>.4?"#fff":"var(--text-primary)",fontSize:"12px",transition:"background 0.2s ease"},children:d||"-"},c)})]},l.connection))})]})})})}function _c({widgetId:e,widgetType:t,isEditMode:r}){const{assetsWithScores:a}=le(),i=m.useMemo(()=>{const s=a.filter(h=>h.meanings&&h.meanings.length>0).length,o=a.length,l=o>0?Math.round(s/o*100):0,c=new Map;a.forEach(h=>{h.meanings&&Array.isArray(h.meanings)&&h.meanings.forEach(f=>{const g=typeof f=="string"?f:f.displayText||"Unknown";c.set(g,(c.get(g)||0)+1)})});const d=Array.from(c.entries()).sort((h,f)=>f[1]-h[1]).slice(0,5).map(([h,f])=>({term:h,count:f}));return{withTerms:s,withoutTerms:o-s,total:o,coverage:l,topTerms:d}},[a]);return n.jsx(te,{title:"Glossary Term Coverage",widgetId:e,widgetType:t||"glossary-term-coverage",isEditMode:r||!1,children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{textAlign:"center",padding:"16px"},children:[n.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",border:"8px solid var(--bg-tertiary)",borderTopColor:i.coverage>=70?"var(--score-excellent)":i.coverage>=50?"var(--score-fair)":"var(--score-critical)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",transition:"all 0.3s",transform:"rotate(-90deg)"},children:n.jsx("div",{style:{transform:"rotate(90deg)"},children:n.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"var(--text-primary)"},children:[i.coverage,"%"]})})}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"var(--text-muted)"},children:[i.withTerms," of ",i.total," assets"]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"12px",fontWeight:600,color:"var(--text-muted)",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx(gs,{size:12}),"Most Used Terms"]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:i.topTerms.map((s,o)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent-primary)",minWidth:"20px"},children:["#",o+1]}),n.jsx("span",{style:{flex:1,fontSize:"12px"},children:s.term}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:s.count})]},s.term))})]})]})})}function Hc({widgetId:e,widgetType:t,isEditMode:r}){const{assetsWithScores:a}=le(),i=m.useMemo(()=>{const s=a.filter(c=>c.asset?.__hasLineage===!0).length,o=a.length,l=o>0?Math.round(s/o*100):0;return{withLineage:s,withoutLineage:o-s,total:o,coverage:l}},[a]);return n.jsx(te,{title:"Lineage Coverage",widgetId:e,widgetType:t||"lineage-coverage",isEditMode:r||!1,children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`conic-gradient(var(--accent-primary) 0% ${i.coverage}%, var(--bg-tertiary) ${i.coverage}% 100%)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:n.jsxs("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--bg-secondary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:[i.coverage,"%"]})}),n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--accent-primary)"},children:i.withLineage}),n.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"assets with lineage"}),n.jsxs("div",{style:{fontSize:"12px",color:"var(--score-critical)",marginTop:"4px"},children:[i.withoutLineage," without"]})]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsxs("div",{style:{flex:1,padding:"12px",background:"var(--bg-tertiary)",borderRadius:"6px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx(ys,{size:14,color:"var(--score-excellent)"}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Connected"})]}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:i.withLineage})]}),n.jsxs("div",{style:{flex:1,padding:"12px",background:"var(--bg-tertiary)",borderRadius:"6px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx(_n,{size:14,color:"var(--score-critical)"}),n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Orphaned"})]}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:i.withoutLineage})]}),n.jsxs("div",{style:{flex:1,padding:"12px",background:"var(--bg-tertiary)",borderRadius:"6px"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:n.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Total"})}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:i.total})]})]})]})})}function Bc({widgetId:e,widgetType:t,isEditMode:r}){const{byTag:a}=le(),i=m.useMemo(()=>{const s=Array.from(a.entries()).map(([l,c])=>({tag:l||"Untagged",count:c.length})).filter(l=>l.tag!=="Untagged").sort((l,c)=>c.count-l.count).slice(0,20),o=s.length>0?s[0].count:1;return s.map(l=>({...l,size:12+Math.round(l.count/o*12)}))},[a]);return n.jsx(te,{title:"Tag Cloud",widgetId:e,widgetType:t||"tag-cloud",isEditMode:r||!1,children:n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",padding:"8px",justifyContent:"center",alignItems:"center",minHeight:"200px"},children:i.length>0?i.map(s=>n.jsxs("div",{style:{padding:"6px 12px",background:"var(--bg-tertiary)",borderRadius:"6px",fontSize:`${s.size}px`,fontWeight:500,color:"var(--text-primary)",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",gap:"6px"},onMouseEnter:o=>{o.currentTarget.style.background="var(--accent-primary)",o.currentTarget.style.color="var(--bg-primary)"},onMouseLeave:o=>{o.currentTarget.style.background="var(--bg-tertiary)",o.currentTarget.style.color="var(--text-primary)"},children:[n.jsx(ta,{size:s.size*.7}),s.tag,n.jsxs("span",{style:{fontSize:"10px",opacity:.7},children:["(",s.count,")"]})]},s.tag)):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-muted)"},children:"No tags found"})})})}function qc({widgetId:e,widgetType:t,isEditMode:r}){const{assetsWithScores:a}=le(),i=m.useMemo(()=>{const s=new Map;return a.forEach(o=>{const l=o.connectorName||o.connectionName||"Unknown";s.has(l)||s.set(l,[]),s.get(l).push(o)}),Array.from(s.entries()).map(([o,l])=>{const c=l.map(h=>h.score||0),d=c.length>0?c.reduce((h,f)=>h+f,0)/c.length:0;return{connector:o,assetCount:l.length,avgScore:Math.round(d),withOwner:l.filter(h=>h.ownerUsers&&h.ownerUsers.length>0).length,certified:l.filter(h=>h.certificateStatus==="VERIFIED").length}}).sort((o,l)=>l.avgScore-o.avgScore)},[a]);return n.jsx(te,{title:"Connector Health Matrix",widgetId:e,widgetType:t||"connector-health",isEditMode:r||!1,children:n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[n.jsx("th",{style:{padding:"8px",textAlign:"left",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Connector"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Assets"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Health"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Owner%"}),n.jsx("th",{style:{padding:"8px",textAlign:"center",fontSize:"11px",color:"var(--text-muted)",fontWeight:600},children:"Cert%"})]})}),n.jsx("tbody",{children:i.map(s=>n.jsxs("tr",{style:{borderBottom:"1px solid var(--border-subtle)"},children:[n.jsx("td",{style:{padding:"10px 8px"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(xs,{size:14,color:"var(--accent-primary)"}),n.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:s.connector})]})}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"13px"},children:s.assetCount}),n.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:n.jsx(vt,{score:s.avgScore,showLabel:!1})}),n.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"12px"},children:[Math.round(s.withOwner/s.assetCount*100),"%"]}),n.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",fontSize:"12px"},children:[Math.round(s.certified/s.assetCount*100),"%"]})]},s.connector))})]})})})}function $c({widgetId:e,widgetType:t,isEditMode:r}){const{bySchema:a}=le(),i=m.useMemo(()=>Array.from(a.entries()).map(([l,c])=>{const d=c.map(P=>P.score||0),h=d.length>0?d.reduce((P,w)=>P+w,0)/d.length:0,f=l.split("/"),g=f.length>2?f[1]:"Unknown";return{schema:f[f.length-1]||l,database:g,fullName:l,assetCount:c.length,avgScore:Math.round(h)}}).sort((l,c)=>c.avgScore-l.avgScore),[a]),s=i.slice(0,5),o=i.slice(-5).reverse();return n.jsx(te,{title:"Schema Quality Leaderboard",widgetId:e,widgetType:t||"schema-quality",isEditMode:r||!1,children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"var(--score-excellent)",marginBottom:"8px"},children:" Top Schemas"}),s.map((l,c)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",marginBottom:"4px",background:"var(--bg-tertiary)",borderRadius:"6px"},children:[n.jsxs("span",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--accent-primary)",minWidth:"24px"},children:["#",c+1]}),n.jsx(or,{size:14,color:"var(--text-muted)"}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.schema}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:[l.database,"  ",l.assetCount," assets"]})]}),n.jsx(vt,{score:l.avgScore,showLabel:!1})]},l.fullName))]}),o.length>0&&n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"var(--score-critical)",marginBottom:"8px"},children:" Needs Attention"}),o.map(l=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",marginBottom:"4px",background:"rgba(239, 68, 68, 0.05)",borderRadius:"6px"},children:[n.jsx(or,{size:14,color:"var(--score-critical)"}),n.jsxs("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.schema}),n.jsxs("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:[l.database,"  ",l.assetCount," assets"]})]}),n.jsx(vt,{score:l.avgScore,showLabel:!1})]},l.fullName))]})]})})}ee({id:"scorecard",type:"scorecard",title:"Health Score",description:"Overall quality score with dimension breakdown",category:"core",defaultSize:{w:3,h:2},minSize:{w:3,h:2},maxSize:{w:4,h:3},component:Qo,icon:"Activity"});ee({id:"stats-row",type:"stats-row",title:"Key Metrics",description:"High-level statistics at a glance",category:"core",defaultSize:{w:9,h:1},minSize:{w:6,h:1},maxSize:{w:12,h:2},component:el,icon:"BarChart3"});ee({id:"heatmap",type:"heatmap",title:"Quality Heatmap",description:"Quality dimensions across pivots",category:"analytics",defaultSize:{w:9,h:2},minSize:{w:6,h:2},maxSize:{w:12,h:4},component:nl,icon:"Grid3x3"});ee({id:"owner-pivot",type:"owner-pivot",title:"Owner Pivot Analysis",description:"Cross-dimensional pivot table",category:"analytics",defaultSize:{w:12,h:2},minSize:{w:8,h:2},component:al,icon:"Table"});ee({id:"campaigns",type:"campaigns",title:"Active Campaigns",description:"Campaign tracking and progress",category:"management",defaultSize:{w:4,h:2},minSize:{w:3,h:2},maxSize:{w:6,h:3},component:dl,icon:"Target"});ee({id:"trend-chart",type:"trend-chart",title:"Quality Trend",description:"90-day quality score trend",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:8,h:3},component:Cc,icon:"TrendingUp"});ee({id:"tasks",type:"tasks",title:"Open Tasks",description:"Pending stewardship tasks",category:"management",defaultSize:{w:4,h:2},minSize:{w:3,h:2},maxSize:{w:6,h:4},component:Pc,icon:"CheckSquare"});ee({id:"accountability",type:"accountability",title:"Accountability",description:"Steward performance metrics",category:"management",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:8,h:3},component:Ac,icon:"Users"});ee({id:"data-quality-trends",type:"data-quality-trends",title:"Data Quality Trends",description:"Historical quality scores across 5 dimensions",category:"analytics",defaultSize:{w:8,h:2},minSize:{w:6,h:2},maxSize:{w:12,h:3},component:Rc,icon:"TrendingUp",isNew:!0});ee({id:"asset-type-distribution",type:"asset-type-distribution",title:"Asset Type Distribution",description:"Breakdown of assets by type with pie chart",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:3},component:Tc,icon:"PieChart",isNew:!0});ee({id:"top-stewards-leaderboard",type:"top-stewards-leaderboard",title:"Top Stewards",description:"Ranked list of most active data stewards",category:"activity",defaultSize:{w:4,h:3},minSize:{w:4,h:3},maxSize:{w:6,h:4},component:kc,icon:"Award",isNew:!0});ee({id:"recent-activity",type:"recent-activity",title:"Recent Activity",description:"Timeline of recent metadata changes",category:"activity",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:4},component:Oc,icon:"Clock",isNew:!0});ee({id:"domain-coverage",type:"domain-coverage",title:"Domain Coverage Matrix",description:"Quality metrics by data domain",category:"analytics",defaultSize:{w:6,h:2},minSize:{w:4,h:2},maxSize:{w:12,h:3},component:zc,icon:"Layers",isNew:!0});ee({id:"certification-status",type:"certification-status",title:"Certification Status",description:"Asset breakdown by certificate status",category:"core",defaultSize:{w:4,h:2},minSize:{w:3,h:2},maxSize:{w:6,h:3},component:Mc,icon:"Shield",isNew:!0});ee({id:"freshness-dashboard",type:"freshness-dashboard",title:"Data Freshness",description:"Stale data detection by age buckets",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:3},component:Ic,icon:"Clock",isNew:!0});ee({id:"description-coverage",type:"description-coverage",title:"Description Coverage",description:"User vs system vs no descriptions",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:3},component:Wc,icon:"FileText",isNew:!0});ee({id:"classification-heatmap",type:"classification-heatmap",title:"Classification Heatmap",description:"Classifications across connections",category:"analytics",defaultSize:{w:6,h:2},minSize:{w:6,h:2},maxSize:{w:12,h:3},component:Lc,icon:"Grid",isNew:!0});ee({id:"glossary-term-coverage",type:"glossary-term-coverage",title:"Glossary Term Coverage",description:"Assets with glossary terms assigned",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:3},component:_c,icon:"BookOpen",isNew:!0});ee({id:"lineage-coverage",type:"lineage-coverage",title:"Lineage Coverage",description:"Assets with upstream/downstream lineage",category:"analytics",defaultSize:{w:4,h:2},minSize:{w:4,h:2},maxSize:{w:6,h:3},component:Hc,icon:"GitBranch",isNew:!0});ee({id:"tag-cloud",type:"tag-cloud",title:"Tag Cloud",description:"Most commonly used tags",category:"activity",defaultSize:{w:6,h:2},minSize:{w:4,h:2},maxSize:{w:12,h:3},component:Bc,icon:"Tags",isNew:!0});ee({id:"connector-health",type:"connector-health",title:"Connector Health",description:"Quality scores by connector",category:"analytics",defaultSize:{w:6,h:2},minSize:{w:6,h:2},maxSize:{w:12,h:3},component:qc,icon:"Database",isNew:!0});ee({id:"schema-quality",type:"schema-quality",title:"Schema Quality",description:"Top and bottom schemas by score",category:"analytics",defaultSize:{w:4,h:3},minSize:{w:4,h:3},maxSize:{w:8,h:4},component:$c,icon:"Layers",isNew:!0});function cd(){const[e,t]=m.useState(new Date),[r,a]=m.useState(!1),i=vs(),{activeTab:s,isOpen:o,toggleTab:l}=bs(),{assetsWithScores:c,stats:d}=le(),{isEditMode:h,toggleEditMode:f,activeTemplateId:g,resetToTemplate:D,setActiveTemplate:P,currentLayouts:w}=Lt(),{captureSnapshot:u,snapshots:p}=dn(),{context:y}=In(),{addPlan:x,setActivePlanId:j}=ws();m.useEffect(()=>{w.lg.length===0&&P("executive")},[]),m.useEffect(()=>{c.length>0&&t(new Date)},[c]);const C=()=>{t(new Date),window.dispatchEvent(new CustomEvent("dashboard-refresh"))},b=()=>{g&&confirm("Reset dashboard to template? This will discard all customizations.")&&D(g)},v=m.useCallback(()=>{if(c.length===0)return;const T=y?.label?`${y.label} snapshot`:"All assets snapshot",R=y?.filters?{connectionFilter:y.filters.connectionName,domainFilter:y.filters.databaseName,searchQuery:void 0}:void 0;u(T,c.map(({metadata:E,scores:A})=>({metadata:E,scores:A})),d,R),(s!=="history"||!o)&&l("history")},[c.length,d,y,u,s,o,l]),S=T=>{const R=Math.floor((new Date().getTime()-T.getTime())/1e3);if(R<60)return`${R}s ago`;const E=Math.floor(R/60);if(E<60)return`${E}m ago`;const A=Math.floor(E/60);return A<24?`${A}h ago`:`${Math.floor(A/24)}d ago`},N=m.useCallback(()=>{if(c.length===0)return;const T=y?.label?`Plan for ${y.label}`:`Quality Enrichment Plan - ${new Date().toLocaleDateString()}`,R=new Date;R.setMonth(R.getMonth()+3);const E=c.map(({asset:M,metadata:W,scores:$})=>({asset:{guid:M.guid,typeName:M.typeName,attributes:M},metadata:W,scores:$})),A=Yo(E,T,R.toISOString());if(!A)return;const k={...A.plan,id:`plan-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),targetDate:R.toISOString(),domains:y?.filters?.databaseName?[y.filters.databaseName]:[],owners:[],reviewers:[],contributors:{},versions:[],comments:[],gapAnalysis:A.gapAnalysis};x(k),j(k.id),i("/planning/plans")},[c,y,x,j,i]);return n.jsxs("div",{className:"executive-dashboard",children:[n.jsx(Ps,{title:"Executive Overview",children:n.jsxs(Ns,{children:[n.jsxs(Xt,{children:[n.jsx(st,{icon:n.jsx(Pi,{}),onClick:()=>a(!0),title:"Switch Dashboard Template"}),n.jsx(st,{icon:h?n.jsx(Si,{}):n.jsx(wa,{}),active:h,onClick:f,title:h?"Finish Editing":"Edit Layout"}),h&&n.jsx(st,{icon:n.jsx(pr,{}),onClick:b,title:"Reset Layout"})]}),h&&n.jsx(Go,{}),n.jsx(Dn,{}),n.jsx(Xt,{children:n.jsx(st,{icon:n.jsx(js,{}),onClick:N,disabled:c.length===0,title:"Create Enrichment Plan"})}),n.jsx(Dn,{}),n.jsxs(Xt,{children:[n.jsx(st,{icon:n.jsx(Ss,{}),onClick:v,disabled:c.length===0,title:"Take Snapshot"}),n.jsx(st,{icon:n.jsx(Cs,{}),active:o&&s==="history",badge:p.length>0,onClick:()=>l("history"),title:"View History"})]}),n.jsx(Dn,{}),n.jsx(Xt,{children:n.jsx(st,{icon:n.jsx(pr,{}),onClick:C,title:"Refresh Data"})})]})}),n.jsxs("div",{className:"dashboard-last-updated",children:["Last updated ",S(e)]}),h&&n.jsx("div",{className:"edit-mode-banner",children:"Edit mode active - Drag widgets to reposition, resize by dragging corners, or add new widgets"}),n.jsx(Uo,{}),n.jsx(Ko,{isOpen:r,onClose:()=>a(!1)})]})}export{cd as ExecutiveDashboard};
