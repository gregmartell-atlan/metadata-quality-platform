import{c as Y,r as h,j as e,D as G,ak as Je,aG as Ke,S as Me,q as ce,G as Xe,A as Ze,z as je,T as de,F as J,U as me,J as E,L as Z,a6 as X,aj as ze,K as Ie,a8 as es,ac as Ee,a4 as Re,a5 as _,aQ as Te,aP as ee,E as ge,X as $e,o as U,b7 as M,ab as Le,n as se,O as te,$ as Fe,ax as he,ay as ss,ae as ts,bh as Oe,aY as as,bf as Ne,aV as rs,bi as ns,y as is,af as ls,m as os,at as cs}from"./index-BYXjn4hA.js";import{b as R,u as ds,d as qe,H as ms,A as us,a as xs,e as ps,c as gs}from"./AnalyticsTab-COv9oNx_.js";import{u as hs,M as fs}from"./useAtlanAudit-BulCGahL.js";import{D as K}from"./download-DQhb5Itz.js";import{T as W}from"./triangle-alert-3Hm35Ind.js";import{G as Ge,S as bs}from"./save-B1kDgeWa.js";import{C as ue}from"./columns-2-TlRY8h_0.js";import{T as Se}from"./table-BnVMzowL.js";import{S as we}from"./square-check-big-Dt5s5GBL.js";import{u as le}from"./modelStore-DuNXWet2.js";import{L as ys}from"./list-k-ASkxhI.js";import{P as xe}from"./plus-Db2s5bXk.js";import{P as vs}from"./canvas-templates-8GMpXtWl.js";import{C as js}from"./circle-x-DGeOmOLa.js";import{F as Ns}from"./funnel-DPZwMpz0.js";import{U as ws}from"./user-plus-B8lgQ9YT.js";import"./PolarChart-Cj5jwBuJ.js";import"./value-NzwA106W.js";import"./RadarChart-BCITqJZZ.js";import"./CartesianGrid-Crd6WZ8Q.js";const Cs=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],pe=Y("box",Cs);const Ts=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Pe=Y("calculator",Ts);const Ss=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],Ue=Y("file-code",Ss);const ks=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],As=Y("play",ks);const qs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Be=Y("square",qs);const Ps=[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]],Ds=Y("tree-deciduous",Ps);const Ms=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fe=Y("wifi-off",Ms),_e={ownerUsers:30,ownerGroups:15,description:20,userDescription:10,readme:5,atlanTags:25,certificateStatus:25,glossaryTerms:15,lineage:10,accessPolicies:10,customMetadata:5,starredBy:2,links:3},Ve={ownerUsers:"low",ownerGroups:"low",description:"medium",userDescription:"low",readme:"high",atlanTags:"medium",certificateStatus:"low",glossaryTerms:"medium",lineage:"high",accessPolicies:"high",customMetadata:"medium",starredBy:"low",links:"low"},zs={low:2,medium:4,high:10},Is=[{id:"quick-discovery",name:"Quick Discovery",description:"Enable users to find and understand data assets quickly",useCase:"Organizations prioritizing self-service data discovery",suggestedTimeline:"4-6 weeks",prerequisites:[],fields:[{field:"description",requirement:"required",rationale:"Users need to understand what the asset contains"},{field:"ownerUsers",requirement:"required",rationale:"Users need to know who to contact for questions"},{field:"glossaryTerms",requirement:"recommended",rationale:"Standardizes terminology for search"},{field:"certificateStatus",requirement:"recommended",rationale:"Signals trustworthiness"},{field:"starredBy",requirement:"optional",rationale:"Social proof of useful assets"},{field:"readme",requirement:"optional",rationale:"Deep context for power users"}]},{id:"trusted-metrics",name:"Trusted Metrics",description:"Establish single source of truth for KPIs and calculations",useCase:"Organizations with metric inconsistency or duplicate definitions",suggestedTimeline:"6-8 weeks",prerequisites:["Glossary structure defined"],fields:[{field:"glossaryTerms",requirement:"required",rationale:"Links metrics to official definitions"},{field:"ownerUsers",requirement:"required",rationale:"Accountable party for metric accuracy"},{field:"lineage",requirement:"required",rationale:"Shows how metric is calculated"},{field:"certificateStatus",requirement:"required",rationale:"Distinguishes official vs unofficial"},{field:"description",requirement:"recommended",rationale:"Explains calculation methodology"},{field:"customMetadata",requirement:"recommended",rationale:"Business context like refresh frequency"}]},{id:"compliance-ready",name:"Compliance Ready",description:"Prepare for regulatory audits and data governance requirements",useCase:"Organizations in regulated industries (finance, healthcare, etc.)",suggestedTimeline:"8-12 weeks",prerequisites:["Classification taxonomy defined","Access policies designed"],fields:[{field:"atlanTags",requirement:"required",rationale:"Classification is non-negotiable for compliance"},{field:"ownerUsers",requirement:"required",rationale:"Accountability chain for auditors"},{field:"accessPolicies",requirement:"required",rationale:"Demonstrates access control"},{field:"lineage",requirement:"recommended",rationale:"Data flow documentation for audits"},{field:"description",requirement:"recommended",rationale:"Context for auditors"},{field:"customMetadata",requirement:"recommended",rationale:"Retention policies, data sources"}]},{id:"root-cause-analysis",name:"Root Cause Analysis",description:"Enable fast debugging of data quality and pipeline issues",useCase:"Organizations with frequent data incidents or quality problems",suggestedTimeline:"6-8 weeks",prerequisites:["Lineage connectors configured"],fields:[{field:"lineage",requirement:"required",rationale:"Must trace data flow to find issues"},{field:"ownerUsers",requirement:"required",rationale:"Know who to escalate to"},{field:"description",requirement:"recommended",rationale:"Understanding expected behavior"},{field:"customMetadata",requirement:"recommended",rationale:"SLAs, freshness expectations"},{field:"links",requirement:"optional",rationale:"Runbooks, incident playbooks"}]},{id:"data-product",name:"Data Product",description:"Package data as a self-service product for consumers",useCase:"Organizations building internal data marketplace or mesh",suggestedTimeline:"10-14 weeks",prerequisites:["Data product framework defined","Consumer personas identified"],fields:[{field:"readme",requirement:"required",rationale:"Product documentation is essential"},{field:"ownerUsers",requirement:"required",rationale:"Product owner accountability"},{field:"certificateStatus",requirement:"required",rationale:"Production-ready signal"},{field:"glossaryTerms",requirement:"required",rationale:"Consistent terminology"},{field:"description",requirement:"required",rationale:"Quick product overview"},{field:"lineage",requirement:"recommended",rationale:"Transparency on sources"},{field:"accessPolicies",requirement:"recommended",rationale:"Self-service access requests"},{field:"customMetadata",requirement:"recommended",rationale:"SLAs, update frequency, cost"},{field:"links",requirement:"optional",rationale:"Sample queries, tutorials"}]}],ye=[{level:"P0",badge:"",label:"Critical",color:"#DC2626",minScore:70},{level:"P1",badge:"",label:"High",color:"#EA580C",minScore:50},{level:"P2",badge:"",label:"Medium",color:"#CA8A04",minScore:30},{level:"P3",badge:"",label:"Low",color:"#6B7280",minScore:0}],Es={ownerUsers:"Owner (Users)",ownerGroups:"Owner (Groups)",description:"Description",userDescription:"User Description",readme:"README",atlanTags:"Classifications",certificateStatus:"Certificate",glossaryTerms:"Glossary Terms",lineage:"Lineage",accessPolicies:"Access Policies",customMetadata:"Custom Metadata",starredBy:"Starred",links:"Links"};function Q(s){return Es[s]||s}function Rs(){const s=R(r=>r.assets),a=R(r=>r.importScope),t=R(r=>r.extractedTags),i=R(r=>r.extractedBusinessAttributes),{filter:l,isFiltered:n}=ds();return h.useMemo(()=>{let r=s;n&&(r=s.filter(u=>{if(l.connector&&u.connectorName!==l.connector)return!1;const v=u.database||u.databaseName;if(l.database&&v!==l.database)return!1;const C=u.schema||u.schemaName;return!(l.schema&&C!==l.schema||l.assetTypes.length>0&&!l.assetTypes.includes(u.typeName))}));const o=r.length,c=new Map;r.forEach(u=>{const v=u.typeName;c.set(v,(c.get(v)||0)+1)});const x=Array.from(c.entries()).map(([u,v])=>({type:u,count:v,percentage:o>0?Math.round(v/o*100):0})).sort((u,v)=>v.count-u.count),p=[{field:"ownerUsers",label:"Owners"},{field:"description",label:"Descriptions"},{field:"userDescription",label:"User Descriptions"},{field:"atlanTags",label:"Tags"},{field:"meanings",label:"Glossary Terms"},{field:"certificateStatus",label:"Certificate"}].map(({field:u,label:v})=>{const C=r.filter(A=>{const b=A.attributes;if(!b)return!1;const w=b[u];return w==null?!1:typeof w=="string"?w.trim().length>0:Array.isArray(w)?w.length>0:!0}).length;return{field:u,label:v,count:C,total:o,percentage:o>0?Math.round(C/o*100):0}}),y={missingOwners:r.filter(u=>{const v=u.attributes?.ownerUsers;return!v||Array.isArray(v)&&v.length===0}),missingDescriptions:r.filter(u=>{const v=u.attributes?.description;return!v||typeof v=="string"&&v.trim().length===0}),missingTags:r.filter(u=>{const v=u.attributes?.atlanTags;return!v||Array.isArray(v)&&v.length===0}),missingTerms:r.filter(u=>{const v=u.attributes?.meanings;return!v||Array.isArray(v)&&v.length===0})},d=new Map,N=new Map;r.forEach(u=>{const v=u.database||u.databaseName,C=u.databaseQualifiedName;if(v){const w=d.get(v);d.set(v,{count:(w?.count||0)+1,qualifiedName:C||w?.qualifiedName})}const A=u.schema||u.schemaName,b=u.schemaQualifiedName;if(A&&v){const w=`${v}.${A}`,k=N.get(w);N.set(w,{count:(k?.count||0)+1,qualifiedName:b||k?.qualifiedName,database:v})}});const f={databases:Array.from(d.entries()).map(([u,v])=>({name:u,qualifiedName:v.qualifiedName,assetCount:v.count})).sort((u,v)=>v.assetCount-u.assetCount),schemas:Array.from(N.entries()).map(([u,v])=>({name:u.split(".")[1],qualifiedName:v.qualifiedName,assetCount:v.count,parent:v.database})).sort((u,v)=>v.assetCount-u.assetCount)},j=i.map(u=>({setName:u.setName,attributes:u.attributes.map(v=>({key:v.key,type:v.type,count:v.count}))}));return{totalAssets:o,importedAt:a?.importedAt||null,connector:a?.connector||null,assetBreakdown:x,metadataCoverage:p,gaps:y,hierarchySuggestions:f,existingTags:t,existingBusinessAttributes:j}},[s,a,t,i,l,n])}const $s={ownerUsers:"Owners",ownerGroups:"Owner Groups",description:"Descriptions",userDescription:"User Descriptions",readme:"README",atlanTags:"Tags",certificateStatus:"Certificate",glossaryTerms:"Glossary Terms",meanings:"Glossary Terms",lineage:"Lineage",accessPolicies:"Access Policies",customMetadata:"Custom Metadata",starredBy:"Starred",links:"Links"};function Ls(s){const a=s.metadataCoverage.map(n=>({field:n.field,label:n.label,count:n.count,total:n.total,percentage:n.percentage,coveragePercent:n.percentage/100})),t=s.metadataCoverage.map(n=>({field:n.field==="meanings"?"glossaryTerms":n.field,totalAssets:n.total,populatedAssets:n.count,coveragePercent:n.percentage/100})),i=s.metadataCoverage.length>0?Math.round(s.metadataCoverage.reduce((n,r)=>n+r.percentage,0)/s.metadataCoverage.length):0,l=s.assetBreakdown.map(n=>({type:n.type,count:n.count,percentage:n.percentage}));return{totalAssets:s.totalAssets,assetBreakdown:l,metadataCoverage:a,fieldCoverage:t,healthScore:i,gaps:{missingOwners:s.gaps.missingOwners.length,missingDescriptions:s.gaps.missingDescriptions.length,missingTags:s.gaps.missingTags.length,missingTerms:s.gaps.missingTerms.length},importedGaps:{missingOwners:s.gaps.missingOwners.length,missingDescriptions:s.gaps.missingDescriptions.length,missingTags:s.gaps.missingTags.length,missingTerms:s.gaps.missingTerms.length},hierarchySuggestions:s.hierarchySuggestions,existingTags:s.existingTags,existingBusinessAttributes:s.existingBusinessAttributes,importedAt:s.importedAt,connector:s.connector,importedAssetCount:s.totalAssets,priorities:[],patternMatches:[],quickWins:[],validationIssues:[],audit:null}}function Fs(s,a){if(!s)return oe();const t=a.map(r=>({field:r.field,label:$s[r.field]||r.field,count:r.populatedAssets,total:r.totalAssets,percentage:Math.round(r.coveragePercent*100),coveragePercent:r.coveragePercent})),i=s.assetBreakdown.map(r=>({type:r.assetType,count:r.count,percentage:Math.round(r.count/s.summary.totalAssets*100)})),l=s.summary.overallCompletenessScore,n={missingOwners:s.summary.totalAssets-s.summary.assetsWithOwner,missingDescriptions:s.summary.totalAssets-s.summary.assetsWithDescription,missingTags:s.summary.totalAssets-s.summary.assetsWithTags,missingTerms:s.summary.totalAssets-s.summary.assetsWithGlossary};return{totalAssets:s.summary.totalAssets,assetBreakdown:i,metadataCoverage:t,fieldCoverage:a,healthScore:l,gaps:n,importedGaps:null,hierarchySuggestions:{databases:[],schemas:[]},existingTags:[],existingBusinessAttributes:[],importedAt:null,connector:null,importedAssetCount:0,audit:s}}function oe(){return{totalAssets:0,assetBreakdown:[],metadataCoverage:[],fieldCoverage:[],healthScore:0,gaps:{missingOwners:0,missingDescriptions:0,missingTags:0,missingTerms:0},importedGaps:null,hierarchySuggestions:{databases:[],schemas:[]},existingTags:[],existingBusinessAttributes:[],importedAt:null,connector:null,importedAssetCount:0,priorities:[],patternMatches:[],quickWins:[],validationIssues:[],audit:null}}function Os(){const s=R(o=>o.assets),a=Rs(),t=hs(),i=h.useMemo(()=>{const o=s.length>0,c=t.isConnected&&!t.usingSampleData;return o&&c?"hybrid":o?"imported":c?"live":"none"},[s.length,t.isConnected,t.usingSampleData]),l=h.useMemo(()=>{const o=s.length>0,c=t.isConnected&&!t.usingSampleData,x=o?Ls(a):oe(),g=c?Fs(t.audit,t.fieldCoverage):oe();return i==="imported"?x:i==="live"?g:i==="hybrid"?{...x,...g,importedAt:x.importedAt??null,connector:x.connector??null,importedAssetCount:x.importedAssetCount??(o?s.length:0),importedGaps:x.importedGaps??null,hierarchySuggestions:x.hierarchySuggestions??{databases:[],schemas:[]},existingTags:x.existingTags??[],existingBusinessAttributes:x.existingBusinessAttributes??[]}:oe()},[i,a,s.length,t.isConnected,t.usingSampleData,t.audit,t.fieldCoverage]),n=h.useMemo(()=>({isConnected:t.isConnected,dataSource:t.dataSource==="sample"?null:t.dataSource,username:t.connection.username,email:t.connection.email,tenantId:t.connection.tenantId,baseUrl:t.connection.baseUrl}),[t.isConnected,t.dataSource,t.connection]),r=h.useCallback(async()=>{await t.refresh()},[t]);return{mode:i,isLoading:t.loading,error:t.error,lastUpdated:t.lastFetched,totalAssets:l.totalAssets??0,assetBreakdown:l.assetBreakdown??[],metadataCoverage:l.metadataCoverage??[],fieldCoverage:l.fieldCoverage??[],healthScore:l.healthScore??0,gaps:l.gaps??{missingOwners:0,missingDescriptions:0,missingTags:0,missingTerms:0},importedGaps:l.importedGaps??null,validationIssues:l.validationIssues??[],hierarchySuggestions:l.hierarchySuggestions??{databases:[],schemas:[]},existingTags:l.existingTags??[],existingBusinessAttributes:l.existingBusinessAttributes??[],priorities:l.priorities??[],patternMatches:l.patternMatches??[],quickWins:l.quickWins??[],audit:l.audit??null,importedAt:l.importedAt??null,connector:l.connector??null,importedAssetCount:l.importedAssetCount??0,connection:n,refresh:r,connectAtlan:t.connectAtlan,connectMDLH:t.connectMDLH,disconnect:t.disconnect}}function Gs({mode:s,connector:a,importedAt:t,username:i,dataSource:l,lastUpdated:n,onConnect:r}){return s==="none"?e.jsxs("div",{className:"explore-banner explore-banner-warning",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"No Data Available"}),e.jsx("span",{className:"text-sm ml-2 opacity-80",children:"Import assets or connect to Atlan to explore your metadata"})]})]}),r&&e.jsx("button",{onClick:r,className:"px-4 py-1.5 text-sm font-medium rounded-lg transition-colors",style:{background:"rgba(191, 135, 0, 0.15)"},children:"Connect to Atlan"})]}):s==="imported"?e.jsxs("div",{className:"explore-banner explore-banner-info",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{size:18}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Imported Data"}),a&&e.jsxs("span",{className:"text-sm ml-2 opacity-80",children:["from ",a]}),t&&e.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["on ",new Date(t).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"badge badge-info text-xs",children:[e.jsx(K,{size:12,className:"mr-1"}),"Imported"]})})]}):s==="hybrid"?e.jsxs("div",{className:"explore-banner explore-banner-success",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{size:18}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium",children:["Connected to ",l==="atlan"?"Atlan":"MDLH"]}),i&&e.jsxs("span",{className:"text-sm ml-2 opacity-80",children:["as ",i]}),n&&e.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["Last updated: ",n.toLocaleTimeString()]}),a&&e.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["• Imported baseline: ",a]}),t&&e.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["on ",new Date(t).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"badge badge-info text-xs",children:[e.jsx(K,{size:12,className:"mr-1"}),"Imported"]}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-current animate-pulse"}),e.jsx("span",{className:"text-xs font-medium",children:"Live"})]})]}):e.jsxs("div",{className:"explore-banner explore-banner-success",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{size:18}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium",children:["Connected to ",l==="atlan"?"Atlan":"MDLH"]}),i&&e.jsxs("span",{className:"text-sm ml-2 opacity-80",children:["as ",i]}),n&&e.jsxs("span",{className:"text-sm ml-2 opacity-70",children:["Last updated: ",n.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-current animate-pulse"}),e.jsx("span",{className:"text-xs font-medium",children:"Live"})]})]})}function Us({mode:s,dataSource:a,isConnecting:t,onClick:i}){const l=()=>t?"bg-blue-500":s==="live"||s==="hybrid"?"bg-green-500":s==="imported"?"bg-blue-500":"bg-gray-300",n=()=>t?"Connecting...":s==="live"?`Connected (${a})`:s==="hybrid"?`Connected (${a}) + Imported`:s==="imported"?"Imported":"Not Connected";return e.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${s!=="none"?"border-green-200 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}`,children:[t?e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}):e.jsx("span",{className:`w-2 h-2 rounded-full ${l()}`}),e.jsx(G,{size:14}),e.jsx("span",{className:"text-sm font-medium",children:n()})]})}function ne({label:s,value:a,sublabel:t,icon:i,iconBgClass:l="bg-blue-100",iconColorClass:n="text-blue-600",trend:r,progress:o,valueColor:c}){const x=()=>r?r.direction==="up"?"↑":r.direction==="down"?"↓":"→":null,g=()=>r?r.direction==="up"?"text-green-600":r.direction==="down"?"text-red-600":"text-gray-500":"",p=()=>{if(!o)return"";switch(o.color){case"green":return"var(--success-color)";case"amber":return"var(--warning-color)";case"red":return"var(--error-color)";default:return"var(--primary-blue)"}};return e.jsxs("div",{className:"explore-stat-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--explore-text-secondary)"},children:s}),e.jsx("div",{className:`explore-stat-icon ${l}`,children:e.jsx(i,{size:16,className:n})})]}),e.jsx("div",{className:"text-3xl font-bold",style:{color:c||"var(--explore-text-primary)"},children:typeof a=="number"?a.toLocaleString():a}),t&&e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--explore-text-muted)"},children:t}),r&&e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${g()}`,children:[e.jsx("span",{children:x()}),e.jsx("span",{children:r.value})]}),o&&e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:"h-1.5 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,o.value))}%`,backgroundColor:p()}})})]})}const Bs={ownerUsers:me,ownerGroups:me,description:J,userDescription:J,readme:J,atlanTags:de,glossaryTerms:je,meanings:je,certificateStatus:Ze,lineage:Xe,accessPolicies:ce,customMetadata:Me,starredBy:Ke,links:Je};function _s({field:s,label:a,percentage:t,count:i,total:l,showIcon:n=!0,showDetails:r=!0,size:o="md"}){const c=Bs[s]||J,x=d=>d>=80?"high":d>=50?"medium":"low",g=d=>d>=80?"var(--success-color)":d>=50?"var(--warning-color)":"var(--error-color)",p=x(t),y=o==="sm"?"h-1.5":o==="lg"?"h-3":"h-2";return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx(c,{size:o==="sm"?12:o==="lg"?18:14,style:{color:"var(--explore-text-muted)"}}),e.jsx("span",{className:`font-medium ${o==="sm"?"text-xs":"text-sm"}`,style:{color:"var(--explore-text-secondary)"},children:a})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-medium ${o==="sm"?"text-xs":"text-sm"}`,style:{color:g(t)},children:[t,"%"]}),i!==void 0&&l!==void 0&&e.jsxs("span",{className:"text-xs",style:{color:"var(--explore-text-muted)"},children:["(",i.toLocaleString()," / ",l.toLocaleString(),")"]})]})]}),e.jsx("div",{className:`coverage-bar ${y}`,children:e.jsx("div",{className:`coverage-bar-fill ${p}`,style:{width:`${Math.min(100,Math.max(0,t))}%`}})})]})}function Vs({data:s,onNavigate:a,onSimulateField:t,onSwitchTab:i}){const{totalAssets:l,assetBreakdown:n,metadataCoverage:r,healthScore:o,gaps:c,mode:x,importedAssetCount:g}=s,y=E(u=>u.plans).filter(u=>u.status==="in-progress"||u.status==="draft"),N=(u=>u>=70?{label:"Low Risk",color:"var(--success-color)"}:u>=40?{label:"Medium Risk",color:"var(--warning-color)"}:{label:"High Risk",color:"var(--error-color)"})(o),j=(u=>u>=90?{grade:"A",color:"var(--success-color)",bg:"var(--success-bg-color)"}:u>=80?{grade:"B",color:"var(--success-color)",bg:"var(--success-bg-color)"}:u>=70?{grade:"C",color:"var(--warning-color)",bg:"var(--warning-bg-color)"}:u>=60?{grade:"D",color:"var(--warning-color)",bg:"var(--warning-bg-color)"}:{grade:"F",color:"var(--error-color)",bg:"var(--error-bg-color)"})(o);return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ne,{label:"Total Assets",value:l,sublabel:x==="imported"?"Imported":x==="hybrid"?`Live from Atlan • Imported baseline: ${g.toLocaleString()}`:x==="live"?"Live from Atlan":"No data",icon:Z,iconBgClass:"bg-purple-100",iconColorClass:"text-purple-600"}),e.jsx(ne,{label:"Asset Types",value:n.length,sublabel:n.slice(0,3).map(u=>u.type).join(", "),icon:X,iconBgClass:"bg-blue-100",iconColorClass:"text-blue-600"}),e.jsx(ne,{label:"Health Score",value:`${o}%`,sublabel:N.label,icon:o>=70?ze:W,iconBgClass:o>=70?"bg-green-100":"bg-red-100",iconColorClass:o>=70?"text-green-600":"text-red-600",valueColor:j.color,progress:{value:o,color:o>=70?"green":o>=40?"amber":"red"}}),e.jsx(ne,{label:"Tags Found",value:s.existingTags.length,sublabel:"Unique classifications",icon:de,iconBgClass:"bg-amber-100",iconColorClass:"text-amber-600"})]}),y.length>0&&e.jsx("div",{className:"explore-card p-4 bg-blue-50 border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(Ie,{size:20})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-blue-900",children:[y.length," Enrichment Plan",y.length!==1?"s":""]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[y.reduce((u,v)=>u+(v.progress?.reduce((C,A)=>C+A.currentCount,0)||0),0)," assets enriched so far"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>i&&i("assets"),className:"px-4 py-2 bg-white text-blue-600 text-sm font-medium rounded-md border border-blue-200 hover:bg-blue-50 transition-colors flex items-center gap-2",children:["View Assets",e.jsx(Z,{size:16})]}),e.jsxs("button",{onClick:()=>i&&i("plans"),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-sm",children:["View Plans",e.jsx(es,{size:16})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"explore-card p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base font-semibold",style:{color:"var(--explore-text-primary)"},children:"Metadata Coverage"}),a&&e.jsxs("button",{onClick:()=>a("requirements"),className:"text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[e.jsx(X,{size:12}),"View Full Matrix"]})]}),e.jsxs("div",{className:"space-y-4",children:[r.map(u=>e.jsx(_s,{field:u.field,label:u.label,percentage:u.percentage,count:u.count,total:u.total},u.field)),r.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No coverage data available"})]})]}),(c.missingOwners>0||c.missingDescriptions>0||c.missingTags>0||c.missingTerms>0)&&e.jsxs("div",{className:"explore-card p-5",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:"var(--explore-text-primary)"},children:"Gaps Identified"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[c.missingOwners>0&&e.jsxs("div",{className:"explore-gap-card critical",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(me,{size:14,style:{color:"var(--error-color)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--error-color)"},children:"Missing Owners"})]}),e.jsx("p",{className:"text-xl font-semibold",style:{color:"var(--error-color)"},children:c.missingOwners.toLocaleString()})]}),c.missingDescriptions>0&&e.jsxs("div",{className:"explore-gap-card critical",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{size:14,style:{color:"var(--error-color)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--error-color)"},children:"No Description"})]}),e.jsx("p",{className:"text-xl font-semibold",style:{color:"var(--error-color)"},children:c.missingDescriptions.toLocaleString()})]}),c.missingTags>0&&e.jsxs("div",{className:"explore-gap-card warning",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{size:14,style:{color:"var(--warning-color)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--warning-color)"},children:"Untagged"})]}),e.jsx("p",{className:"text-xl font-semibold",style:{color:"var(--warning-color)"},children:c.missingTags.toLocaleString()})]}),c.missingTerms>0&&e.jsxs("div",{className:"explore-gap-card warning",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(je,{size:14,style:{color:"var(--warning-color)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--warning-color)"},children:"No Terms"})]}),e.jsx("p",{className:"text-xl font-semibold",style:{color:"var(--warning-color)"},children:c.missingTerms.toLocaleString()})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"explore-card p-5",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",style:{color:"var(--explore-text-primary)"},children:"Health Grade"}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl text-4xl font-bold",style:{background:j.bg,color:j.color},children:j.grade}),e.jsxs("p",{className:"mt-3 text-2xl font-bold",style:{color:j.color},children:[o,"%"]}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--explore-text-secondary)"},children:"Overall Completeness"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",style:{borderColor:"var(--explore-border)"},children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wider mb-3",style:{color:"var(--explore-text-muted)"},children:"Quick Actions"}),e.jsx("div",{className:"space-y-2",children:r.filter(u=>u.percentage<50).slice(0,3).map(u=>e.jsxs("button",{onClick:()=>t?.(u.field),className:"w-full text-left p-2 rounded-lg hover:bg-gray-50 transition-colors text-sm",style:{color:"var(--explore-text-secondary)"},children:[e.jsxs("span",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Improve ",u.label]}),e.jsx(Ee,{size:14,className:"text-green-500"})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Currently at ",u.percentage,"%"]})]},u.field))})]})]})})]})]})}function Qs(s){if(s.type==="connector")return e.jsx(G,{size:16,className:"text-indigo-500"});if(s.type==="database")return e.jsx(G,{size:16,className:"text-blue-500"});if(s.type==="schema")return e.jsx(ee,{size:16,className:"text-amber-500"});switch(s.assetType||s.asset?.normalizedType){case"Database":return e.jsx(G,{size:16,className:"text-blue-500"});case"Schema":return e.jsx(ee,{size:16,className:"text-amber-500"});case"Table":return e.jsx(Se,{size:16,className:"text-emerald-500"});case"View":return e.jsx(ge,{size:16,className:"text-purple-500"});case"Column":return e.jsx(ue,{size:16,className:"text-slate-500"});case"Dashboard":return e.jsx(X,{size:16,className:"text-pink-500"});case"Report":return e.jsx(Ue,{size:16,className:"text-orange-500"});case"Pipeline":return e.jsx(pe,{size:16,className:"text-cyan-500"});default:return e.jsx(pe,{size:16,className:"text-slate-400"})}}const Hs=h.memo(function s({node:a,level:t,onDragStart:i,onAssetClick:l,selectedAssetGuids:n}){const[r,o]=h.useState(t<2),c=a.children.length>0,x=a.type==="asset"&&a.asset,g=x&&a.asset&&n?.has(a.asset.guid),p=x&&a.asset?.addedToCanvas,y=h.useCallback(()=>{c&&o(f=>!f)},[c]),d=h.useCallback(f=>{a.asset&&(f.dataTransfer.setData("application/json",JSON.stringify({type:"catalog-asset",asset:a.asset,node:{id:a.id,name:a.name,type:a.type,assetType:a.assetType,assetCount:a.assetCount}})),f.dataTransfer.effectAllowed="copy",i(a.asset,a))},[a,i]),N=h.useCallback(()=>{x&&a.asset&&l?l(a.asset):y()},[x,a.asset,l,y]);return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:`
          flex items-center gap-1 py-1.5 px-2 rounded-lg cursor-pointer
          transition-colors duration-150
          ${g?"bg-blue-100 border border-blue-300":"hover:bg-slate-100"}
          ${p?"opacity-50":""}
        `,style:{paddingLeft:`${t*16+8}px`},onClick:N,draggable:!!x,onDragStart:d,children:[e.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),y()},className:`p-0.5 rounded hover:bg-slate-200 ${c?"":"invisible"}`,children:r?e.jsx(Re,{size:14,className:"text-slate-400"}):e.jsx(_,{size:14,className:"text-slate-400"})}),x&&e.jsx("div",{className:"p-0.5 rounded cursor-grab hover:bg-slate-200 active:cursor-grabbing",onMouseDown:f=>f.stopPropagation(),children:e.jsx(Ge,{size:14,className:"text-slate-400"})}),e.jsx("span",{className:"flex-shrink-0",children:Qs(a)}),e.jsx("span",{className:"flex-1 truncate text-sm text-slate-700",children:a.name}),a.assetCount>0&&a.type!=="asset"&&e.jsx("span",{className:"text-xs text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded-full",children:a.assetCount}),p&&e.jsxs("span",{className:"text-xs text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Te,{size:10}),"on canvas"]}),x&&a.assetType&&!p&&e.jsx("span",{className:"text-[10px] uppercase text-slate-400 font-medium",children:a.assetType})]}),r&&c&&e.jsx("div",{children:a.children.map(f=>e.jsx(s,{node:f,level:t+1,onDragStart:i,onAssetClick:l,selectedAssetGuids:n},f.id))})]})});function Ws({hierarchy:s,onDragStart:a,onAssetClick:t,selectedAssetGuids:i}){return s.length===0?e.jsx("div",{className:"flex items-center justify-center h-32 text-slate-500 text-sm",children:"No assets to display"}):e.jsx("div",{className:"py-2",children:s.map(l=>e.jsx(Hs,{node:l,level:0,onDragStart:a,onAssetClick:t,selectedAssetGuids:i},l.id))})}function Ys(s){switch(s){case"Database":return e.jsx(G,{size:16,className:"text-blue-500"});case"Schema":return e.jsx(ee,{size:16,className:"text-amber-500"});case"Table":return e.jsx(Se,{size:16,className:"text-emerald-500"});case"View":return e.jsx(ge,{size:16,className:"text-purple-500"});case"Column":return e.jsx(ue,{size:16,className:"text-slate-500"});case"Dashboard":return e.jsx(X,{size:16,className:"text-pink-500"});case"Report":return e.jsx(Ue,{size:16,className:"text-orange-500"});case"Pipeline":return e.jsx(pe,{size:16,className:"text-cyan-500"});default:return e.jsx(pe,{size:16,className:"text-slate-400"})}}function Js(s){switch(s){case"Database":return"bg-blue-50";case"Schema":return"bg-amber-50";case"Table":return"bg-emerald-50";case"View":return"bg-purple-50";case"Column":return"bg-slate-50";case"Dashboard":return"bg-pink-50";case"Report":return"bg-orange-50";default:return"bg-slate-50"}}function Ks({asset:s,isSelected:a,onToggleSelect:t,onDragStart:i}){const l=h.useCallback(n=>{n.dataTransfer.setData("application/json",JSON.stringify({type:"catalog-asset",asset:s})),n.dataTransfer.effectAllowed="copy",i([s])},[s,i]);return e.jsxs("div",{className:`
        flex items-center gap-3 px-3 py-2.5 border-b border-slate-100
        transition-colors duration-150 cursor-pointer
        ${a?"bg-blue-50":"hover:bg-slate-50"}
        ${s.addedToCanvas?"opacity-50":""}
      `,onClick:()=>t(s.guid),draggable:!0,onDragStart:l,children:[e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),t(s.guid)},className:"text-slate-400 hover:text-blue-600",children:a?e.jsx(we,{size:18,className:"text-blue-600"}):e.jsx(Be,{size:18})}),e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-slate-300 hover:text-slate-500",children:e.jsx(Ge,{size:16})}),e.jsx("span",{className:`p-1.5 rounded ${Js(s.normalizedType)}`,children:Ys(s.normalizedType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm text-slate-800 truncate",children:s.name}),s.addedToCanvas&&e.jsxs("span",{className:"text-xs text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Te,{size:10}),"on canvas"]})]}),e.jsx("div",{className:"text-xs text-slate-500 truncate",children:s.database&&s.schema?`${s.database} / ${s.schema}`:s.qualifiedName})]}),e.jsx("span",{className:"text-[10px] uppercase text-slate-400 font-medium px-2 py-1 bg-slate-100 rounded",children:s.normalizedType}),s.connectorName&&e.jsx("span",{className:"text-[10px] text-slate-500 px-2 py-1 bg-slate-50 rounded border border-slate-200",children:s.connectorName})]})}function Xs({assets:s,searchQuery:a,selectedGuids:t,onToggleSelect:i,onSelectAll:l,onDeselectAll:n,onDragStart:r}){const o=h.useMemo(()=>{if(!a.trim())return s;const p=a.toLowerCase();return s.filter(y=>y.name.toLowerCase().includes(p)||y.qualifiedName.toLowerCase().includes(p)||(y.connectorName||"").toLowerCase().includes(p)||y.normalizedType.toLowerCase().includes(p))},[s,a]),c=h.useMemo(()=>{const p={};return o.forEach(d=>{const N=d.normalizedType;p[N]||(p[N]=[]),p[N].push(d)}),["Database","Schema","Table","View","Column","Dashboard","Report","Dataset","API","Pipeline","Query","Other"].filter(d=>(p[d]?.length??0)>0).map(d=>({type:d,assets:p[d]??[]}))},[o]),x=o.length>0&&o.every(p=>t.has(p.guid)),g=o.some(p=>t.has(p.guid));return o.length===0?e.jsx("div",{className:"flex items-center justify-center h-32 text-slate-500 text-sm",children:a?"No assets match your search":"No assets to display"}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:x?n:l,className:"text-slate-500 hover:text-blue-600",children:x?e.jsx(we,{size:18,className:"text-blue-600"}):g?e.jsx(we,{size:18,className:"text-blue-400"}):e.jsx(Be,{size:18})}),e.jsx("span",{className:"text-sm text-slate-600",children:t.size>0?`${t.size} selected`:`${o.length} assets`})]}),t.size>0&&e.jsx("button",{type:"button",onClick:n,className:"text-xs text-slate-500 hover:text-slate-700",children:"Clear selection"})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:c.map(({type:p,assets:y})=>e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-1.5 bg-slate-100 border-b border-slate-200",children:e.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[p," (",y.length,")"]})}),y.map(d=>e.jsx(Ks,{asset:d,isSelected:t.has(d.guid),onToggleSelect:i,onDragStart:r},d.guid))]},p))})]})}function Zs({isOpen:s,entityName:a,entityType:t,childCounts:i,onConfirm:l,onCancel:n}){const[r,o]=h.useState(!1);if(!s)return null;const c=i.total>0,x=i.columns>0,g=i.schemas+i.tables,p=r?i.total:g;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t==="Database"?e.jsx(G,{size:20,className:"text-blue-600"}):e.jsx(ee,{size:20,className:"text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:"Add to Canvas"}),e.jsx("p",{className:"text-sm text-slate-500",children:a})]})]}),e.jsx("button",{type:"button",onClick:n,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400",children:e.jsx($e,{size:20})})]}),e.jsx("div",{className:"px-5 py-4",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["This ",t.toLowerCase()," contains child assets. Would you like to include them?"]}),e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.schemas>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[e.jsx(ee,{size:16,className:"text-amber-500"}),e.jsx("span",{className:"text-lg font-semibold text-slate-800",children:i.schemas})]}),e.jsx("span",{className:"text-xs text-slate-500",children:i.schemas===1?"Schema":"Schemas"})]}),i.tables>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[e.jsx(Se,{size:16,className:"text-emerald-500"}),e.jsx("span",{className:"text-lg font-semibold text-slate-800",children:i.tables})]}),e.jsx("span",{className:"text-xs text-slate-500",children:i.tables===1?"Table":"Tables"})]}),i.columns>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[e.jsx(ue,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"text-lg font-semibold text-slate-800",children:i.columns})]}),e.jsx("span",{className:"text-xs text-slate-500",children:i.columns===1?"Column":"Columns"})]})]})}),x&&e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-100 rounded-lg mb-4 cursor-pointer hover:bg-slate-150 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:y=>o(y.target.checked),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{size:16,className:"text-purple-500"}),e.jsxs("span",{className:"text-sm text-slate-700",children:["Include ",i.columns," column",i.columns!==1?"s":""]})]})]}),p>50&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg mb-4",children:[e.jsx(U,{size:18,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-800",children:"Adding many entities at once may affect performance. Consider adding schemas individually."})]})]}):e.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Add this ",t.toLowerCase()," to the canvas?"]})}),e.jsxs("div",{className:"flex gap-3 px-5 py-4 bg-slate-50 border-t border-slate-200",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),c?e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:["Only ",t]}),e.jsxs("button",{type:"button",onClick:()=>l(!0,r),className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:["Include All (",p+1,")"]})]}):e.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Add to Canvas"})]})]})]})}function et(s){const a=[];a.push({id:M(),name:"qualifiedName",displayName:"Qualified Name",type:"string",required:!0,description:"Unique identifier in Atlan",value:s.qualifiedName}),a.push({id:M(),name:"name",displayName:"Name",type:"string",required:!0,value:s.name});const t=s.attributes||{};if(t.description&&a.push({id:M(),name:"description",displayName:"Description",type:"string",required:!1,value:t.description}),t.userDescription&&a.push({id:M(),name:"userDescription",displayName:"User Description",type:"string",required:!1,value:t.userDescription}),t.ownerUsers&&Array.isArray(t.ownerUsers)&&t.ownerUsers.length>0&&a.push({id:M(),name:"ownerUsers",displayName:"Owners",type:"array",required:!1,value:t.ownerUsers.join(", ")}),t.certificateStatus&&a.push({id:M(),name:"certificateStatus",displayName:"Certificate",type:"string",required:!1,value:t.certificateStatus}),t.connectionName&&a.push({id:M(),name:"connectionName",displayName:"Connection",type:"string",required:!1,value:t.connectionName}),t.atlanTags&&Array.isArray(t.atlanTags)&&t.atlanTags.length>0){const l=t.atlanTags.map(n=>n.typeName);a.push({id:M(),name:"atlanTags",displayName:"Tags",type:"array",required:!1,value:l.join(", ")})}if(t.meanings&&Array.isArray(t.meanings)&&t.meanings.length>0){const l=t.meanings.map(n=>n.displayText);a.push({id:M(),name:"glossaryTerms",displayName:"Glossary Terms",type:"array",required:!1,value:l.join(", ")})}if(t.ownerGroups&&Array.isArray(t.ownerGroups)&&t.ownerGroups.length>0&&a.push({id:M(),name:"ownerGroups",displayName:"Owner Groups",type:"array",required:!1,value:t.ownerGroups.join(", ")}),t.readme&&a.push({id:M(),name:"readme",displayName:"README",type:"string",required:!1,value:t.readme}),t.links&&Array.isArray(t.links)&&t.links.length>0&&a.push({id:M(),name:"links",displayName:"Links",type:"array",required:!1,value:JSON.stringify(t.links)}),t.starredCount&&typeof t.starredCount=="number"&&t.starredCount>0&&a.push({id:M(),name:"starredBy",displayName:"Starred By",type:"number",required:!1,value:t.starredCount}),(t.__hasLineage===!0||typeof t.inputToProcesses<"u"&&Array.isArray(t.inputToProcesses)&&t.inputToProcesses.length>0||typeof t.outputFromProcesses<"u"&&Array.isArray(t.outputFromProcesses)&&t.outputFromProcesses.length>0)&&a.push({id:M(),name:"lineage",displayName:"Lineage",type:"boolean",required:!1,value:!0}),t.businessAttributes&&typeof t.businessAttributes=="object"){const l=Object.keys(t.businessAttributes);l.length>0&&a.push({id:M(),name:"customMetadata",displayName:"Custom Metadata",type:"string",required:!1,value:l.join(", ")})}return t.accessPolicies&&Array.isArray(t.accessPolicies)&&t.accessPolicies.length>0&&a.push({id:M(),name:"accessPolicies",displayName:"Access Policies",type:"array",required:!1,value:`${t.accessPolicies.length} policies`}),a}const st={Database:{category:"SQL",assetType:"Database"},Schema:{category:"SQL",assetType:"Schema"},Table:{category:"SQL",assetType:"Table"},View:{category:"SQL",assetType:"View"},Column:{category:"SQL",assetType:"Column"},Query:{category:"Custom",assetType:"CustomEntity"},Dashboard:{category:"BI",assetType:"TableauDashboard"},Report:{category:"BI",assetType:"TableauWorksheet"},Dataset:{category:"BI",assetType:"PowerBIDataset"},API:{category:"API",assetType:"APIPath"},Pipeline:{category:"Airflow",assetType:"AirflowDag"},Other:{category:"Custom",assetType:"CustomEntity"}};function tt(s){if(s.length===0)return{minX:0,maxX:0,minY:0,maxY:0};let a=1/0,t=-1/0,i=1/0,l=-1/0;return s.forEach(n=>{a=Math.min(a,n.position.x),t=Math.max(t,n.position.x+280),i=Math.min(i,n.position.y),l=Math.max(l,n.position.y+200)}),{minX:a,maxX:t,minY:i,maxY:l}}function at(s,a={x:100,y:100}){const t=[],i=[],l=new Map,n=new Map,r=[],o=[],c=[],x=[],g=[];s.forEach(b=>{switch(b.normalizedType){case"Database":r.push(b);break;case"Schema":o.push(b);break;case"Table":case"View":c.push(b);break;case"Column":x.push(b);break;default:g.push(b)}});const p=200,y=320,d=120,N=5,f=(b,w,k)=>{const P=M(),D=st[b.normalizedType];l.set(b.guid,P),n.set(b.qualifiedName.toLowerCase(),{id:P,assetType:D.assetType,level:k});const $=et({guid:b.guid,name:b.name,qualifiedName:b.qualifiedName,typeName:b.typeName,connectorName:b.connectorName,attributes:b.attributes});return{id:P,name:b.qualifiedName||b.name,displayName:b.name,category:D.category,assetType:D.assetType,connectorName:b.connectorName,description:b.attributes.description||b.attributes.userDescription||"",attributes:$,relationships:[],position:w}},j=b=>{const w=b.split("/");if(w.length>1)return w.slice(0,-1).join("/").toLowerCase();const k=b.split(".");return k.length>1?k.slice(0,-1).join(".").toLowerCase():null};let u=a.y;if(r.forEach((b,w)=>{const k=Math.floor(w/N),P=w%N,D={x:a.x+P*y,y:u+k*d};t.push(f(b,D,0))}),r.length>0){const b=Math.ceil(r.length/N);u+=b*d+p}const v=u;if(o.forEach((b,w)=>{const k=Math.floor(w/N),P=w%N,D={x:a.x+P*y,y:v+k*d};t.push(f(b,D,1))}),o.length>0){const b=Math.ceil(o.length/N);u=v+b*d+p}const C=u;if(c.forEach((b,w)=>{const k=Math.floor(w/N),P=w%N,D={x:a.x+P*y,y:C+k*d};t.push(f(b,D,2))}),c.length>0){const b=Math.ceil(c.length/N);u=C+b*d+p}const A=u;if(x.forEach((b,w)=>{const k=Math.floor(w/N),P=w%N,D={x:a.x+P*y,y:A+k*d};t.push(f(b,D,3))}),x.length>0){const b=Math.ceil(x.length/N);u=A+b*d+p}return g.forEach((b,w)=>{const k=Math.floor(w/N),P=w%N,D={x:a.x+P*y,y:u+k*d};t.push(f(b,D,4))}),t.forEach(b=>{const w=j(b.name);if(!w)return;const k=n.get(w);if(!k)return;const P=n.get(b.name.toLowerCase());if(!P||k.level!==P.level-1)return;const D=M(),$={id:D,name:"contains",targetEntityId:b.id,cardinality:"one-to-many"},B=t.find(V=>V.id===k.id);B&&B.relationships.push($),i.push({id:M(),source:k.id,target:b.id,label:"contains",relationshipId:D})}),{entities:t,edges:i,guidToEntityId:l}}function ve(s,a){const t=s.qualifiedName.toLowerCase();let i=0,l=0,n=0;return a.forEach(r=>{const o=r.qualifiedName.toLowerCase();if(o!==t&&o.startsWith(t))switch(r.normalizedType){case"Schema":i++;break;case"Table":case"View":l++;break;case"Column":n++;break}}),{schemas:i,tables:l,columns:n,total:i+l+n}}function rt(s,a,t=!1){const i=s.qualifiedName.toLowerCase();return a.filter(l=>{const n=l.qualifiedName.toLowerCase();return!(n===i||!n.startsWith(i)||!t&&l.normalizedType==="Column")})}const nt=[];function it({onAssetsAdded:s}){const[a,t]=h.useState("tree"),[i,l]=h.useState(""),[n,r]=h.useState(new Set),[o,c]=h.useState({isOpen:!1,asset:null,childCounts:{schemas:0,tables:0,columns:0,total:0}}),[,x]=h.useState([]),g=R(m=>m.assets),p=R(m=>m.getHierarchy()),y=R(m=>m.markAddedToCanvas),d=le(m=>m.importEntities),N=le(m=>m.addEdges),f=le(m=>m.model.pages.find(q=>q.id===m.model.activePageId)?.entities||nt),j=h.useMemo(()=>{if(!i.trim())return g;const m=i.toLowerCase();return g.filter(T=>T.name.toLowerCase().includes(m)||T.qualifiedName.toLowerCase().includes(m)||(T.connectorName||"").toLowerCase().includes(m))},[g,i]),u=h.useCallback(m=>{if(m.normalizedType==="Database"||m.normalizedType==="Schema"){const q=ve(m,g);if(q.total>0){x([m]),c({isOpen:!0,asset:m,childCounts:q});return}}x([m])},[g]),v=h.useCallback(m=>{x(m)},[]),C=h.useCallback((m,T,q=!1)=>{let z=[...m];if(T){m.forEach(L=>{const ae=rt(L,g,q);z.push(...ae)});const O=new Set;z=z.filter(L=>O.has(L.guid)?!1:(O.add(L.guid),!0))}if(z=z.filter(O=>!O.addedToCanvas),z.length===0)return;const I=tt(f),F={x:I.maxX>0?I.maxX+100:100,y:100},{entities:S,edges:H}=at(z,F);d(S),H.length>0&&N(H),y(z.map(O=>O.guid)),r(new Set),x([]),s?.(S.length)},[g,f,d,N,y,s]),A=h.useCallback((m,T)=>{o.asset&&C([o.asset],m,T??!1),c({isOpen:!1,asset:null,childCounts:{schemas:0,tables:0,columns:0,total:0}})},[o.asset,C]),b=h.useCallback(()=>{c({isOpen:!1,asset:null,childCounts:{schemas:0,tables:0,columns:0,total:0}}),x([])},[]),w=h.useCallback(m=>{r(T=>{const q=new Set(T);return q.has(m)?q.delete(m):q.add(m),q})},[]),k=h.useCallback(()=>{r(new Set(j.map(m=>m.guid)))},[j]),P=h.useCallback(()=>{r(new Set)},[]),D=h.useCallback(()=>{const m=g.filter(q=>n.has(q.guid));if(m.length===0)return;const T=m.filter(q=>q.normalizedType!=="Database"&&q.normalizedType!=="Schema"?!1:ve(q,g).total>0);if(T.length===1){const q=T[0];c({isOpen:!0,asset:q,childCounts:ve(q,g)})}else C(m,!1)},[g,n,C]),$=h.useCallback(m=>{w(m.guid)},[w]),B=g.length,V=g.filter(m=>!m.addedToCanvas).length;return e.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:"Asset Browser"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[V," of ",B," assets available"]})]}),e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-slate-100 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>t("tree"),className:`p-1.5 rounded transition-colors ${a==="tree"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,title:"Tree View",children:e.jsx(Ds,{size:18})}),e.jsx("button",{type:"button",onClick:()=>t("list"),className:`p-1.5 rounded transition-colors ${a==="list"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,title:"List View",children:e.jsx(ys,{size:18})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search assets...",value:i,onChange:m=>l(m.target.value),className:"w-full pl-9 pr-8 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"}),i&&e.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx($e,{size:14})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a==="tree"?e.jsx(Ws,{hierarchy:p,onDragStart:u,onAssetClick:$,selectedAssetGuids:n}):e.jsx(Xs,{assets:j,searchQuery:i,selectedGuids:n,onToggleSelect:w,onSelectAll:k,onDeselectAll:P,onDragStart:v})}),n.size>0&&e.jsx("div",{className:"px-4 py-3 border-t border-slate-200 bg-slate-50",children:e.jsxs("button",{type:"button",onClick:D,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xe,{size:16}),"Add ",n.size," ",n.size===1?"Asset":"Assets"," to Canvas"]})}),e.jsx(Zs,{isOpen:o.isOpen,entityName:o.asset?.name||"",entityType:o.asset?.normalizedType||"Asset",childCounts:o.childCounts,onConfirm:A,onCancel:b})]})}function lt({data:s,onNavigate:a}){const{hierarchySuggestions:t,existingTags:i,existingBusinessAttributes:l,mode:n}=s,[r,o]=h.useState(0),c=R(g=>g.assets.length>0),x=h.useCallback(g=>{o(p=>p+g),setTimeout(()=>o(0),3e3)},[]);return n!=="imported"&&n!=="hybrid"&&!c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Import Required"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Asset browser and hierarchy suggestions are available after importing assets from Atlan."})]})}):e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[r>0&&e.jsxs("div",{className:"fixed top-20 right-6 z-50 flex items-center gap-2 px-4 py-3 bg-emerald-50 border border-emerald-200 rounded-lg shadow-lg animate-fadeIn",children:[e.jsx(se,{size:18,className:"text-emerald-600"}),e.jsxs("span",{className:"text-sm font-medium text-emerald-800",children:[r," ",r===1?"asset":"assets"," added to canvas"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(it,{onAssetsAdded:x})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium uppercase tracking-wider",style:{color:"var(--explore-text-muted)"},children:"Quick Actions"}),e.jsxs("div",{className:"explore-nav-card group cursor-pointer",onClick:()=>a?.("domains"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"explore-nav-card-icon",style:{background:"rgba(6, 182, 212, 0.1)"},children:e.jsx(Z,{size:18,style:{color:"rgb(6, 182, 212)"}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",style:{color:"var(--explore-text-primary)"},children:"Domain Structure"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--explore-text-muted)"},children:[t.databases.length," databases"]})]})]}),e.jsxs("button",{className:"w-full py-2 px-3 rounded-lg text-xs font-medium flex items-center justify-center gap-1 transition-colors",style:{background:"rgba(6, 182, 212, 0.1)",color:"rgb(6, 182, 212)"},children:["Create Domains",e.jsx(_,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"explore-nav-card group cursor-pointer",onClick:()=>a?.("taxonomy"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"explore-nav-card-icon",style:{background:"rgba(139, 92, 246, 0.1)"},children:e.jsx(de,{size:18,style:{color:"rgb(139, 92, 246)"}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",style:{color:"var(--explore-text-primary)"},children:"Taxonomy"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--explore-text-muted)"},children:[i.length," tags discovered"]})]})]}),e.jsxs("button",{className:"w-full py-2 px-3 rounded-lg text-xs font-medium flex items-center justify-center gap-1 transition-colors",style:{background:"rgba(139, 92, 246, 0.1)",color:"rgb(139, 92, 246)"},children:["Build Taxonomy",e.jsx(_,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"explore-nav-card group cursor-pointer",onClick:()=>a?.("custom-metadata"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"explore-nav-card-icon",style:{background:"rgba(245, 158, 11, 0.1)"},children:e.jsx(Me,{size:18,style:{color:"rgb(245, 158, 11)"}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",style:{color:"var(--explore-text-primary)"},children:"Custom Metadata"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--explore-text-muted)"},children:[l.length," schemas"]})]})]}),e.jsxs("button",{className:"w-full py-2 px-3 rounded-lg text-xs font-medium flex items-center justify-center gap-1 transition-colors",style:{background:"rgba(245, 158, 11, 0.1)",color:"rgb(245, 158, 11)"},children:["Design Metadata",e.jsx(_,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border",style:{background:"var(--explore-card-bg)",borderColor:"var(--explore-border)"},children:[e.jsx("h4",{className:"text-xs font-medium uppercase tracking-wider mb-2",style:{color:"var(--explore-text-muted)"},children:"Tip"}),e.jsxs("p",{className:"text-sm",style:{color:"var(--explore-text-secondary)"},children:["Drag assets from the browser to the ",e.jsx("strong",{children:"Model Canvas"})," to visualize relationships and design your metadata model."]})]})]})]})]})}function ot({matches:s,selectedPattern:a,onSelect:t}){return e.jsx("div",{className:"space-y-3",children:s.map(i=>{const l=a?.id===i.pattern.id;return e.jsxs("button",{onClick:()=>t(i.pattern),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${l?"border-blue-500 bg-blue-50":"border-gray-100 hover:border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:i.pattern.name}),i.readyToImplement&&e.jsx("span",{className:"badge badge-green text-xs",children:"Ready"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-medium ${i.matchScore>=70?"text-green-600":i.matchScore>=40?"text-amber-600":"text-red-600"}`,children:[i.matchScore,"%"]}),l&&e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--primary-blue)"},children:e.jsx(Te,{size:12,className:"text-white"})})]})]}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:i.pattern.description}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 mb-3",children:e.jsx("div",{className:"h-1.5 rounded-full transition-all",style:{width:`${i.matchScore}%`,backgroundColor:i.matchScore>=70?"#22c55e":i.matchScore>=40?"#f59e0b":"#ef4444"}})}),(i.requiredGaps.length>0||i.recommendedGaps.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i.requiredGaps.map(n=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"var(--error-bg-color)",color:"var(--error-color)"},children:Q(n)},n)),i.recommendedGaps.slice(0,2).map(n=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"var(--warning-bg-color)",color:"var(--warning-color)"},children:Q(n)},n)),i.recommendedGaps.length>2&&e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100",style:{color:"var(--text-muted)"},children:["+",i.recommendedGaps.length-2," more"]})]})]},i.pattern.id)})})}function ct({pattern:s,match:a,onViewPlan:t}){const i=s.fields.filter(r=>r.requirement==="required"),l=s.fields.filter(r=>r.requirement==="recommended"),n=s.fields.filter(r=>r.requirement==="optional");return e.jsxs("div",{className:"card p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:s.name}),a&&e.jsxs("span",{className:`badge ${a.matchScore>=70?"badge-green":a.matchScore>=40?"bg-amber-100 text-amber-700":"badge-red"}`,children:[a.matchScore,"% match"]})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:s.description})]}),e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9fafb"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(U,{size:14,style:{color:"var(--text-secondary)"}}),e.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"USE CASE"})]}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-primary)"},children:s.useCase})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(te,{size:14,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:s.suggestedTimeline})]}),s.prerequisites.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:14,style:{color:"var(--warning-color)"}}),e.jsxs("span",{style:{color:"var(--text-secondary)"},children:[s.prerequisites.length," prerequisites"]})]})]}),s.prerequisites.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Prerequisites"}),e.jsx("ul",{className:"space-y-1.5",children:s.prerequisites.map((r,o)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400"}),r]},o))})]}),i.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Required Fields"}),e.jsx("div",{className:"space-y-2",children:i.map(r=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--error-color)"}}),e.jsx("span",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:Q(r.field)}),a?.requiredGaps.includes(r.field)&&e.jsx("span",{className:"badge badge-red text-xs",children:"Gap"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:r.rationale})]},r.field))})]}),l.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Recommended Fields"}),e.jsx("div",{className:"space-y-2",children:l.map(r=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--warning-color)"}}),e.jsx("span",{className:"font-medium text-sm",style:{color:"var(--text-primary)"},children:Q(r.field)}),a?.recommendedGaps.includes(r.field)&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded-full bg-amber-100 text-amber-700",children:"Gap"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:r.rationale})]},r.field))})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Optional Fields"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full bg-gray-100",style:{color:"var(--text-secondary)"},children:Q(r.field)},r.field))})]}),t&&e.jsxs("button",{onClick:t,className:"btn-primary w-full justify-center",children:["View Implementation Plan",e.jsx(_,{size:16})]})]})}function Qe(s,a=.7){return Is.map(t=>{const i=t.fields.filter(y=>y.requirement==="required"),l=t.fields.filter(y=>y.requirement==="recommended"),n=[];let r=0;for(const y of i){const d=s.find(N=>N.field===y.field);d&&d.coveragePercent>=a?r+=1:n.push(y.field)}const o=[];let c=0;for(const y of l){const d=s.find(N=>N.field===y.field);d&&d.coveragePercent>=a?c+=1:o.push(y.field)}const x=i.length*2+l.length,g=r*2+c,p=x>0?g/x*100:0;return{pattern:t,matchScore:Math.round(p),requiredGaps:n,recommendedGaps:o,readyToImplement:n.length===0}}).sort((t,i)=>i.matchScore-t.matchScore)}const dt={id:"quick-discovery",name:"Quick Discovery",description:"Find data quickly with organized, searchable metadata",useCase:"I need to find data quickly",icon:"🔍",category:"discovery",entities:[{type:"Database",category:"SQL",suggestedName:"Analytics Database",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"ownerGroups",type:"group[]",required:!1},{name:"certificateStatus",type:"enum",required:!1,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"Schema",category:"SQL",suggestedName:"Reporting Schema",position:{x:400,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"Table",category:"SQL",suggestedName:"Customer Orders",position:{x:700,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"userDescription",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]},{name:"rowCount",type:"number",required:!1}]},{type:"Column",category:"SQL",suggestedName:"order_id",position:{x:1e3,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"dataType",type:"string",required:!0},{name:"isPrimaryKey",type:"boolean",required:!1}]},{type:"DataDomain",category:"DataMesh",suggestedName:"Sales Domain",position:{x:700,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]}],relationships:[{sourceType:"Database",targetType:"Schema",cardinality:"1:N",label:"contains"},{sourceType:"Schema",targetType:"Table",cardinality:"1:N",label:"contains"},{sourceType:"Table",targetType:"Column",cardinality:"1:N",label:"contains"},{sourceType:"Table",targetType:"DataDomain",cardinality:"N:1",label:"belongs to"}],customMetadata:[]},mt={id:"trusted-metrics",name:"Trusted Metrics",description:"Standardized business metrics with glossary-linked definitions",useCase:"I need standardized business metrics",icon:"📊",category:"governance",entities:[{type:"AtlasGlossary",category:"Glossary",suggestedName:"Business Metrics Glossary",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"AtlasGlossaryTerm",category:"Glossary",suggestedName:"Revenue",position:{x:400,y:100},attributes:[{name:"shortDescription",type:"string",required:!0},{name:"longDescription",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"TableauDashboard",category:"BI",suggestedName:"Revenue Dashboard",position:{x:100,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"PowerBIReport",category:"BI",suggestedName:"Executive Report",position:{x:400,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"Table",category:"SQL",suggestedName:"fact_revenue",position:{x:700,y:200},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"Column",category:"SQL",suggestedName:"total_revenue",position:{x:1e3,y:200},attributes:[{name:"description",type:"string",required:!0},{name:"dataType",type:"string",required:!0}]}],relationships:[{sourceType:"AtlasGlossary",targetType:"AtlasGlossaryTerm",cardinality:"1:N",label:"contains"},{sourceType:"AtlasGlossaryTerm",targetType:"Column",cardinality:"1:N",label:"defines"},{sourceType:"TableauDashboard",targetType:"Table",cardinality:"N:N",label:"sources from"},{sourceType:"PowerBIReport",targetType:"Table",cardinality:"N:N",label:"sources from"},{sourceType:"Table",targetType:"Column",cardinality:"1:N",label:"contains"}],customMetadata:[]},ut={id:"compliance",name:"Compliance & Access Control",description:"Enforce data compliance with tags, policies, and access control",useCase:"I need to enforce data compliance",icon:"🛡️",category:"governance",entities:[{type:"Table",category:"SQL",suggestedName:"customer_pii",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"Column",category:"SQL",suggestedName:"ssn",position:{x:400,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"dataType",type:"string",required:!0}]},{type:"Tag",category:"Governance",suggestedName:"PII",position:{x:700,y:100},attributes:[{name:"description",type:"string",required:!0}]},{type:"Persona",category:"Governance",suggestedName:"Data Analyst",position:{x:100,y:300},attributes:[{name:"description",type:"string",required:!0}]},{type:"Purpose",category:"Governance",suggestedName:"Marketing Analytics",position:{x:400,y:300},attributes:[{name:"description",type:"string",required:!0}]},{type:"AuthPolicy",category:"Governance",suggestedName:"PII Access Policy",position:{x:700,y:300},attributes:[{name:"description",type:"string",required:!0}]}],relationships:[{sourceType:"Table",targetType:"Column",cardinality:"1:N",label:"contains"},{sourceType:"Tag",targetType:"Column",cardinality:"N:N",label:"classifies"},{sourceType:"Persona",targetType:"AuthPolicy",cardinality:"1:N",label:"uses"},{sourceType:"Purpose",targetType:"AuthPolicy",cardinality:"1:N",label:"enforces"},{sourceType:"Purpose",targetType:"Tag",cardinality:"N:N",label:"targets"}],customMetadata:[{name:"DataClassification",displayName:"Data Classification",attributes:[{name:"sensitivityLevel",displayName:"Sensitivity Level",type:"enum",enumValues:["Public","Internal","Confidential","Restricted"],required:!0},{name:"dataRetentionDays",displayName:"Data Retention (Days)",type:"number",required:!1},{name:"complianceFramework",displayName:"Compliance Framework",type:"string",required:!1}]}]},xt={id:"root-cause-analysis",name:"Root Cause Analysis",description:"Debug data pipeline issues with lineage and orchestration visibility",useCase:"I need to debug data pipeline issues",icon:"🔬",category:"lineage",entities:[{type:"AirflowDag",category:"Orchestration",suggestedName:"etl_pipeline_dag",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"AirflowTask",category:"Orchestration",suggestedName:"transform_data_task",position:{x:400,y:100},attributes:[{name:"description",type:"string",required:!0}]},{type:"DbtSource",category:"dbt",suggestedName:"raw_events",position:{x:100,y:300},attributes:[{name:"description",type:"string",required:!0}]},{type:"DbtModel",category:"dbt",suggestedName:"stg_events",position:{x:400,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"dbtMaterialization",type:"enum",required:!0,enumValues:["view","table","incremental","ephemeral"]}]},{type:"Table",category:"SQL",suggestedName:"dim_events",position:{x:700,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"ColumnProcess",category:"Core",suggestedName:"event_transformation",position:{x:700,y:100},attributes:[{name:"description",type:"string",required:!1}]}],relationships:[{sourceType:"AirflowDag",targetType:"AirflowTask",cardinality:"1:N",label:"contains"},{sourceType:"AirflowTask",targetType:"DbtModel",cardinality:"N:N",label:"orchestrates"},{sourceType:"DbtSource",targetType:"DbtModel",cardinality:"N:N",label:"feeds into"},{sourceType:"DbtModel",targetType:"Table",cardinality:"1:1",label:"materializes to"},{sourceType:"ColumnProcess",targetType:"Table",cardinality:"N:N",label:"outputs to"}],customMetadata:[]},pt={id:"data-mesh",name:"Data Mesh",description:"Organize data by business domain with data products and contracts",useCase:"I want to organize data by business domain",icon:"🌐",category:"datamesh",entities:[{type:"DataDomain",category:"DataMesh",suggestedName:"Customer Domain",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"DataProduct",category:"DataMesh",suggestedName:"Customer 360",position:{x:400,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"dataProductStatus",type:"enum",required:!0,enumValues:["Active","Draft","Deprecated"]}]},{type:"DataContract",category:"DataMesh",suggestedName:"Customer 360 Contract",position:{x:700,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"Table",category:"SQL",suggestedName:"customer_profile",position:{x:400,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"Column",category:"SQL",suggestedName:"customer_id",position:{x:700,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"dataType",type:"string",required:!0},{name:"isPrimaryKey",type:"boolean",required:!1}]},{type:"AtlasGlossaryTerm",category:"Glossary",suggestedName:"Customer",position:{x:100,y:300},attributes:[{name:"shortDescription",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]}],relationships:[{sourceType:"DataDomain",targetType:"DataProduct",cardinality:"1:N",label:"contains"},{sourceType:"DataProduct",targetType:"DataContract",cardinality:"1:1",label:"has contract"},{sourceType:"DataProduct",targetType:"Table",cardinality:"1:N",label:"outputs"},{sourceType:"Table",targetType:"Column",cardinality:"1:N",label:"contains"},{sourceType:"AtlasGlossaryTerm",targetType:"Column",cardinality:"1:N",label:"defines"}],customMetadata:[]},gt={id:"ai-readiness",name:"AI Readiness",description:"Prepare data for AI initiatives with quality, governance, and lineage",useCase:"I need to prepare data for AI initiatives",icon:"🤖",category:"ai",entities:[{type:"Table",category:"SQL",suggestedName:"training_dataset",position:{x:100,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"certificateStatus",type:"enum",required:!0,enumValues:["VERIFIED","DRAFT","DEPRECATED"]}]},{type:"Column",category:"SQL",suggestedName:"feature_1",position:{x:400,y:100},attributes:[{name:"description",type:"string",required:!0},{name:"dataType",type:"string",required:!0}]},{type:"AtlasGlossaryTerm",category:"Glossary",suggestedName:"Churn Probability",position:{x:100,y:300},attributes:[{name:"shortDescription",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0}]},{type:"DataProduct",category:"DataMesh",suggestedName:"ML Feature Store",position:{x:400,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"ownerUsers",type:"user[]",required:!0},{name:"dataProductStatus",type:"enum",required:!0,enumValues:["Active","Draft","Deprecated"]}]},{type:"Tag",category:"Governance",suggestedName:"AI-Approved",position:{x:700,y:100},attributes:[{name:"description",type:"string",required:!0}]},{type:"AIModel",category:"AI",suggestedName:"Churn Prediction Model",position:{x:700,y:300},attributes:[{name:"description",type:"string",required:!0},{name:"aiModelStatus",type:"enum",required:!1,enumValues:["Development","Staging","Production","Deprecated"]}]}],relationships:[{sourceType:"Table",targetType:"Column",cardinality:"1:N",label:"contains"},{sourceType:"AtlasGlossaryTerm",targetType:"Column",cardinality:"1:N",label:"defines"},{sourceType:"DataProduct",targetType:"Table",cardinality:"1:N",label:"outputs"},{sourceType:"Tag",targetType:"Table",cardinality:"N:N",label:"classifies"},{sourceType:"AIModel",targetType:"Table",cardinality:"N:N",label:"trains on"}],customMetadata:[{name:"AIGovernance",displayName:"AI Governance",attributes:[{name:"dataQualityScore",displayName:"Data Quality Score",type:"number",required:!1},{name:"biasChecked",displayName:"Bias Checked",type:"boolean",required:!1},{name:"piiSanitized",displayName:"PII Sanitized",type:"boolean",required:!1},{name:"approvedForTraining",displayName:"Approved for Training",type:"boolean",required:!1},{name:"lastReviewDate",displayName:"Last Review Date",type:"date",required:!1}]}]},He=[dt,mt,ut,xt,pt,gt],ht=He.reduce((s,a)=>(s[a.id]=a,s),{});He.reduce((s,a)=>{const t=a.category;return s[t]||(s[t]=[]),s[t].push(a),s},{});const ft={"quick-discovery":"quick-discovery","trusted-metrics":"trusted-metrics","root-cause-analysis":"root-cause-analysis","compliance-ready":"compliance","data-product":"data-mesh"};function bt({data:s,onNavigate:a}){const[t,i]=h.useState(null),{fieldCoverage:l,mode:n}=s,r=le(g=>g.applyTemplateToNewPage),o=h.useMemo(()=>Qe(l),[l]),c=h.useMemo(()=>{if(!t)return null;const g=ft[t.id];return g&&ht[g]||null},[t]),x=h.useCallback(()=>{c&&(r(c),a?.("designer"))},[r,c,a]);return n==="none"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fe,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Connection Required"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Pattern matching requires metadata coverage data. Import assets or connect to Atlan to analyze patterns."})]})}):l.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Coverage Data"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Metadata coverage data is needed to match patterns. Ensure your data source has field coverage information."})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",style:{color:"var(--explore-text-primary)"},children:"Select a Pattern"}),e.jsx(ot,{matches:o,selectedPattern:t,onSelect:i})]}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{pattern:t,match:o.find(g=>g.pattern.id===t.id)}),c&&e.jsx("button",{onClick:x,className:"btn-secondary w-full justify-center",children:"Apply Matching Canvas Template (New Page)"})]})]})}function yt({issues:s,fixes:a,onIssueClick:t}){const i=s.filter(r=>r.severity==="error"),l=s.filter(r=>r.severity==="warning"),n=s.filter(r=>r.severity==="info");return s.length===0?e.jsxs("div",{className:"card p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--success-bg-color)"},children:e.jsx(ze,{size:24,style:{color:"var(--success-color)"}})}),e.jsx("h3",{className:"font-semibold mb-1",style:{color:"var(--text-primary)"},children:"No Issues Found"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Your metadata model passes all validation checks."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[i.length>0&&e.jsx("div",{className:"flex-1 p-3 rounded-lg",style:{backgroundColor:"var(--error-bg-color)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{size:16,style:{color:"var(--error-color)"}}),e.jsx("span",{className:"font-semibold",style:{color:"var(--error-color)"},children:i.length}),e.jsx("span",{className:"text-sm",style:{color:"var(--error-color)"},children:i.length===1?"Error":"Errors"})]})}),l.length>0&&e.jsx("div",{className:"flex-1 p-3 rounded-lg",style:{backgroundColor:"var(--warning-bg-color)"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:16,style:{color:"var(--warning-color)"}}),e.jsx("span",{className:"font-semibold",style:{color:"var(--warning-color)"},children:l.length}),e.jsx("span",{className:"text-sm",style:{color:"var(--warning-color)"},children:l.length===1?"Warning":"Warnings"})]})}),n.length>0&&e.jsx("div",{className:"flex-1 p-3 rounded-lg bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-600",children:n.length}),e.jsx("span",{className:"text-sm text-blue-600",children:n.length===1?"Suggestion":"Suggestions"})]})})]}),e.jsx("div",{className:"space-y-3",children:s.map(r=>e.jsx(vt,{issue:r,fix:a?.find(o=>o.issue.id===r.id),onClick:t?()=>t(r):void 0},r.id))})]})}function vt({issue:s,fix:a,onClick:t}){const l=(()=>{switch(s.severity){case"error":return{icon:W,bgColor:"var(--error-bg-color)",color:"var(--error-color)",borderColor:"#fecaca"};case"warning":return{icon:U,bgColor:"var(--warning-bg-color)",color:"var(--warning-color)",borderColor:"#fde68a"};case"info":return{icon:Fe,bgColor:"#eff6ff",color:"#2563eb",borderColor:"#bfdbfe"}}})(),n=l.icon;return e.jsx("div",{className:`card p-4 border-l-4 ${t?"cursor-pointer hover:shadow-md":""} transition-all`,style:{borderLeftColor:l.color},onClick:t,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{backgroundColor:l.bgColor},children:e.jsx(n,{size:16,style:{color:l.color}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:s.title}),a?.quickWin&&e.jsx("span",{className:"badge badge-green text-xs",children:"Quick Win"})]}),e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-secondary)"},children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:s.affectedFields.map(r=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100",style:{color:"var(--text-secondary)"},children:Q(r)},r))}),e.jsxs("div",{className:"p-2.5 rounded-lg text-sm",style:{backgroundColor:"#f9fafb"},children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:["Recommendation:"," "]}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:s.recommendation})]}),a&&e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(te,{size:12,style:{color:"var(--text-muted)"}}),e.jsx("span",{style:{color:"var(--text-secondary)"},children:a.estimatedEffort})]}),a.dependencies.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(U,{size:12,style:{color:"var(--warning-color)"}}),e.jsxs("span",{style:{color:"var(--text-secondary)"},children:[a.dependencies.length," dependencies"]})]})]})]}),t&&e.jsx(_,{size:16,className:"flex-shrink-0",style:{color:"var(--text-muted)"}})]})})}function jt({errors:s,warnings:a,infos:t,riskScore:i}){const l=()=>i>=80?"var(--success-color)":i>=50?"var(--warning-color)":"var(--error-color)";return e.jsxs("div",{className:"card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Validation Summary"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Risk Score:"}),e.jsx("span",{className:"text-lg font-bold",style:{color:l()},children:i})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--error-color)"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[s," errors"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--warning-color)"}}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[a," warnings"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[t," suggestions"]})]})]})]})}function Nt(s){const a=[],t=s.fieldCoverage.find(c=>c.field==="ownerUsers");t&&t.coveragePercent<.5&&a.push({id:"orphan-assets",severity:"error",category:"orphan-assets",title:"Orphan Assets Detected",description:`${((1-t.coveragePercent)*100).toFixed(0)}% of assets have no owner. This creates accountability gaps and makes it impossible to route questions or issues.`,affectedFields:["ownerUsers","ownerGroups"],recommendation:"Implement bulk owner assignment starting with critical data assets. Consider domain-based ownership where a single steward owns assets in their domain."});const i=s.fieldCoverage.find(c=>c.field==="description");i&&i.coveragePercent<.3&&a.push({id:"description-desert",severity:"error",category:"description-desert",title:"Description Desert",description:`Only ${(i.coveragePercent*100).toFixed(0)}% of assets have descriptions. Users cannot understand what data means without context.`,affectedFields:["description","userDescription","readme"],recommendation:"Enable user-contributed descriptions. Start with top 100 most-queried assets. Consider AI-assisted description generation for tables with clear column names."});const l=s.fieldCoverage.find(c=>c.field==="atlanTags");l&&l.coveragePercent<.2&&a.push({id:"classification-chaos",severity:"warning",category:"classification-chaos",title:"Classification Chaos",description:`Only ${(l.coveragePercent*100).toFixed(0)}% of assets are classified. This creates compliance risk and makes policy enforcement impossible.`,affectedFields:["atlanTags"],recommendation:"Define classification taxonomy first. Use auto-classification rules for PII detection. Prioritize columns in customer-facing databases."});const n=s.fieldCoverage.find(c=>c.field==="lineage");n&&n.coveragePercent<.4&&a.push({id:"lineage-blackout",severity:"warning",category:"lineage-blackout",title:"Lineage Blackout",description:`Only ${(n.coveragePercent*100).toFixed(0)}% of assets have lineage. Root cause analysis and impact assessment are impossible.`,affectedFields:["lineage"],recommendation:"Verify all connectors are configured for lineage extraction. Check transformation tool integrations (dbt, Spark). Consider manual lineage for critical dashboards."});const r=s.fieldCoverage.find(c=>c.field==="glossaryTerms");r&&r.coveragePercent<.1&&a.push({id:"glossary-ghost-town",severity:"info",category:"glossary-ghost-town",title:"Glossary Ghost Town",description:`Only ${(r.coveragePercent*100).toFixed(0)}% of assets are linked to glossary terms. Business terminology is not standardized.`,affectedFields:["glossaryTerms"],recommendation:"Start with KPI definitions - these have highest business impact. Build glossary incrementally around actual user questions."});const o=s.fieldCoverage.find(c=>c.field==="certificateStatus");return o&&o.coveragePercent<.25&&a.push({id:"certification-gap",severity:"info",category:"stale-metadata",title:"Certification Gap",description:`Only ${(o.coveragePercent*100).toFixed(0)}% of assets have certification status. Users cannot distinguish trusted from untrusted data.`,affectedFields:["certificateStatus"],recommendation:"Establish certification criteria. Start by certifying golden datasets and critical reports. Use certification workflow to scale."}),a.sort((c,x)=>{const g={error:0,warning:1,info:2};return g[c.severity]-g[x.severity]})}function wt(s){return s.map(a=>({issue:a,quickWin:a.category==="orphan-assets"||a.category==="description-desert",estimatedEffort:Ct(a.category),dependencies:Tt(a.category)}))}function Ct(s){return{"orphan-assets":"1-2 weeks","description-desert":"2-4 weeks","classification-chaos":"3-6 weeks","lineage-blackout":"2-4 weeks (mostly configuration)","glossary-ghost-town":"4-8 weeks","owner-overload":"1-2 weeks","stale-metadata":"1 week + ongoing process"}[s]}function Tt(s){return{"orphan-assets":[],"description-desert":[],"classification-chaos":["Classification taxonomy defined"],"lineage-blackout":["Connector configurations verified"],"glossary-ghost-town":["Glossary structure defined","Business stakeholder buy-in"],"owner-overload":["Org structure mapped"],"stale-metadata":["Freshness SLAs defined"]}[s]}function St(s){let a=100;for(const t of s)switch(t.severity){case"error":a-=25;break;case"warning":a-=10;break;case"info":a-=5;break}return Math.max(0,a)}function kt(s){const a=s.filter(r=>r.severity==="error").length,t=s.filter(r=>r.severity==="warning").length,i=s.filter(r=>r.severity==="info").length,l=St(s),n=[...new Set(s.filter(r=>r.severity==="error").flatMap(r=>r.affectedFields))];return{errors:a,warnings:t,info:i,riskScore:l,criticalFields:n}}function At({data:s}){const{audit:a,mode:t}=s,i=h.useMemo(()=>a?Nt(a):[],[a]),l=h.useMemo(()=>wt(i),[i]),n=h.useMemo(()=>kt(i),[i]);return t==="none"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fe,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Connection Required"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Validation requires audit data. Connect to Atlan to run validation checks."})]})}):a?e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx(jt,{errors:n.errors,warnings:n.warnings,infos:n.info,riskScore:n.riskScore}),e.jsx(yt,{issues:i,fixes:l})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Audit Data"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Audit data is needed to run validation. This is only available when connected to a live Atlan instance."})]})})}function qt(s){let a=0;const t=[],i=(1-s.currentCoverage)*40;a+=i,s.currentCoverage<.25?t.push(`Critical gap: only ${(s.currentCoverage*100).toFixed(0)}% coverage`):s.currentCoverage<.5&&t.push(`Significant gap: ${(s.currentCoverage*100).toFixed(0)}% coverage`),s.isRequired?(a+=30,t.push("Required by selected pattern")):s.isRecommended&&(a+=15,t.push("Recommended by selected pattern"));const l=s.weightScore/30*20;a+=l,s.weightScore>=25&&t.push("High impact on completeness score"),s.estimatedEffort==="low"?(a+=10,t.push("Quick win: low effort to fix")):s.estimatedEffort==="high"&&(a-=10,t.push("Note: higher effort required")),s.assetCount>1e3&&(a+=5,t.push(`High impact: ${s.assetCount.toLocaleString()} assets affected`));const n=ye.find(r=>a>=r.minScore)||ye[ye.length-1];return{field:s.field,level:n.level,score:Math.round(a),badge:n.badge,label:n.label,reasoning:t}}function Ce(s,a){const t=[];for(const i of s){const l=i.field;let n=!1,r=!1;if(a){const c=a.fields.find(x=>x.field===l);c&&(n=c.requirement==="required",r=c.requirement==="recommended")}const o={field:l,currentCoverage:i.coveragePercent,assetCount:i.totalAssets,isRequired:n,isRecommended:r,weightScore:_e[l]||0,estimatedEffort:Ve[l]||"medium"};t.push(qt(o))}return t.sort((i,l)=>l.score-i.score)}function Pt(s,a,t,i){const l=s.find(C=>C.field===a);if(!l)throw new Error(`Field ${a} not found in audit`);const n=l.coveragePercent,r=l.totalAssets,o=Math.ceil((t-n)*r),c=zs[Ve[a]],g=o*c/60,p=_e[a],y=(t-n)*p,d=s.map(C=>C.field===a?{...C,coveragePercent:t}:C),N=Ce(s,i),f=Ce(d,i),j=N.find(C=>C.field===a)?.score||0,u=f.find(C=>C.field===a)?.score||0,v=j-u;return{field:a,currentCoverage:n,simulatedCoverage:t,scoreImpact:v,completenessImpact:y,effortHours:g,roi:g>0?v/g:0}}function We({field:s,audit:a,pattern:t,onClose:i}){const l=a.find(p=>p.field===s)?.coveragePercent||0,[n,r]=h.useState(Math.min(l+.25,1)),[o,c]=h.useState(null),x=()=>{try{const p=Pt(a,s,n,t);c(p)}catch(p){console.error("Simulation failed:",p)}},g=[{label:"+25%",value:Math.min(l+.25,1)},{label:"+50%",value:Math.min(l+.5,1)},{label:"100%",value:1}];return e.jsxs("div",{className:"card p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"var(--primary-blue-light)"},children:e.jsx(Pe,{size:16,style:{color:"var(--primary-blue)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Impact Simulator"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:Q(s)})]})]}),i&&e.jsxs("button",{onClick:i,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9fafb"},children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Current Coverage"}),e.jsxs("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:[(l*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-gray-400",style:{width:`${l*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Target Coverage"}),e.jsxs("span",{className:"font-semibold",style:{color:"var(--primary-blue)"},children:[(n*100).toFixed(0),"%"]})]}),e.jsx("input",{type:"range",min:l,max:1,step:.05,value:n,onChange:p=>{r(parseFloat(p.target.value)),c(null)},className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, var(--primary-blue) 0%, var(--primary-blue) ${(n-l)/(1-l)*100}%, #e5e7eb ${(n-l)/(1-l)*100}%, #e5e7eb 100%)`}}),e.jsx("div",{className:"flex gap-2 mt-2",children:g.map(p=>e.jsx("button",{onClick:()=>{r(p.value),c(null)},className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${n===p.value?"text-white":"text-gray-600 hover:bg-gray-100"}`,style:{backgroundColor:n===p.value?"var(--primary-blue)":"transparent",border:n===p.value?"none":"1px solid #e5e7eb"},children:p.label},p.label))})]}),e.jsxs("button",{onClick:x,className:"btn-primary w-full",children:[e.jsx(Pe,{size:16}),"Calculate Impact"]}),o&&e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100 animate-fadeIn",children:[e.jsx("h4",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Projected Impact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--success-bg-color)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(he,{size:14,style:{color:"var(--success-color)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--success-color)"},children:"Priority Impact"})]}),e.jsxs("span",{className:"text-lg font-semibold",style:{color:"var(--success-color)"},children:["-",o.scoreImpact," pts"]})]}),e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"var(--primary-blue-light)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ee,{size:14,style:{color:"var(--primary-blue)"}}),e.jsx("span",{className:"text-xs",style:{color:"var(--primary-blue)"},children:"Completeness"})]}),e.jsxs("span",{className:"text-lg font-semibold",style:{color:"var(--primary-blue)"},children:["+",o.completenessImpact.toFixed(1)," pts"]})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9fafb"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:14,style:{color:"var(--text-secondary)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Estimated Effort"})]}),e.jsxs("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:[o.effortHours.toFixed(1)," hours"]})]})}),e.jsxs("div",{className:"p-3 rounded-lg border-2",style:{borderColor:"var(--primary-blue)"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"ROI Score"}),e.jsx("span",{className:"text-lg font-bold",style:{color:"var(--primary-blue)"},children:o.roi.toFixed(2)})]}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Higher is better (impact per hour of effort)"})]})]})]})]})}function Dt({audit:s,pattern:a,onFieldSelect:t}){const[i,l]=h.useState(null);return i?e.jsx(We,{field:i,audit:s,pattern:a,onClose:()=>l(null)}):e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",style:{color:"var(--text-primary)"},children:"Simulate Improvement"}),e.jsx("p",{className:"text-sm mb-3",style:{color:"var(--text-secondary)"},children:"Select a field to simulate the impact of improving its coverage."}),e.jsx("div",{className:"space-y-2",children:s.slice(0,5).map(n=>e.jsx("button",{onClick:()=>{l(n.field),t?.(n.field)},className:"w-full p-3 text-left rounded-lg border border-gray-100 hover:border-gray-200 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:Q(n.field)}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[(n.coveragePercent*100).toFixed(0),"%"]})]})},n.field))})]})}function Mt({data:s,initialField:a}){const[t,i]=h.useState(a||null),{fieldCoverage:l,mode:n}=s,r=h.useMemo(()=>Qe(l),[l]),o=h.useMemo(()=>{if(r.length===0)return null;const c=r.reduce((x,g)=>x.matchScore>g.matchScore?x:g);return c.matchScore>.5?c.pattern:null},[r]);return n==="none"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fe,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Connection Required"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Impact simulation requires metadata coverage data. Import assets or connect to Atlan to simulate improvements."})]})}):l.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Coverage Data"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Field coverage data is needed for impact simulation. Ensure your data source has coverage information."})]})}):e.jsx("div",{className:"max-w-2xl mx-auto animate-fadeIn",children:t?e.jsx(We,{field:t,audit:l,pattern:o,onClose:()=>i(null)}):e.jsx(Dt,{audit:l,pattern:o,onFieldSelect:i})})}function zt({onSelectPlan:s}){const a=E(d=>d.plans),t=E(d=>d.addPlan),i=E(d=>d.setPlanStatus),l=E(d=>d.clonePlan),n=E(d=>d.getPlanMetrics),[r,o]=h.useState("all"),[c,x]=h.useState(null),g=()=>{const d={id:M(),name:"New Enrichment Plan",description:"Click to edit description",domains:[],status:"draft",targetDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],managers:[],contributors:{},requirements:[],progress:[],currentMatrix:{id:M(),name:"New Enrichment Plan",description:"",status:"draft",assetTypeRequirements:[],domainOverrides:[],certificationRules:[],conditionalRules:[],connectorOverrides:[]},versions:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"user"};t(d),s?.(d.id)},p=r==="all"?a:a.filter(d=>d.status===r),y={"In Progress":p.filter(d=>d.status==="in-progress"),Draft:p.filter(d=>d.status==="draft"),Completed:p.filter(d=>d.status==="completed"),Archived:p.filter(d=>d.status==="archived")};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[e.jsxs("div",{className:"px-6 py-6 bg-white border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Enrichment Plans"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track metadata improvement projects"})]}),e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium",children:[e.jsx(xe,{size:18}),"New Plan"]})]}),e.jsx("div",{className:"flex gap-2",children:["all","in-progress","draft","completed","archived"].map(d=>e.jsx("button",{onClick:()=>o(d),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${r===d?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:d==="all"?"All":d.replace("-"," ")},d))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Object.entries(y).map(([d,N])=>N.length===0?null:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-3",children:d}),e.jsx("div",{className:"space-y-3",children:N.map(f=>{const j=n(f.id),u=c===f.id,v=Math.ceil((new Date(f.targetDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>x(u?null:f.id),className:"w-full p-4 flex items-start justify-between hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-slate-900",children:f.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold uppercase rounded-full ${f.status==="in-progress"?"bg-blue-100 text-blue-700":f.status==="draft"?"bg-slate-100 text-slate-600":f.status==="completed"?"bg-emerald-100 text-emerald-700":"bg-slate-50 text-slate-500"}`,children:f.status})]}),e.jsx("p",{className:"text-sm text-slate-600",children:f.description}),j&&e.jsxs("div",{className:"mt-3 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-slate-600 font-medium",children:[j.requiredCompletion,"% of requirements met"]}),e.jsx("span",{className:"text-xs text-slate-500",children:v>0?`${v} days left`:"Target date passed"})]}),e.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${j.completionColor==="green"?"bg-emerald-500":j.completionColor==="yellow"?"bg-amber-500":"bg-red-500"}`,style:{width:`${j.requiredCompletion}%`}})})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ss,{size:14,className:"text-slate-400"}),f.requirements.length," requirements"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{size:14,className:"text-slate-400"}),Object.keys(f.contributors).length," contributors"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{size:14,className:"text-slate-400"}),f.domains.length>0?f.domains.length+" domain(s)":"No domains assigned"]})]})]}),e.jsx("div",{className:"ml-4 pt-1",children:e.jsx(_,{size:20,className:`text-slate-400 transition-transform ${u?"rotate-90":""}`})})]}),u&&e.jsxs("div",{className:"border-t border-slate-200 bg-slate-50 p-4 space-y-4",children:[f.requirements.length>0?e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"Requirements"}),e.jsxs("div",{className:"space-y-2",children:[f.requirements.slice(0,3).map(C=>{const A=f.progress.find(b=>b.requirementId===C.id);return e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-700",children:C.fieldType}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${A?.percentComplete||0}%`}})}),e.jsxs("span",{className:"w-10 text-right font-medium text-slate-600",children:[A?.percentComplete||0,"%"]})]})]},C.id)}),f.requirements.length>3&&e.jsxs("p",{className:"text-xs text-slate-500 pt-1",children:["+",f.requirements.length-3," more"]})]})]}):e.jsx("p",{className:"text-xs text-slate-500",children:"No requirements added yet"}),Object.keys(f.contributors).length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"Top Contributors"}),e.jsx("div",{className:"space-y-1",children:Object.entries(f.contributors).sort(([,C],[,A])=>A-C).slice(0,3).map(([C,A])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-700",children:C.split("@")[0]}),e.jsxs("span",{className:"font-medium text-slate-600",children:[A," assets"]})]},C))})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200",children:[f.status==="draft"&&e.jsx("button",{onClick:()=>i(f.id,"in-progress"),className:"flex-1 px-3 py-2 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors",children:"Start Plan"}),f.status==="in-progress"&&e.jsx("button",{onClick:()=>i(f.id,"completed"),className:"flex-1 px-3 py-2 bg-emerald-600 text-white text-xs font-medium rounded hover:bg-emerald-700 transition-colors",children:"Mark Complete"}),e.jsx("button",{onClick:()=>{const C=l(f.id,`${f.name} (Copy)`);C&&s?.(C.id)},className:"flex-1 px-3 py-2 bg-slate-200 text-slate-700 text-xs font-medium rounded hover:bg-slate-300 transition-colors",children:"Clone"}),e.jsx("button",{onClick:()=>s?.(f.id),className:"flex-1 px-3 py-2 bg-slate-100 text-slate-700 text-xs font-medium rounded hover:bg-slate-200 transition-colors",children:"Edit"})]})]})]},f.id)})})]},d)),p.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(U,{size:48,className:"text-slate-300 mb-4"}),e.jsx("h3",{className:"text-slate-600 font-medium mb-1",children:"No plans found"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Create your first enrichment plan to get started"}),e.jsxs("button",{onClick:g,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium",children:[e.jsx(xe,{size:18}),"Create Plan"]})]})]})]})}function It(s){return s==null?!1:typeof s=="string"?s.trim().length>0:Array.isArray(s)?s.length>0:typeof s=="object"?Object.keys(s).length>0:!0}function Et(s,a){const t=s.attributes||{};if(a.includes(".")){const i=a.split(".");let l=t;for(const n of i)l=l?.[n];return l}return t[a]}function Rt(s,a){const t=Et(s,a.fieldType),i=!It(t);let l="missing",n="error",r=`Missing required field: ${a.fieldType}`;return i?n=a.statusType==="required"?"error":"warning":(l="complete",n="info",r=`${a.fieldType} is populated`),{requirementId:a.id,fieldName:a.fieldType,fieldType:"string",assetGuid:s.guid,assetName:s.name,currentValue:i?void 0:t,isEmpty:i,status:l,severity:n,message:r}}function $t(s,a){const t=a.requirements.filter(x=>!x.assetScope?.assetTypes||x.assetScope.assetTypes.length===0?!0:x.assetScope.assetTypes.includes(s.typeName)),i=t.map(x=>Rt(s,x)),l=i.filter(x=>x.status==="complete").length,n=i.filter(x=>x.status==="partial").length,r=i.filter(x=>x.status==="missing").length,o=t.length>0?Math.round((l+n*.5)/t.length*100):100,c=Math.max(0,100-(r*10+n*5));return{assetGuid:s.guid,assetName:s.name,assetType:s.typeName,totalRequirements:t.length,completedCount:l,partialCount:n,missingCount:r,completionPercentage:o,qualityScore:c,fieldResults:i}}function ke(s,a){const t=a.map(g=>$t(g,s)),i=s.requirements.length,l=t.filter(g=>g.completionPercentage===100).length,n=t.filter(g=>g.completionPercentage>0&&g.completionPercentage<100).length,r=t.filter(g=>g.completionPercentage===0).length,o=t.length>0?Math.round(t.reduce((g,p)=>g+p.completionPercentage,0)/t.length):0,c=t.length>0?Math.round(t.reduce((g,p)=>g+p.qualityScore,0)/t.length):0,x={};for(const g of s.requirements){const y=t.flatMap(N=>N.fieldResults).filter(N=>N.requirementId===g.id),d=y.filter(N=>N.status==="missing").length;x[g.fieldType]={total:y.length,missing:d,coverage:y.length>0?Math.round((y.length-d)/y.length*100):0}}return{planId:s.id,planTitle:s.name,comparisonTimestamp:new Date().toISOString(),totalAssets:a.length,assetSummaries:t,aggregateMetrics:{totalRequirements:i,averageCompletion:o,completedAssets:l,partialAssets:n,incompleteAssets:r,overallQualityScore:c,gapsByField:x}}}function Lt(s,a){const t=ke(s,a),i=[];return s.requirements.forEach(l=>{const n=t.assetSummaries.flatMap(d=>d.fieldResults.filter(N=>N.requirementId===l.id)),r=n.filter(d=>d.status==="complete"||d.status==="partial").map(d=>d.assetGuid),o=n.filter(d=>d.status==="missing").map(d=>d.assetGuid),c=r.length,x=l.targetCount||t.totalAssets,g=x>0?Math.round(c/x*100):100;let p=!0,y;if(s.targetDate){const d=Math.ceil((new Date(s.targetDate).getTime()-new Date().getTime())/864e5),f=Math.max(0,x-c)/5;if(p=f<=d,p)y=s.targetDate;else{const j=new Date;y=new Date(j.getTime()+f*24*60*60*1e3).toISOString().split("T")[0]}}i.push({requirementId:l.id,currentCount:c,targetCount:x,percentComplete:g,assetsWithField:r,assetsWithoutField:o,onTrack:p,estimatedCompletionDate:y,completedByUser:s.progress.find(d=>d.requirementId===l.id)?.completedByUser||{},lastUpdated:new Date().toISOString()})}),{progress:i,lastProgressCheck:new Date().toISOString()}}function Ye(){const s=E(n=>n.getPlan),a=E(n=>n.updatePlan),t=qe(n=>n.storeComparison),i=qe(n=>n.getLatestComparison);return{hydratePlan:h.useCallback(async(n,r=!1)=>{const o=s(n);if(!o)return;const c=i(n),x=c?new Date(c.timestamp).getTime():0;if(!(Date.now()-x<300*1e3&&!r))try{const y=(await Oe({domainQualifiedName:o.domains?.[0],size:500})).assets,d=ke(o,y);t(d);const N=Lt(o,y);return a(n,N),{comparison:d,assets:y}}catch(p){throw console.error("Failed to hydrate plan:",p),p}},[s,i,t,a])}}function Ft({plan:s,assets:a,selectedAssetId:t,onSelectAsset:i}){const l=h.useMemo(()=>ke(s,a),[s,a]),n=h.useMemo(()=>t?l.assetSummaries.find(r=>r.assetGuid===t)||l.assetSummaries[0]||null:l.assetSummaries[0]||null,[l.assetSummaries,t]);return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex-1 grid grid-cols-1 xl:grid-cols-[1.3fr_1fr] gap-4 overflow-hidden",children:[e.jsx("div",{className:"overflow-y-auto divide-y divide-slate-200",children:l.assetSummaries.map(r=>{const o=n?.assetGuid===r.assetGuid;return e.jsxs("div",{className:`p-4 border-l-4 cursor-pointer transition-colors ${o?"ring-1 ring-blue-300":"hover:bg-slate-100"} ${r.completionPercentage===100?"border-emerald-500 bg-emerald-50":r.completionPercentage>=50?"border-amber-500 bg-amber-50":"border-red-500 bg-red-50"}`,onClick:()=>i?.(r),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:r.assetName}),e.jsx("p",{className:"text-xs text-slate-500",children:r.assetType})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:`${as()?.baseUrl}/assets/${r.assetGuid}/overview`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Open in Atlan",onClick:c=>c.stopPropagation(),children:e.jsx(Ne,{size:18})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[r.completionPercentage,"%"]}),e.jsx("div",{className:"text-xs text-slate-600",children:"complete"})]})]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-3 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${r.completionPercentage===100?"bg-emerald-500":r.completionPercentage>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${r.completionPercentage}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-emerald-700",children:[e.jsx(se,{size:14}),r.completedCount," Complete"]}),e.jsxs("span",{className:"flex items-center gap-1 text-amber-700",children:[e.jsx(U,{size:14}),r.partialCount," Partial"]}),e.jsxs("span",{className:"flex items-center gap-1 text-red-700",children:[e.jsx(js,{size:14}),r.missingCount," Missing"]})]}),e.jsxs("span",{className:"font-semibold text-slate-900",children:["Quality: ",r.qualityScore]})]})]},r.assetGuid)})}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm p-4 overflow-y-auto",children:n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Selected asset"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:n.assetName}),e.jsx("p",{className:"text-xs text-slate-500",children:n.assetType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[n.completionPercentage,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"complete"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[e.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("p",{className:"text-emerald-700 font-semibold",children:"Complete"}),e.jsx("p",{className:"text-emerald-900 text-lg",children:n.completedCount})]}),e.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("p",{className:"text-amber-700 font-semibold",children:"Partial"}),e.jsx("p",{className:"text-amber-900 text-lg",children:n.partialCount})]}),e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"Missing"}),e.jsx("p",{className:"text-red-900 text-lg",children:n.missingCount})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 mb-2",children:"Fields by status"}),e.jsx("div",{className:"space-y-2",children:(n.fieldResults||[]).map(r=>e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-md border text-sm ${r.status==="complete"?"bg-emerald-50 border-emerald-200 text-emerald-800":r.status==="partial"?"bg-amber-50 border-amber-200 text-amber-800":"bg-red-50 border-red-200 text-red-800"}`,children:[e.jsx("span",{children:r.fieldName}),e.jsx("span",{className:"text-xs uppercase font-semibold",children:r.status})]},r.requirementId))})]})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Select an asset to view details."})})]})}),l.assetSummaries.length===0&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ge,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Assets to Compare"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md",children:"Select a plan and domain to fetch assets for comparison against your enrichment requirements."})]})})]}),e.jsxs("div",{className:"bg-white border-t border-slate-200 px-6 py-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Field Coverage"}),e.jsx("div",{className:"space-y-2",children:Object.entries(l.aggregateMetrics.gapsByField).sort(([,r],[,o])=>o.coverage-r.coverage).slice(0,5).map(([r,o])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-700",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-slate-200 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full ${o.coverage===100?"bg-emerald-500":o.coverage>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${o.coverage}%`}})}),e.jsxs("span",{className:"font-semibold text-slate-900 w-12 text-right",children:[o.coverage,"%"]})]})]},r))})]})]})}function Ot(){const[s,a]=h.useState(()=>{const o=localStorage.getItem("assessment_runs");return o?JSON.parse(o):[{id:"run-1",timestamp:"2026-01-04T10:30:00Z",status:"completed",score:84,assetsCount:124,gapsCount:12},{id:"run-2",timestamp:"2025-12-28T14:15:00Z",status:"completed",score:78,assetsCount:120,gapsCount:18}]}),[t,i]=h.useState(()=>{const o=localStorage.getItem("assessment_gaps");return o?JSON.parse(o):[{id:"gap-1",runId:"run-1",field:"Business Description",severity:"high",assets:42,impact:"Critical for discovery"},{id:"gap-2",runId:"run-1",field:"Owner",severity:"high",assets:15,impact:"Governance bottleneck"},{id:"gap-3",runId:"run-1",field:"Classification",severity:"medium",assets:28,impact:"Compliance risk"}]}),l=R(o=>o.assets),n=R(o=>o.importAssets);h.useEffect(()=>{localStorage.setItem("assessment_runs",JSON.stringify(s))},[s]),h.useEffect(()=>{localStorage.setItem("assessment_gaps",JSON.stringify(t))},[t]);const r=h.useCallback(async()=>{let o=l;if(rs())try{const j=await Oe({size:200});n(j.assets,["scan-api"]),o=j.assets}catch(j){console.error("Failed to fetch fresh assets for scan",j)}const c=`run-${Date.now()}`,x={id:c,timestamp:new Date().toISOString(),status:"running",score:0,assetsCount:o.length,gapsCount:0};a(j=>[x,...j]),await new Promise(j=>setTimeout(j,2e3));const g=o.flatMap(j=>{const u=[];return j.description&&u.push("SEMANTICS"),j.owner&&u.push("OWNERSHIP"),j.certificateStatus&&u.push("SENSITIVITY"),u}),p=Math.max(o.length*3,1),y=g.length,d=o.length===0?0:Math.round(y/p*100),N=[{id:`gap-${Date.now()}-1`,runId:c,field:"Business Description",severity:"high",assets:o.filter(j=>!j.description).length,impact:"Critical for discovery"},{id:`gap-${Date.now()}-2`,runId:c,field:"Owner",severity:"high",assets:o.filter(j=>!j.owner).length,impact:"Governance bottleneck"},{id:`gap-${Date.now()}-3`,runId:c,field:"Classification",severity:"medium",assets:o.filter(j=>!j.certificateStatus).length,impact:"Compliance risk"}].filter(j=>j.assets>0),f={...x,status:"completed",score:d,gapsCount:N.length};return a(j=>[f,...j.filter(u=>u.id!==c)]),i(j=>[...N,...j]),f},[l,n]);return{runs:s,gaps:t,runAssessment:r}}function Gt(){const{runs:s,gaps:a,runAssessment:t}=Ot(),[i,l]=h.useState(!1),n=async()=>{l(!0),await t(),l(!1)},r=s[0]||{score:0,assetsCount:0,gapsCount:0},o=a.filter(c=>c.runId===r.id);return e.jsx("div",{className:"h-full overflow-y-auto bg-slate-50 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-700",children:[e.jsx(ce,{size:20}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-sm",children:"Demo Mode Active"}),e.jsx("p",{className:"text-xs opacity-80",children:"Running V2 assessment engine entirely in-browser. No server required."})]})]}),e.jsx("div",{className:"text-[10px] font-bold uppercase tracking-wider bg-blue-600 text-white px-2 py-0.5 rounded",children:"GitHub Pages"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Governance Assessment (V2)"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Automated gap analysis and quality scoring"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 flex items-center gap-2 text-sm font-medium shadow-sm",children:[e.jsx(ms,{size:16}),"History"]}),e.jsx("button",{onClick:n,disabled:i,className:`px-4 py-2 ${i?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white rounded-lg flex items-center gap-2 text-sm font-medium shadow-sm transition-all`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(te,{size:16,className:"animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{size:16}),"Run Assessment"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ie,{title:"Latest Score",value:`${r.score}%`,trend:s.length>1?`${r.score-s[1].score}%`:void 0,trendUp:s.length>1?r.score>=s[1].score:!0,icon:e.jsx(ce,{className:"text-blue-600",size:20})}),e.jsx(ie,{title:"Assets Scanned",value:r.assetsCount.toString(),icon:e.jsx(Le,{className:"text-slate-600",size:20})}),e.jsx(ie,{title:"Open Gaps",value:r.gapsCount.toString(),trend:s.length>1?`${r.gapsCount-s[1].gapsCount}`:void 0,trendUp:s.length>1?r.gapsCount<=s[1].gapsCount:!0,icon:e.jsx(W,{className:"text-amber-500",size:20})}),e.jsx(ie,{title:"Compliance",value:r.score>80?"High":r.score>50?"Medium":"Low",icon:e.jsx(se,{className:"text-emerald-500",size:20})})]}),!s.length&&e.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 text-sm text-slate-600",children:"No assessments yet. Run an assessment to generate gaps and remediation insights."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-slate-900",children:"Identified Gaps"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"p-1.5 hover:bg-slate-50 rounded text-slate-400",children:e.jsx(Ns,{size:16})}),e.jsx("button",{className:"p-1.5 hover:bg-slate-50 rounded text-slate-400",children:e.jsx(K,{size:16})})]})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:o.length>0?o.map(c=>e.jsx("div",{className:"px-6 py-4 hover:bg-slate-50 transition-colors group cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.severity==="high"?"bg-red-500":c.severity==="medium"?"bg-amber-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:c.field}),e.jsx("div",{className:"text-xs text-slate-500",children:c.impact})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-slate-900",children:[c.assets," assets"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Affected"})]}),e.jsx(_,{size:16,className:"text-slate-300 group-hover:text-slate-400"})]})]})},c.id)):e.jsx("div",{className:"px-6 py-12 text-center text-slate-500",children:"No gaps identified in the latest run."})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-100",children:e.jsxs("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["View all gaps ",e.jsx(_,{size:14})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-bold text-slate-900",children:"Remediation Roadmap"}),e.jsx("button",{className:"text-sm text-blue-600 font-medium",children:"Edit Plan"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(De,{title:"Phase 1: Critical Metadata",description:"Populate Business Description and Owners for Tier 1 assets.",status:"in-progress",progress:65}),e.jsx(De,{title:"Phase 2: Classification",description:"Apply PII and Sensitivity tags based on automated suggestions.",status:"pending",progress:0})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Recent Runs"}),e.jsx("div",{className:"space-y-4",children:MOCK_RUNS.map(c=>e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 rounded-lg text-slate-400 group-hover:text-blue-600 group-hover:bg-blue-50 transition-colors",children:e.jsx(J,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:new Date(c.timestamp).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Score: ",c.score,"%"]})]})]}),e.jsx("button",{className:"p-1 text-slate-300 hover:text-slate-600",children:e.jsx(Ne,{size:14})})]},c.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl p-6 text-white shadow-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Export Artifacts"}),e.jsx("p",{className:"text-blue-100 text-sm mb-4",children:"Generate reports and tickets for your team."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(K,{size:16}),"Download CSV Report"]}),e.jsxs("button",{className:"w-full py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Ne,{size:16}),"Create JIRA Tickets"]})]})]})]})]})]})})}function ie({title:s,value:a,trend:t,trendUp:i,icon:l}){return e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-slate-50 rounded-lg",children:l}),t&&e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${i?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-600"}`,children:t})]}),e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:a}),e.jsx("div",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider mt-1",children:s})]})}function De({title:s,description:a,status:t,progress:i}){return e.jsxs("div",{className:"p-4 border border-slate-100 rounded-lg hover:border-blue-200 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:s}),e.jsx("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${t==="completed"?"bg-emerald-50 text-emerald-600":t==="in-progress"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-500"}`,children:t.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:a}),t==="in-progress"&&e.jsx("div",{className:"w-full bg-slate-100 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${i}%`}})})]})}function Ut({planId:s,onBack:a}){const t=E(m=>m.getPlan(s)),i=E(m=>m.updatePlan),l=E(m=>m.updateProgress),n=R(m=>m.assets),{hydratePlan:r}=Ye(),[o,c]=h.useState(!1),[x,g]=h.useState(t?.name||""),[p,y]=h.useState(null),[d,N]=h.useState("overview"),[f,j]=h.useState(t?.owner||""),[u,v]=h.useState(""),[C,A]=h.useState(null);if(h.useEffect(()=>{!t||d!=="analytics"||r(s).catch(m=>console.error("Failed to hydrate plan analytics",m))},[d,t,s,r]),!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Plan not found"}),e.jsx("button",{onClick:a,className:"mt-4 text-blue-600 hover:underline text-sm",children:"← Go back"})]});const b=ns(t),w=Math.ceil((new Date(t.targetDate).getTime()-new Date().getTime())/(1e3*60*60*24)),k=w<0,P=()=>{x.trim()&&(i(s,{name:x}),c(!1))},D=m=>{i(s,{status:m})},$=()=>{i(s,{owner:f})},B=()=>{if(!u.trim())return;const m={id:M(),author:"you",text:u.trim(),createdAt:new Date().toISOString(),status:"open"};i(s,{comments:[...t.comments||[],m]}),v("")},V=(m,T)=>{l(s,m,T)};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-6 bg-white border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Go back",children:e.jsx(us,{size:20,className:"text-slate-600"})}),e.jsx("div",{className:"flex-1",children:o?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:m=>g(m.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsxs("button",{onClick:P,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 text-sm font-medium",children:[e.jsx(bs,{size:16}),"Save"]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:t.name}),e.jsx("button",{onClick:()=>c(!0),className:"p-1.5 hover:bg-slate-100 rounded transition-colors",children:e.jsx(vs,{size:16,className:"text-slate-400"})}),e.jsxs("select",{value:t.status,onChange:m=>D(m.target.value),className:"text-xs font-bold uppercase rounded-full border border-slate-200 bg-white px-3 py-1 text-slate-700",children:[e.jsx("option",{value:"draft",children:"draft"}),e.jsx("option",{value:"in-progress",children:"in-progress"}),e.jsx("option",{value:"in-review",children:"in-review"}),e.jsx("option",{value:"completed",children:"completed"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-xs font-bold uppercase text-blue-600",children:"Progress"})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[b.requiredCompletion,"%"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"of required fields"})]}),e.jsxs("div",{className:`rounded-lg p-4 ${k?"bg-gradient-to-br from-red-50 to-red-100":w<14?"bg-gradient-to-br from-amber-50 to-amber-100":"bg-gradient-to-br from-emerald-50 to-emerald-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(is,{size:16,className:k?"text-red-600":w<14?"text-amber-600":"text-emerald-600"}),e.jsx("span",{className:`text-xs font-bold uppercase ${k?"text-red-600":w<14?"text-amber-600":"text-emerald-600"}`,children:"Timeline"})]}),e.jsx("div",{className:`text-2xl font-bold ${k?"text-red-700":w<14?"text-amber-700":"text-emerald-700"}`,children:k?"❌":w>0?w:0}),e.jsx("p",{className:`text-xs ${k?"text-red-600":w<14?"text-amber-600":"text-emerald-600"} mt-1`,children:k?"Overdue":w>0?"days left":"Target reached"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(me,{size:16,className:"text-purple-600"}),e.jsx("span",{className:"text-xs font-bold uppercase text-purple-600",children:"Team"})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:Object.keys(t.contributors).length}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"contributors"}),e.jsxs("div",{className:"mt-2 text-xs text-purple-700",children:["Owner: ",t.owner||"Unassigned"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{size:16,className:"text-indigo-600"}),e.jsx("span",{className:"text-xs font-bold uppercase text-indigo-600",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:t.requirements.length}),e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"requirements"})]}),e.jsxs("div",{className:`rounded-lg p-4 ${b.completionColor==="green"?"bg-gradient-to-br from-emerald-50 to-emerald-100":b.completionColor==="yellow"?"bg-gradient-to-br from-amber-50 to-amber-100":"bg-gradient-to-br from-red-50 to-red-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.completionColor==="green"?e.jsx(se,{size:16,className:"text-emerald-600"}):b.completionColor==="yellow"?e.jsx(U,{size:16,className:"text-amber-600"}):e.jsx(U,{size:16,className:"text-red-600"}),e.jsx("span",{className:`text-xs font-bold uppercase ${b.completionColor==="green"?"text-emerald-600":b.completionColor==="yellow"?"text-amber-600":"text-red-600"}`,children:"Health"})]}),e.jsx("div",{className:`text-lg font-bold ${b.completionColor==="green"?"text-emerald-700":b.completionColor==="yellow"?"text-amber-700":"text-red-700"}`,children:b.completionColor==="green"?"On Track":b.completionColor==="yellow"?"At Risk":"Behind"})]})]})]}),e.jsx("div",{className:"bg-white border-b border-slate-200 px-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{onClick:()=>N("overview"),className:`py-4 px-2 font-medium text-sm border-b-2 transition-colors ${d==="overview"?"text-blue-600 border-blue-600":"text-slate-600 border-transparent hover:text-slate-900"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>N("requirements"),className:`py-4 px-2 font-medium text-sm border-b-2 transition-colors ${d==="requirements"?"text-blue-600 border-blue-600":"text-slate-600 border-transparent hover:text-slate-900"}`,children:["Requirements (",t.requirements.length,")"]}),e.jsxs("button",{onClick:()=>N("live-preview"),className:`py-4 px-2 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${d==="live-preview"?"text-blue-600 border-blue-600":"text-slate-600 border-transparent hover:text-slate-900"}`,children:[e.jsx(ge,{size:16}),"Live Preview"]}),e.jsxs("button",{onClick:()=>N("analytics"),className:`py-4 px-2 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${d==="analytics"?"text-blue-600 border-blue-600":"text-slate-600 border-transparent hover:text-slate-900"}`,children:[e.jsx(X,{size:16}),"Analytics"]}),e.jsxs("button",{onClick:()=>N("assessment"),className:`py-4 px-2 font-medium text-sm border-b-2 transition-colors flex items-center gap-2 ${d==="assessment"?"text-blue-600 border-blue-600":"text-slate-600 border-transparent hover:text-slate-900"}`,children:[e.jsx(ce,{size:16}),"Assessment (V2)"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:d==="assessment"?e.jsx(Gt,{}):d==="analytics"?e.jsx(xs,{planId:s}):d==="live-preview"?e.jsx("div",{className:"h-full",children:e.jsx(Ft,{plan:t,assets:n,selectedAssetId:C||void 0,onSelectAsset:m=>A(m.assetGuid)})}):d==="requirements"?e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Requirements Breakdown"}),t.requirements.length===0?e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-slate-500",children:"No requirements added yet"}),") : activeTab === 'overview' ? (",e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{size:16,className:"text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Ownership"})]}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",onClick:$,children:"Save owner"})]}),e.jsx("label",{className:"text-xs text-slate-500",children:"Plan owner"}),e.jsx("input",{value:f,onChange:m=>j(m.target.value),className:"w-full mt-1 px-3 py-2 border border-slate-300 rounded-md text-sm",placeholder:"owner@company.com"}),e.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Managers: ",t.managers.join(", ")||"None set"]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(fs,{size:16,className:"text-emerald-600"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Comments"})]}),e.jsxs("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:[(t.comments||[]).length===0&&e.jsx("p",{className:"text-sm text-slate-500",children:"No comments yet."}),(t.comments||[]).map(m=>e.jsxs("div",{className:"p-3 bg-slate-50 rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mb-1",children:[e.jsx("span",{children:m.author}),e.jsx("span",{children:new Date(m.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-slate-800",children:m.text})]},m.id))]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{value:u,onChange:m=>v(m.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm",rows:3,placeholder:"Add a comment"}),e.jsx("button",{onClick:B,className:"mt-2 px-3 py-2 bg-blue-600 text-white text-sm font-semibold rounded-md hover:bg-blue-700",children:"Post comment"})]})]})]})}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add requirements to start tracking progress"})]}):e.jsx("div",{className:"space-y-3",children:t.requirements.map(m=>{const T=t.progress.find(I=>I.requirementId===m.id),q=p===m.id,z=T?.percentComplete||0;return e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsx("button",{onClick:()=>y(q?null:m.id),className:"w-full p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:m.fieldType}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded ${m.statusType==="required"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:m.statusType})]}),T&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-slate-600 font-medium",children:[T.currentCount," / ",T.targetCount," assets"]}),e.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[z,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${z===100?"bg-emerald-500":z>=80?"bg-blue-500":"bg-amber-500"}`,style:{width:`${z}%`}})})]})]})}),q&&T&&e.jsxs("div",{className:"border-t border-slate-200 bg-slate-50 p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"Scope"}),e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[m.assetScope.domains&&m.assetScope.domains.length>0&&e.jsxs("div",{children:["Domains: ",m.assetScope.domains.join(", ")]}),m.assetScope.qualityThreshold&&e.jsxs("div",{children:["Quality: ",m.assetScope.qualityThreshold]}),m.assetScope.tagsRequired&&m.assetScope.tagsRequired.length>0&&e.jsxs("div",{children:["Tags: ",m.assetScope.tagsRequired.join(", ")]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"Progress Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Completed:"}),e.jsx("span",{className:"font-medium text-emerald-600",children:T.currentCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Remaining:"}),e.jsx("span",{className:"font-medium text-amber-600",children:Math.max(0,T.targetCount-T.currentCount)})]}),T.completedByUser&&Object.keys(T.completedByUser).length>0&&e.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Contributors:"}),Object.entries(T.completedByUser).sort(([,I],[,F])=>F-I).slice(0,3).map(([I,F])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-600",children:I.split("@")[0]}),e.jsx("span",{className:"font-medium",children:F})]},I))]})]})]}),T.currentCount<T.targetCount&&e.jsxs("div",{className:"pt-2 border-t border-slate-200 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-600",children:"Update Progress"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",max:T.targetCount-T.currentCount,defaultValue:1,placeholder:"How many to add?",className:"flex-1 px-2 py-1.5 border border-slate-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",id:`qty-${m.id}`}),e.jsx("button",{onClick:()=>{const I=document.getElementById(`qty-${m.id}`),F=parseInt(I?.value||"1");V(m.id,{currentCount:Math.min(T.currentCount+F,T.targetCount),percentComplete:Math.round((T.currentCount+F)/T.targetCount*100),onTrack:!0})},className:"px-3 py-1.5 bg-blue-600 text-white rounded text-sm font-medium hover:bg-blue-700",children:"Add"})]})]})]})]},m.id)})})]}):e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Contributors"}),Object.keys(t.contributors).length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(t.contributors).sort(([,m],[,T])=>T-m).map(([m,T])=>e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-slate-900",children:m.split("@")[0]}),e.jsx("span",{className:"text-sm text-slate-500",children:m.split("@")[1]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:T}),e.jsx("span",{className:"text-sm text-slate-600",children:"assets completed"})]})]},m))}):e.jsx("p",{className:"text-slate-500 text-sm",children:"No contributors yet"})]})})})]})}function Bt(s,a){switch(a.format){case"json":return _t(s);case"csv":return Vt(s);case"markdown":return Qt(s);case"atlan-bulk":return Ht(s);default:throw new Error(`Unknown format: ${a.format}`)}}function _t(s){return JSON.stringify(s,null,2)}function Vt(s,a){const t=["Field","Priority","Score","Label"];t.push("Reasoning");const i=n=>`"${String(n??"").replace(/"/g,'""')}"`,l=s.map(n=>{const r=[n.field,n.level,n.score.toString(),n.label];return r.push(n.reasoning.join("; ")),r.map(i).join(",")});return[t.join(","),...l].join(`
`)}function Qt(s,a){let t=`# Metadata Model Priorities

`;t+=`_Generated on ${new Date().toISOString().slice(0,10)}_

`,t+=`## Priority Summary

`,t+=`| Priority | Field | Score | Status |
`,t+=`|----------|-------|-------|--------|
`;for(const o of s)t+=`| ${o.badge} ${o.level} | ${o.field} | ${o.score} | ${o.label} |
`;{t+=`
## Detailed Reasoning

`;for(const o of s){if(t+=`### ${o.field}

`,t+=`**Priority:** ${o.level} (Score: ${o.score})

`,o.reasoning.length>0){t+=`**Factors:**
`;for(const c of o.reasoning)t+=`- ${c}
`}t+=`
`}}t+=`## Priority Breakdown

`;const i=s.filter(o=>o.level==="P0"),l=s.filter(o=>o.level==="P1"),n=s.filter(o=>o.level==="P2"),r=s.filter(o=>o.level==="P3");return i.length>0&&(t+=`### Critical (P0) - ${i.length} items
`,i.forEach(o=>{t+=`- ${o.field}
`}),t+=`
`),l.length>0&&(t+=`### High (P1) - ${l.length} items
`,l.forEach(o=>{t+=`- ${o.field}
`}),t+=`
`),n.length>0&&(t+=`### Medium (P2) - ${n.length} items
`,n.forEach(o=>{t+=`- ${o.field}
`}),t+=`
`),r.length>0&&(t+=`### Low (P3) - ${r.length} items
`,r.forEach(o=>{t+=`- ${o.field}
`}),t+=`
`),t}function Ht(s){const a=s.map(i=>({field:i.field,priority:i.level,score:i.score}));return`# PyAtlan Bulk Update Template
# Generated by Metadata Model Designer

from pyatlan.client.atlan import AtlanClient
from pyatlan.model.assets import Asset

client = AtlanClient()

# Priority-based update queue
priority_updates = ${JSON.stringify(a,null,2)}

# Example: Get assets missing high-priority fields
def get_assets_missing_field(field_name: str, limit: int = 100):
    """Query for assets missing the specified field."""
    # Implementation depends on your specific Atlan setup
    pass

# Example: Bulk update owner for assets
def bulk_assign_owner(assets: list, owner_guid: str):
    """Assign owner to multiple assets."""
    for asset in assets:
        asset.owner_users = [owner_guid]

    # Batch save
    client.asset.save(assets)

# Process priorities in order
for priority in priority_updates:
    field = priority['field']
    level = priority['priority']

    if level in ['P0', 'P1']:
        print(f"Processing {level} priority: {field}")
        # Add your implementation here
        pass
`}function Wt(s,a){return new Blob([s],{type:a})}function Yt(s,a,t){const i=Wt(s,t),l=URL.createObjectURL(i),n=document.createElement("a");n.href=l,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}function Jt(s){return{json:"application/json",csv:"text/csv",markdown:"text/markdown","atlan-bulk":"text/x-python"}[s]}function Kt(s){return{json:"json",csv:"csv",markdown:"md","atlan-bulk":"py"}[s]}function Xt(s,a){const t=h.useRef(null);h.useEffect(()=>{const i=`${s}-start`;return performance.mark(i),t.current=performance.now(),()=>{const l=`${s}-end`;performance.mark(l);try{performance.measure(s,i,l);const n=performance.getEntriesByName(s,"measure")[0];if(n){const r=n.duration,o=a?.error&&r>a.error,c=a?.warning&&r>a.warning;o?console.error(`⚠️ Performance [${s}]: ${r.toFixed(2)}ms (exceeded error threshold: ${a.error}ms)`):c?console.warn(`⚡ Performance [${s}]: ${r.toFixed(2)}ms (exceeded warning threshold: ${a.warning}ms)`):console.log(`✓ Performance [${s}]: ${r.toFixed(2)}ms`)}performance.clearMarks(i),performance.clearMarks(l),performance.clearMeasures(s)}catch(n){console.error(`Error measuring performance for ${s}:`,n)}}},[s,a])}function ya({onNavigate:s}){Xt("explore-dashboard-load",{warning:1500,error:2500});const[a,t]=ls(),i=a.get("tab"),l=a.get("planId"),[n,r]=h.useState(i||"overview"),[o,c]=h.useState(!1),[x,g]=h.useState(null),[p,y]=h.useState(l);h.useEffect(()=>{const S=new URLSearchParams;n!=="overview"&&S.set("tab",n),p&&S.set("planId",p),t(S,{replace:!0})},[n,p,t]);const d=ps(S=>S.openAtlanConnectionModal),N=E(S=>S.addPlan),f=Os(),{mode:j,isLoading:u,error:v,connection:C,fieldCoverage:A,refresh:b}=f,w=h.useCallback(()=>{const S={id:M(),name:`Audit Remediation Plan - ${new Date().toLocaleDateString()}`,description:"Created from Explore & Audit dashboard to address metadata gaps.",domains:[],status:"draft",targetDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],managers:[],contributors:{},requirements:[],progress:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"user",currentMatrix:gs(),versions:[]};N(S),r("plans"),y(S.id)},[N]),k=E(S=>S.plans),{importAssets:P,extractMetadataFromAssets:D,assets:$}=R(),{hydratePlan:B}=Ye();h.useEffect(()=>{let S=!0;async function H(){if(k.length!==0)try{const L=new Map,ae=new Set;for(const Ae of k){if(Ae.status==="archived")continue;const be=await B(Ae.id);be&&be.assets&&be.assets.forEach(re=>{L.set(re.guid,re),re.attributes?.connectorName&&ae.add(re.attributes.connectorName)})}S&&L.size>0&&($.length===0||Math.abs($.length-L.size)>10)&&(P(Array.from(L.values()),Array.from(ae)),D())}catch(L){console.error("Failed to update plan progress",L)}}H();const O=setInterval(H,3e4);return()=>{S=!1,clearInterval(O)}},[k,B,$.length,P,D]);const V=h.useMemo(()=>{const S=["overview","plans"];return(j==="imported"||j==="hybrid"||$.length>0)&&S.push("assets"),A.length>0&&S.push("patterns","simulate"),(j==="live"||j==="hybrid")&&f.audit&&S.push("validation"),S},[j,A.length,f.audit]),m=V.includes(n)?n:"overview",T=h.useMemo(()=>Ce(A,null),[A]),q=h.useCallback(S=>{const H=Bt(T,{format:S}),O=`explore-${new Date().toISOString().split("T")[0]}.${Kt(S)}`;Yt(H,O,Jt(S)),c(!1)},[T]),z=h.useCallback(S=>{g(S),r("simulate")},[]),I=S=>{switch(S){case"overview":return e.jsx(X,{size:16});case"plans":return e.jsx(Ie,{size:16});case"assets":return e.jsx(G,{size:16});case"patterns":return e.jsx(Z,{size:16});case"validation":return e.jsx(W,{size:16});case"simulate":return e.jsx(he,{size:16})}},F=S=>{switch(S){case"overview":return"Overview";case"plans":return"Enrichment Plans";case"assets":return"Assets";case"patterns":return"Patterns";case"validation":return"Validation";case"simulate":return"Simulate"}};return e.jsxs("div",{className:"explore-container h-full flex flex-col",children:[e.jsx(Gs,{mode:j,connector:f.connector,importedAt:f.importedAt,username:C.username,dataSource:C.dataSource,lastUpdated:f.lastUpdated,onConnect:d}),v&&e.jsx("div",{className:"explore-banner explore-banner-warning",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{size:18}),e.jsx("span",{className:"text-sm",children:v})]})}),e.jsxs("div",{className:"explore-header",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",style:{color:"var(--explore-text-primary)"},children:"Explore"}),e.jsx("p",{className:"text-sm",style:{color:"var(--explore-text-secondary)"},children:j==="imported"?"Analyze imported assets and metadata coverage":j==="hybrid"?"Use live audit for estate coverage and imported assets as your modeling baseline":j==="live"?"Live audit data from your data catalog":"Connect to explore your metadata"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Us,{mode:j,dataSource:C.dataSource,isConnecting:u,onClick:d}),A.length>0&&e.jsxs("button",{onClick:w,className:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xe,{size:16}),"Create Remediation Plan"]}),A.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!o),className:"btn-secondary",children:[e.jsx(K,{size:16}),"Export",e.jsx(Re,{size:14})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[e.jsx("button",{onClick:()=>q("json"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Export as JSON"}),e.jsx("button",{onClick:()=>q("csv"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Export as CSV"}),e.jsx("button",{onClick:()=>q("markdown"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Export as Markdown"})]})]}),(j==="live"||j==="hybrid")&&e.jsxs("button",{onClick:b,disabled:u,className:"btn-ghost",children:[e.jsx(os,{size:16,className:u?"animate-spin":""}),"Refresh"]})]})]}),e.jsx("div",{className:"explore-tabs",children:V.map(S=>e.jsxs("button",{onClick:()=>r(S),className:`explore-tab ${m===S?"explore-tab-active":""}`,children:[I(S),F(S)]},S))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u&&j==="none"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{size:32,className:"animate-spin mx-auto mb-3",style:{color:"var(--primary-blue)"}}),e.jsx("p",{style:{color:"var(--explore-text-secondary)"},children:"Loading..."})]})}):e.jsxs(e.Fragment,{children:[m==="overview"&&e.jsx(Vs,{data:f,onNavigate:s,onSimulateField:z,onSwitchTab:S=>r(S)}),m==="plans"&&(p?e.jsx(Ut,{planId:p,onBack:()=>y(null)}):e.jsx(zt,{onSelectPlan:S=>y(S)})),m==="assets"&&e.jsx(lt,{data:f,onNavigate:s}),m==="patterns"&&e.jsx(bt,{data:f,onNavigate:s}),m==="validation"&&e.jsx(At,{data:f}),m==="simulate"&&e.jsx(Mt,{data:f,initialField:x})]})})]})}export{ya as ExploreDashboard,ya as default};
