import{c as ne,r as n,aA as Ie,aB as He,j as e,a4 as te,a5 as we,aC as se,ac as Pe,aD as me,aE as K,aF as le,aG as Se,aH as ke,aI as $e,H as Oe,a0 as qe,f as he,aJ as ze,R as xe,l as O,as as be,aK as Me,aL as Fe,aM as Ge,ai as ee,C as De,aN as re,aO as Ve,a6 as _e,G as Qe,at as ye,D as pe,ab as Ce,ad as oe,O as Je,aP as ve,ay as Ke,X as Re,aQ as Ne,$ as ge,a9 as Be,ap as ae,au as ue,u as We,aR as Xe,aw as Ye,aS as Ze,aT as es,aU as ss}from"./index-BYXjn4hA.js";import{F as as}from"./funnel-DPZwMpz0.js";import{L as ts}from"./list-k-ASkxhI.js";const ns=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],cs=ne("arrow-up-down",ns);const is=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],rs=ne("folder-open",is);const ls=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],os=ne("link-2-off",ls);const ds=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Te=ne("pin",ds);const us=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],ms=ne("snowflake",us);const hs=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ps=ne("upload",hs);function Z(m){let x=(m instanceof Error?m.message:String(m)).replace(/<[^>]*>/g,"");return x=x.replace(/javascript:/gi,""),x=x.replace(/on\w+\s*=/gi,""),x=x.substring(0,500),x}function fs({assets:m,onAssetClick:u,onAssetDragStart:x,selectedConnector:y}){const[v,f]=n.useState(!0),z=y?m.filter(C=>C.connectionName===y):m,E=Ie(z.filter(He),10);return E.length===0?null:e.jsxs("div",{className:"popular-assets-section",children:[e.jsxs("button",{className:"popular-assets-header",onClick:()=>f(!v),children:[e.jsx("span",{className:"popular-assets-icon",children:v?e.jsx(te,{size:14}):e.jsx(we,{size:14})}),e.jsx(se,{size:16,className:"flame-icon"}),e.jsx("span",{className:"popular-assets-title",children:"Popular Assets"}),e.jsx("span",{className:"popular-assets-count",children:E.length}),e.jsx(Pe,{size:14,className:"trending-icon"})]}),v&&e.jsx("div",{className:"popular-assets-list",children:E.map(C=>{const P=me(C),$=K(C),N=le(C);return e.jsxs("div",{className:`popular-asset-item ${$?"hot":N?"warm":""}`,onClick:()=>u(C),draggable:!0,onDragStart:B=>x(B,C),title:C.qualifiedName,children:[e.jsx("div",{className:"popular-asset-icon",children:$?e.jsx(se,{size:14,className:"hot-icon"}):N?e.jsx(Se,{size:14,className:"warm-icon"}):e.jsx("span",{children:"ðŸ“Š"})}),e.jsxs("div",{className:"popular-asset-info",children:[e.jsx("div",{className:"popular-asset-name",children:C.name}),e.jsxs("div",{className:"popular-asset-stats",children:[e.jsxs("span",{className:"stat",children:[ke(C.sourceReadCount)," queries"]}),C.sourceReadUserCount&&e.jsxs("span",{className:"stat",children:[C.sourceReadUserCount," users"]}),C.sourceLastReadAt&&e.jsx("span",{className:"stat",children:$e(C.sourceLastReadAt)})]})]}),e.jsxs("div",{className:"popular-asset-score",title:`Popularity: ${P}/10`,children:[e.jsx("span",{className:"score-value",children:P}),e.jsx("span",{className:"score-max",children:"/10"})]})]},C.guid)})})]})}function xs({sortBy:m,onSortChange:u,showPopularOnly:x,onShowPopularOnlyChange:y}){return e.jsxs("div",{className:"asset-browser-controls",children:[e.jsxs("div",{className:"control-group",children:[e.jsx(cs,{size:14,className:"control-icon"}),e.jsxs("select",{className:"sort-select",value:m,onChange:v=>u(v.target.value),title:"Sort assets",children:[e.jsx("option",{value:"name",children:"Sort: Name (A-Z)"}),e.jsx("option",{value:"popularity",children:"Sort: Popularity (High-Low)"}),e.jsx("option",{value:"recent",children:"Sort: Recent Activity"})]})]}),e.jsxs("label",{className:"filter-toggle",title:"Show only popular assets",children:[e.jsx(as,{size:14,className:"control-icon"}),e.jsx("input",{type:"checkbox",checked:x,onChange:v=>y(v.target.checked)}),e.jsx("span",{children:"Popular Only"})]})]})}function Ns({searchFilter:m="",onAssetsLoaded:u}){const x=Oe(),{toggleAsset:y,isSelected:v,selectedCount:f,clearAssets:z,addAsset:E,selectedAssets:C}=qe(),{setContext:P}=he(),{openInspector:$}=ze(),[N,B]=n.useState("disconnected"),[U,_]=n.useState([]),[L,T]=n.useState(null),[I,G]=n.useState([]),[F,H]=n.useState(new Set),[a,r]=n.useState(new Set),[l,g]=n.useState(null),[D,R]=n.useState("name"),[V,ce]=n.useState(!1),b=xe.useRef(!1),S=xe.useRef(!1),A=xe.useRef(N),q=n.useMemo(()=>{const s=[],t=i=>{for(const d of i)d.type==="table"&&d.asset&&s.push(d.asset),d.children&&t(d.children)};return t(I),s},[I]);n.useEffect(()=>{u&&q.length>0&&u(q)},[q,u]);const Q=n.useCallback(async()=>{if(!re()){B("disconnected"),g("Not configured. Connect to Atlan first.");return}if(!(b.current||S.current)){b.current=!0,B("connecting"),g(null);try{const s=await Ve();if(s.connected){B("connected");const t=await be();O.debug("Loaded connectors",{count:t.length}),_(t),S.current=!0,t.length>0&&T(i=>i||t[0].name)}else{B("error");const t=Z(new Error(s.error||"Connection failed"));g(t)}}catch(s){O.error("Connection error",s),B("error");const t=Z(s instanceof Error?s:new Error("Connection failed"));g(t)}finally{b.current=!1}}},[]),c=n.useCallback(async()=>{g(null);try{O.debug("Loading connections");const s=await be();O.debug("Loaded connectors",{count:s.length});const t=s.map(i=>({id:`connector-${i.name}`,name:i.name,qualifiedName:i.name,type:"connector",connectorName:i.name,children:[],isLoaded:!1,childCount:i.assetCount}));G(t)}catch(s){O.error("Failed to load connections",s);const t=Z(s instanceof Error?s:new Error("Failed to load connections"));g(t)}},[]),h=n.useCallback(async(s,t)=>{r(i=>new Set(i).add(t)),g(null);try{O.debug("Loading databases for connector",{connector:s});const i=await Me(s);O.debug("Loaded databases",{connector:s,count:i.length});const d=i.map(j=>({id:`db-${j.qualifiedName}`,name:j.name,qualifiedName:j.qualifiedName,type:"database",connectorName:s,children:[],isLoaded:!1,childCount:j.childCount,fullEntity:j.fullEntity}));G(j=>j.map(M=>M.id===t?{...M,children:d,isLoaded:!0}:M))}catch(i){O.error("Failed to load databases",i,{connector:s});const d=Z(i instanceof Error?i:new Error("Failed to load databases"));g(d)}finally{r(i=>{const d=new Set(i);return d.delete(t),d})}},[]);n.useEffect(()=>{const s=()=>{re()?Q():B("disconnected")};s(),A.current=N;const t=()=>{O.debug("Atlan connection established, checking..."),s()};window.addEventListener("atlan-connected",t);const i=setInterval(()=>{re()&&A.current==="disconnected"&&(O.debug("Detected configuration, checking connection..."),s())},3e3);return()=>{window.removeEventListener("atlan-connected",t),clearInterval(i)}},[N]),n.useEffect(()=>{A.current=N},[N]),n.useEffect(()=>{N==="connected"&&U.length>0&&I.length===0&&c()},[N,U.length]);const o=n.useCallback(async s=>{if(!(s.isLoaded||!s.qualifiedName)){r(t=>new Set(t).add(s.id)),g(null);try{const i=(await Fe(s.qualifiedName)).map(d=>({id:`schema-${d.qualifiedName}`,name:d.name,qualifiedName:d.qualifiedName,type:"schema",connectorName:s.connectorName,children:[],isLoaded:!1,childCount:d.childCount,fullEntity:d.fullEntity}));G(d=>d.map(j=>j.children?{...j,children:j.children.map(M=>M.id===s.id?{...M,children:i,isLoaded:!0}:M)}:j))}catch(t){const i=Z(t instanceof Error?t:new Error("Failed to load schemas"));g(i)}finally{r(t=>{const i=new Set(t);return i.delete(s.id),i})}}},[]),w=n.useCallback(async(s,t)=>{if(!t.isLoaded){r(i=>new Set(i).add(t.id)),g(null);try{const d=(await Ge({connector:t.connectorName||"",schemaQualifiedName:t.qualifiedName,assetTypes:["Table","View","MaterializedView"],size:200})).filter(j=>["Table","View","MaterializedView"].includes(j.typeName)).map(j=>({id:`table-${j.qualifiedName}`,name:j.name,qualifiedName:j.qualifiedName,type:"table",connectorName:t.connectorName,children:[],isLoaded:!0,asset:j}));G(j=>j.map(M=>M.children?{...M,children:M.children.map(X=>X.id===s.id?{...X,children:X.children?.map(k=>k.id===t.id?{...k,children:d,isLoaded:!0}:k)}:X)}:M))}catch(i){const d=Z(i instanceof Error?i:new Error("Failed to load tables"));g(d)}finally{r(i=>{const d=new Set(i);return d.delete(t.id),d})}}},[]),W=n.useCallback((s,t)=>{if(s.type==="table"&&s.asset)y(s.asset);else{const i=F.has(s.id);H(d=>{const j=new Set(d);return i?j.delete(s.id):(j.add(s.id),s.type==="connector"&&!s.isLoaded?h(s.connectorName||s.name,s.id):s.type==="database"&&!s.isLoaded?o(s):s.type==="schema"&&!s.isLoaded&&t&&w(t,s)),j})}},[F,y,h,o,w]),fe=n.useCallback(()=>{f!==0&&(P("manual",{},`${f} selected asset${f!==1?"s":""}`,C),x("/pivot"))},[f,C,P,x]),J=n.useCallback(s=>{const t=[];if(s.type==="table"&&s.asset&&t.push(s.asset),s.children)for(const i of s.children)t.push(...J(i));return t},[]),ie=(s,t)=>{s.stopPropagation(),s.dataTransfer.effectAllowed="copy";let i=[];if(t.type==="table"&&t.asset)i=[t.asset];else if(t.type==="schema")i=J(t);else if(t.type==="database")i=J(t);else if(t.type==="connector"){const j=(X,k)=>{for(const p of X){if(p.id===k)return p;if(p.children){const Y=j(p.children,k);if(Y)return Y}}return null},M=j(I,t.id);M&&i.push(...J(M))}i.length>0?(s.dataTransfer.setData("application/json",JSON.stringify({type:"atlan-assets",assets:i,nodeType:t.type,nodeName:t.name})),s.dataTransfer.setData("text/plain",`${t.name} (${i.length} table${i.length!==1?"s":""})`)):(s.dataTransfer.setData("application/json",JSON.stringify({type:"atlan-node",nodeType:t.type,nodeName:t.name,nodeId:t.id,qualifiedName:t.qualifiedName,connectorName:t.connectorName||L})),s.dataTransfer.setData("text/plain",`${t.name} (expand to load tables)`)),s.currentTarget.classList.add("dragging")},Ue=s=>{s.currentTarget.classList.remove("dragging")},Ae=n.useCallback(s=>[...s].sort((t,i)=>{if(D==="name")return t.name.localeCompare(i.name);if(D==="popularity"&&t.asset&&i.asset)return ee(i.asset)-ee(t.asset);if(D==="recent"&&t.asset&&i.asset){const d=t.asset.sourceLastReadAt??0;return(i.asset.sourceLastReadAt??0)-d}return 0}),[D]),Ee=n.useCallback(s=>V?s.filter(t=>t.type==="table"&&t.asset?K(t.asset)||le(t.asset):t.children?t.children.some(d=>d.type==="table"&&d.asset?K(d.asset)||le(d.asset):!1):!0):s,[V]),Le=(s,t=0,i)=>{const d=F.has(s.id),j=a.has(s.id),M=s.asset?v(s.asset.guid):!1;return e.jsxs("div",{className:"tree-node",children:[e.jsxs("div",{className:`tree-node-content ${M?"selected":""} ${s.type==="table"?"table-node":""} draggable`,style:{paddingLeft:`${t*16+8}px`},draggable:!0,onDragStart:k=>ie(k,s),onDragEnd:Ue,onClick:k=>{s.type==="table"?k.stopPropagation():W(s,i)},children:[s.type!=="table"&&e.jsx("span",{className:"tree-toggle",onClick:k=>{k.stopPropagation(),W(s,i)},children:d?e.jsx(te,{size:14}):e.jsx(we,{size:14})}),s.type==="table"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",checked:M,onChange:k=>{k.stopPropagation(),s.asset&&y(s.asset)},onMouseDown:k=>k.stopPropagation(),onClick:k=>k.stopPropagation(),className:"tree-checkbox"}),e.jsx("span",{className:"drag-handle",title:"Drag to Scorecard to add for scoring",onMouseDown:k=>k.stopPropagation(),children:"â‹®â‹®"})]}),e.jsxs("span",{className:"tree-icon",children:[s.type==="connector"&&"ðŸ”—",s.type==="database"&&"ðŸ—„ï¸",s.type==="schema"&&"ðŸ“",s.type==="table"&&"ðŸ“Š"]}),e.jsx("span",{className:`tree-name ${s.type==="table"&&s.asset&&K(s.asset)?"popular-hot":s.type==="table"&&s.asset&&le(s.asset)?"popular-warm":""} clickable`,onClick:async k=>{if(k.stopPropagation(),console.log("ðŸ” CLICKED NODE:",{type:s.type,name:s.name,qualifiedName:s.qualifiedName}),s.type==="table"&&s.asset)console.log("Opening table asset directly"),$(s.asset);else if(s.type==="connector"||s.type==="database"||s.type==="schema")if(s.fullEntity){console.log("ðŸ“¦ Using fullEntity from tree:",s.fullEntity);const p=s.fullEntity,Y={guid:p.guid,typeName:p.typeName,name:p.attributes?.name||s.name,qualifiedName:p.attributes?.qualifiedName||s.qualifiedName,connectionName:p.attributes?.connectionName||s.connectorName,description:p.attributes?.description,userDescription:p.attributes?.userDescription,ownerUsers:p.attributes?.ownerUsers,ownerGroups:p.attributes?.ownerGroups,certificateStatus:p.attributes?.certificateStatus,certificateStatusMessage:p.attributes?.certificateStatusMessage,certificateUpdatedAt:p.attributes?.certificateUpdatedAt,certificateUpdatedBy:p.attributes?.certificateUpdatedBy,classificationNames:p.attributes?.classificationNames,atlanTags:p.classifications?.map(de=>({typeName:de.typeName,propagate:de.propagate,restrictPropagationThroughLineage:de.restrictPropagationThroughLineage,restrictPropagationThroughHierarchy:de.restrictPropagationThroughHierarchy})),meanings:p.attributes?.meanings,assignedTerms:p.attributes?.assignedTerms,domainGUIDs:p.attributes?.domainGUIDs,schemaCount:p.attributes?.schemaCount,tableCount:p.attributes?.tableCount,viewCount:p.attributes?.viewCount,createTime:p.attributes?.createTime,updateTime:p.attributes?.updateTime,createdBy:p.attributes?.createdBy,updatedBy:p.attributes?.updatedBy,isDiscoverable:p.attributes?.isDiscoverable,isEditable:p.attributes?.isEditable,isAIGenerated:p.attributes?.isAIGenerated};console.log("âœ… Transformed asset:",Y),$(Y)}else{console.log("âš ï¸ No fullEntity, using minimal data");const p=s.type==="connector"?"Connection":s.type==="database"?"Database":"Schema",Y={guid:s.id,name:s.name,qualifiedName:s.qualifiedName,typeName:p,connectionName:s.connectorName};$(Y)}},title:s.type==="table"&&s.asset?`Click to view details

${s.qualifiedName}
ðŸ“Š Popularity: ${me(s.asset)}/10
${ke(s.asset.sourceReadCount)} queries${s.asset.sourceReadUserCount?` by ${s.asset.sourceReadUserCount} users`:""}
Last accessed: ${$e(s.asset.sourceLastReadAt)}`:`Click to view details

${s.qualifiedName}`,children:s.name}),s.type==="table"&&s.asset&&K(s.asset)&&e.jsxs("span",{className:"popularity-badge hot",title:"Highly popular asset",children:[e.jsx(se,{size:12})," Hot"]}),s.type==="table"&&s.asset&&le(s.asset)&&e.jsx("span",{className:"popularity-badge warm",title:"Popular asset",children:e.jsx(Se,{size:12})}),s.childCount!==void 0&&s.childCount>0&&e.jsx("span",{className:"tree-count",children:s.childCount}),s.type==="table"&&s.asset&&e.jsx("button",{className:"tree-lineage-btn",onClick:k=>{k.stopPropagation(),s.asset&&(E(s.asset),x(`/lineage?guid=${s.asset.guid}`))},title:"View Lineage",children:e.jsx(Qe,{size:12})}),j&&e.jsx(ye,{size:14,className:"tree-loading spinning"}),s.type!=="table"&&e.jsx("span",{className:"drag-hint",title:`Drag to select all tables under ${s.name}`,children:e.jsx(ps,{size:14})})]}),d&&s.children&&s.children.length>0&&e.jsx("div",{className:"tree-children",children:Ae(Ee(s.children)).map(k=>Le(k,t+1,s))})]},s.id)};return re()?e.jsxs(De,{className:"asset-browser",title:"Asset Browser",children:[e.jsx("div",{className:"asset-browser-header",children:N==="connected"&&U.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"browser-controls",children:[e.jsx("label",{htmlFor:"connector-select",className:"control-label",children:"Filter by Connection:"}),e.jsxs("select",{id:"connector-select",value:L||"",onChange:s=>T(s.target.value||null),className:"connector-select",draggable:!1,children:[e.jsx("option",{value:"",children:"All Connections"}),U.map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.assetCount.toLocaleString()," assets)"]},s.id))]})]}),e.jsxs("div",{className:"selected-info",children:[e.jsxs("span",{className:"selected-count",children:[e.jsx("strong",{children:f})," asset",f!==1?"s":""," selected"]}),f>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:fe,className:"analyze-btn",title:"Analyze selected assets in Pivot Builder",children:[e.jsx(_e,{size:14}),"Analyze Selected"]}),e.jsx("button",{onClick:z,className:"clear-btn",title:"Clear all selections",children:"Clear All"})]})]})]}):null}),l&&e.jsxs("div",{className:"browser-error",children:[e.jsx("span",{className:"error-icon",children:"âš ï¸"}),e.jsx("span",{children:l})]}),N==="connected"&&I.length>0&&e.jsx(xs,{sortBy:D,onSortChange:R,showPopularOnly:V,onShowPopularOnlyChange:ce}),e.jsxs("div",{className:"tree-container",children:[N==="disconnected"&&e.jsxs("div",{className:"tree-empty",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ”Œ"}),e.jsx("p",{children:re()?'Click "Check Connection" above to verify your Atlan connection':'Connect to Atlan using the button in the top right corner, then click "Check Connection" here'})]}),N==="connecting"&&e.jsxs("div",{className:"tree-empty",children:[e.jsx("div",{className:"tree-loading-spinner",children:"â³"}),e.jsx("p",{children:"Connecting to Atlan..."})]}),N==="connected"&&I.length===0&&!a.size&&e.jsxs("div",{className:"tree-empty",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ“‚"}),e.jsx("p",{children:"No connections found"}),e.jsx("p",{className:"empty-hint",children:"Check your Atlan permissions or try refreshing."})]}),I.length>0&&e.jsxs("div",{className:"tree-list",children:[e.jsx(fs,{assets:q,onAssetClick:s=>y(s),onAssetDragStart:(s,t)=>{s.dataTransfer.effectAllowed="copy",s.dataTransfer.setData("application/json",JSON.stringify({type:"atlan-assets",assets:[t],nodeType:"table",nodeName:t.name}))},selectedConnector:L}),Ae(Ee(I.filter(s=>!L||s.connectorName===L||s.name===L).filter(s=>{if(!m)return!0;const t=m.toLowerCase(),i=d=>!!(d.name.toLowerCase().includes(t)||d.children?.some(i));return i(s)}))).map(s=>Le(s))]})]})]}):e.jsx(De,{className:"asset-browser",title:"Asset Browser",children:e.jsxs("div",{className:"browser-empty-state",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ”Œ"}),e.jsx("h3",{children:"Connect to Atlan"}),e.jsxs("p",{children:["Click the ",e.jsx("strong",{children:'"Connect to Atlan"'})," button in the top right corner to get started."]}),e.jsx("p",{className:"empty-hint",children:"Once connected, you can browse your data assets and select them for quality scoring."})]})})}function gs({allAssets:m,onAssetSelect:u,onAssetDragStart:x,isSelected:y}){const{openInspector:v}=ze(),[f,z]=n.useState(""),[E,C]=n.useState(new Set(JSON.parse(localStorage.getItem("pinnedAssets")||"[]"))),[P,$]=n.useState(JSON.parse(localStorage.getItem("recentAssets")||"[]")),[N,B]=n.useState(!1),U=n.useMemo(()=>m.filter(a=>ee(a)>7).sort((a,r)=>ee(r)-ee(a)).slice(0,6),[m]),_=n.useMemo(()=>P.map(a=>m.find(r=>r.guid===a)).filter(Boolean),[P,m]),L=n.useMemo(()=>Array.from(E).map(a=>m.find(r=>r.guid===a)).filter(Boolean),[E,m]),T=n.useMemo(()=>{if(!f)return[];const a=f.toLowerCase();return m.filter(r=>r.name.toLowerCase().includes(a)||r.qualifiedName.toLowerCase().includes(a)||r.databaseName?.toLowerCase().includes(a)||r.schemaName?.toLowerCase().includes(a)).sort((r,l)=>{const g=r.name.toLowerCase()===a?1:0,D=l.name.toLowerCase()===a?1:0;return g!==D?D-g:ee(l)-ee(r)}).slice(0,50)},[f,m]),I=n.useMemo(()=>{const a=new Map;return m.forEach(r=>{const l=`${r.databaseName}/${r.schemaName}`;a.has(l)||a.set(l,[]),a.get(l).push(r)}),Array.from(a.entries()).map(([r,l])=>({path:r,database:r.split("/")[0],schema:r.split("/")[1],assets:l.sort((g,D)=>g.name.localeCompare(D.name)),hotCount:l.filter(K).length})).sort((r,l)=>l.hotCount-r.hotCount)},[m]),G=n.useCallback(a=>{C(r=>{const l=new Set(r);return l.has(a)?l.delete(a):l.add(a),localStorage.setItem("pinnedAssets",JSON.stringify(Array.from(l))),l})},[]),F=n.useCallback(a=>{$(r=>{const l=[a.guid,...r.filter(g=>g!==a.guid)].slice(0,10);return localStorage.setItem("recentAssets",JSON.stringify(l)),l}),v(a)},[v]),H=({asset:a,variant:r="default"})=>{const l=me(a),g=E.has(a.guid),D=y(a.guid);return e.jsxs("div",{className:`asset-card ${r} ${D?"selected":""} ${g?"pinned":""}`,onClick:()=>F(a),draggable:!0,onDragStart:R=>x(R,a),children:[e.jsxs("div",{className:"asset-card-header",children:[e.jsx("div",{className:"asset-icon",children:e.jsx(oe,{size:16})}),e.jsxs("div",{className:"asset-meta",children:[e.jsx("div",{className:"asset-name",children:a.name}),e.jsxs("div",{className:"asset-path",children:[a.databaseName," / ",a.schemaName]})]}),e.jsx("button",{className:"pin-btn",onClick:R=>{R.stopPropagation(),G(a.guid)},title:g?"Unpin":"Pin",children:e.jsx(Te,{size:12,className:g?"pinned":""})})]}),r==="hot"&&e.jsxs("div",{className:"asset-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx(Pe,{size:12}),e.jsxs("span",{children:[l,"/10"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx(Se,{size:12}),e.jsx("span",{children:ke(a.sourceReadCount)})]})]})]})};return m.length===0?e.jsx("div",{className:"asset-command-center",children:e.jsxs("div",{className:"loading-state",children:[e.jsx(pe,{size:48}),e.jsx("h3",{children:"Load Assets First"}),e.jsxs("p",{children:["Switch to ",e.jsx("strong",{children:"Tree view"})," and expand connections/databases/schemas to load assets."]}),e.jsx("p",{className:"hint",children:"Once assets are loaded, switch back to Quick view for instant search."})]})}):e.jsxs("div",{className:"asset-command-center",children:[e.jsxs("div",{className:"command-bar",children:[e.jsx(Ce,{size:20,className:"search-icon"}),e.jsx("input",{type:"text",className:"command-input",placeholder:"Search assets... (try: orders, customer, invoice)",value:f,onChange:a=>z(a.target.value),autoFocus:!0}),f&&e.jsxs("div",{className:"search-results-count",children:[T.length," results"]})]}),e.jsx("div",{className:"command-content",children:f?e.jsxs("div",{className:"search-results-zone",children:[e.jsxs("div",{className:"zone-header",children:[e.jsx("span",{className:"zone-title",children:"Results"}),e.jsx("span",{className:"zone-count",children:T.length})]}),e.jsx("div",{className:"results-list",children:T.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(Ce,{size:32}),e.jsxs("p",{children:['No assets match "',f,'"']})]}):T.map(a=>e.jsxs("div",{className:`result-item ${y(a.guid)?"selected":""}`,onClick:()=>F(a),draggable:!0,onDragStart:r=>x(r,a),children:[e.jsx(oe,{size:14,className:"result-icon"}),e.jsxs("div",{className:"result-info",children:[e.jsx("div",{className:"result-name",children:a.name}),e.jsxs("div",{className:"result-path",children:[a.databaseName," â€º ",a.schemaName]})]}),K(a)&&e.jsxs("div",{className:"result-badge hot",children:[e.jsx(se,{size:12}),me(a)]})]},a.guid))})]}):e.jsxs(e.Fragment,{children:[U.length>0&&e.jsxs("div",{className:"quick-access-zone",children:[e.jsxs("div",{className:"zone-header",children:[e.jsx(se,{size:16,className:"zone-icon hot"}),e.jsx("span",{className:"zone-title",children:"Hot Assets"}),e.jsx("span",{className:"zone-subtitle",children:"High query volume"})]}),e.jsx("div",{className:"asset-grid",children:U.map(a=>e.jsx(H,{asset:a,variant:"hot"},a.guid))})]}),L.length>0&&e.jsxs("div",{className:"quick-access-zone",children:[e.jsxs("div",{className:"zone-header",children:[e.jsx(Te,{size:16,className:"zone-icon"}),e.jsx("span",{className:"zone-title",children:"Pinned"}),e.jsx("span",{className:"zone-subtitle",children:"Your shortcuts"})]}),e.jsx("div",{className:"asset-list",children:L.map(a=>e.jsx(H,{asset:a},a.guid))})]}),_.length>0&&e.jsxs("div",{className:"quick-access-zone",children:[e.jsxs("div",{className:"zone-header",children:[e.jsx(Je,{size:16,className:"zone-icon"}),e.jsx("span",{className:"zone-title",children:"Recent"}),e.jsx("span",{className:"zone-subtitle",children:"Last accessed"})]}),e.jsx("div",{className:"asset-list",children:_.slice(0,5).map(a=>e.jsx(H,{asset:a},a.guid))})]}),e.jsxs("div",{className:"hierarchy-zone",children:[e.jsxs("button",{className:"zone-header clickable",onClick:()=>B(!N),children:[e.jsx("span",{className:"zone-icon",children:N?e.jsx(te,{size:16}):e.jsx(we,{size:16})}),e.jsx(pe,{size:16,className:"zone-icon"}),e.jsx("span",{className:"zone-title",children:"Browse All"}),e.jsxs("span",{className:"zone-subtitle",children:[I.length," schemas"]})]}),N&&e.jsx("div",{className:"hierarchy-content",children:I.slice(0,20).map(a=>e.jsxs("details",{className:"schema-group",children:[e.jsxs("summary",{className:"schema-header",children:[e.jsx(ve,{size:14}),e.jsxs("span",{className:"schema-name",children:[a.database," / ",a.schema]}),e.jsx("span",{className:"schema-count",children:a.assets.length}),a.hotCount>0&&e.jsxs("span",{className:"schema-badge",children:[e.jsx(se,{size:10}),a.hotCount]})]}),e.jsx("div",{className:"schema-assets",children:a.assets.map(r=>e.jsxs("div",{className:`schema-asset ${y(r.guid)?"selected":""}`,onClick:()=>F(r),draggable:!0,onDragStart:l=>x(l,r),children:[e.jsx(oe,{size:12}),e.jsx("span",{children:r.name}),K(r)&&e.jsx(se,{size:10,className:"asset-hot-icon"})]},r.guid))})]},a.path))})]})]})}),e.jsxs("div",{className:"command-footer",children:[e.jsxs("div",{className:"footer-stat",children:[e.jsx("span",{className:"stat-value",children:m.length}),e.jsx("span",{className:"stat-label",children:"total assets"})]}),e.jsxs("div",{className:"footer-stat",children:[e.jsx("span",{className:"stat-value",children:U.length}),e.jsx("span",{className:"stat-label",children:"hot assets"})]}),e.jsx("div",{className:"footer-hint",children:"Drag assets to context bar â€¢ Pin favorites â€¢ Search to filter"})]})]})}function js({isOpen:m,onClose:u}){const[x,y]=n.useState(""),[v,f]=n.useState("tree"),[z,E]=n.useState([]),{toggleAsset:C,isSelected:P}=qe();return n.useEffect(()=>{m&&v==="command"&&z.length===0&&f("tree")},[m,v,z.length]),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"asset-panel-backdrop",onClick:u}),e.jsxs("div",{className:"asset-panel",children:[e.jsxs("div",{className:"asset-panel-header",children:[e.jsxs("div",{className:"asset-panel-title",children:[e.jsx(rs,{size:18}),e.jsx("span",{children:"Asset Browser"})]}),e.jsxs("div",{className:"view-toggle",children:[e.jsxs("button",{className:`view-toggle-btn ${v==="command"?"active":""}`,onClick:()=>f("command"),title:"Command Center (Quick Access)",children:[e.jsx(Ke,{size:14}),e.jsx("span",{children:"Quick"})]}),e.jsxs("button",{className:`view-toggle-btn ${v==="tree"?"active":""}`,onClick:()=>f("tree"),title:"Tree View (Full Hierarchy)",children:[e.jsx(ts,{size:14}),e.jsx("span",{children:"Tree"})]})]}),e.jsx("button",{className:"asset-panel-close",onClick:u,title:"Close",children:e.jsx(Re,{size:18})})]}),e.jsxs("div",{className:"asset-panel-content",children:[e.jsxs("div",{style:{display:v==="tree"?"flex":"none",flexDirection:"column",height:"100%"},children:[e.jsxs("div",{className:"asset-panel-search",children:[e.jsx(Ce,{size:16,color:"#666"}),e.jsx("input",{type:"text",placeholder:"Search assets...",value:x,onChange:$=>y($.target.value),autoFocus:v==="tree"})]}),e.jsx(Ns,{searchFilter:x,onAssetsLoaded:E})]}),v==="command"&&e.jsx(gs,{allAssets:z,onAssetSelect:C,onAssetDragStart:($,N)=>{$.dataTransfer.effectAllowed="copy",$.dataTransfer.setData("application/json",JSON.stringify({type:"atlan-assets",assets:[N],nodeType:"table",nodeName:N.name}))},isSelected:P})]})]})]}):null}function je(m){if(!m)return null;const u=m;return{guid:u.guid,typeName:u.typeName,name:u.attributes?.name||u.name,qualifiedName:u.attributes?.qualifiedName||u.qualifiedName,connectionName:u.attributes?.connectionName||u.attributes?.connectorName,connectionQualifiedName:u.attributes?.connectionQualifiedName,description:u.attributes?.description,userDescription:u.attributes?.userDescription,ownerUsers:u.attributes?.ownerUsers,ownerGroups:u.attributes?.ownerGroups,certificateStatus:u.attributes?.certificateStatus,certificateStatusMessage:u.attributes?.certificateStatusMessage,certificateUpdatedAt:u.attributes?.certificateUpdatedAt,certificateUpdatedBy:u.attributes?.certificateUpdatedBy,classificationNames:u.attributes?.classificationNames,atlanTags:u.classifications?.map(x=>({typeName:x.typeName,propagate:x.propagate})),meanings:u.attributes?.meanings,assignedTerms:u.attributes?.assignedTerms,domainGUIDs:u.attributes?.domainGUIDs,createTime:u.attributes?.createTime,updateTime:u.attributes?.updateTime,createdBy:u.attributes?.createdBy,updatedBy:u.attributes?.updatedBy}}function bs(){const{context:m,contextAssets:u,setContext:x,setLoading:y}=he(),{openInspector:v}=ze(),[f,z]=n.useState(null),[E,C]=n.useState(null),[P,$]=n.useState([]),[N,B]=n.useState([]),[U,_]=n.useState([]),[L,T]=n.useState(new Map),[I,G]=n.useState(new Map),[F,H]=n.useState(new Map),[a,r]=n.useState(null),[l,g]=n.useState(null),[D,R]=n.useState(null),V=n.useRef(null);n.useEffect(()=>{be().then(c=>{const h=new Map;c.forEach(o=>{o.fullEntity&&h.set(o.name,o.fullEntity)}),T(h),$(c)}).catch(console.error)},[]),n.useEffect(()=>{m&&(r(m.filters.connectionName||null),g(m.filters.databaseName||null),R(m.filters.schemaName||null))},[m]),n.useEffect(()=>{function c(h){V.current&&!V.current.contains(h.target)&&z(null)}return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),n.useEffect(()=>{a?(C("database"),Me(a).then(c=>{const h=new Map;c.forEach(o=>{o.fullEntity&&h.set(o.qualifiedName,o.fullEntity)}),G(h),B(c.map(o=>({id:o.qualifiedName,name:o.name,displayName:o.name,qualifiedName:o.qualifiedName,count:o.childCount,icon:e.jsx(ve,{size:16})})))}).catch(console.error).finally(()=>C(null))):(B([]),_([]),G(new Map),H(new Map),g(null),R(null))},[a]),n.useEffect(()=>{if(l&&a){C("schema");const c=N.find(h=>h.name===l)?.qualifiedName;c&&Fe(c).then(h=>{const o=new Map;h.forEach(w=>{w.fullEntity&&o.set(w.qualifiedName,w.fullEntity)}),H(o),_(h.map(w=>({id:w.qualifiedName,name:w.name,displayName:w.name,qualifiedName:w.qualifiedName,count:w.childCount,icon:e.jsx(oe,{size:16})})))}).catch(console.error).finally(()=>C(null))}else _([]),H(new Map),R(null)},[l,a,N]);const ce=async c=>{r(c),g(null),R(null),z(null),y(!0);try{const h=await ae("connection",{connectionName:c}),o=ue("connection",{connectionName:c});x("connection",{connectionName:c},o,h)}catch(h){console.error("Failed to load connection context:",h)}y(!1)},b=async c=>{if(g(c),R(null),z(null),!!a){y(!0);try{const h=await ae("database",{connectionName:a,databaseName:c}),o=ue("database",{connectionName:a,databaseName:c});x("database",{connectionName:a,databaseName:c},o,h)}catch(h){console.error("Failed to load database context:",h)}y(!1)}},S=async c=>{if(R(c),z(null),!(!a||!l)){y(!0);try{const h=await ae("schema",{connectionName:a,databaseName:l,schemaName:c}),o=ue("schema",{connectionName:a,databaseName:l,schemaName:c});x("schema",{connectionName:a,databaseName:l,schemaName:c},o,h)}catch(h){console.error("Failed to load schema context:",h)}y(!1)}},A=()=>{r(null),g(null),R(null),z(null)},q=c=>{const h=c.toLowerCase();return h.includes("snowflake")?e.jsx(ms,{size:16}):h.includes("bigquery")?e.jsx(pe,{size:16}):e.jsx(Be,{size:16})},Q=u.length;return e.jsx("div",{className:"hierarchical-context-bar",ref:V,children:e.jsxs("div",{className:"context-breadcrumbs",children:[e.jsxs("div",{className:"breadcrumb-segment",children:[e.jsxs("button",{className:`breadcrumb-trigger ${f==="connection"?"active":""} ${a?"selected":""}`,onClick:()=>z(f==="connection"?null:"connection"),children:[a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"breadcrumb-icon",children:q(a)}),e.jsx("span",{className:"breadcrumb-label",children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{size:16,className:"text-muted"}),e.jsx("span",{className:"breadcrumb-label breadcrumb-placeholder",children:"Connection"})]}),e.jsx(te,{size:12,className:"breadcrumb-chevron"})]}),f==="connection"&&e.jsxs("div",{className:"breadcrumb-dropdown",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("span",{children:"Select Connection"}),e.jsxs("span",{className:"dropdown-count",children:[P.length," available"]})]}),e.jsx("div",{className:"dropdown-items",children:P.map(c=>e.jsxs("div",{className:"dropdown-item-wrapper",children:[e.jsxs("button",{className:`dropdown-item ${a===c.name?"selected":""}`,onClick:()=>ce(c.name),children:[q(c.name),e.jsx("span",{className:"item-name",children:c.name}),c.assetCount!==void 0&&e.jsx("span",{className:"item-count",children:c.assetCount.toLocaleString()}),a===c.name&&e.jsx(Ne,{size:14,className:"item-check"})]}),L.has(c.name)&&e.jsx("button",{className:"item-info-btn",onClick:h=>{h.stopPropagation();const o=L.get(c.name);if(o){const w=je(o);v(w)}},title:"View connection details",children:e.jsx(ge,{size:14})})]},c.id))})]})]}),e.jsx("span",{className:"breadcrumb-separator",children:"/"}),e.jsxs("div",{className:"breadcrumb-segment",children:[e.jsxs("button",{className:`breadcrumb-trigger ${f==="database"?"active":""} ${l?"selected":""}`,onClick:()=>{a&&z(f==="database"?null:"database")},disabled:!a||E==="database",children:[l?e.jsx(e.Fragment,{children:e.jsx("span",{className:"breadcrumb-label",children:l})}):e.jsx("span",{className:"breadcrumb-label breadcrumb-placeholder",children:E==="database"?"Loading...":"Database"}),E==="database"?e.jsx(ye,{size:12,className:"breadcrumb-spinner"}):e.jsx(te,{size:12,className:"breadcrumb-chevron"})]}),f==="database"&&N.length>0&&e.jsxs("div",{className:"breadcrumb-dropdown",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("span",{children:"Select Database"}),e.jsxs("span",{className:"dropdown-count",children:[N.length," available"]})]}),e.jsx("div",{className:"dropdown-items",children:N.map(c=>e.jsxs("div",{className:"dropdown-item-wrapper",children:[e.jsxs("button",{className:`dropdown-item ${l===c.name?"selected":""}`,onClick:()=>b(c.name),children:[e.jsx(ve,{size:16}),e.jsx("span",{className:"item-name",children:c.displayName}),c.count!==void 0&&e.jsx("span",{className:"item-count",children:c.count.toLocaleString()}),l===c.name&&e.jsx(Ne,{size:14,className:"item-check"})]}),I.has(c.id)&&e.jsx("button",{className:"item-info-btn",onClick:h=>{h.stopPropagation();const o=I.get(c.id);if(o){const w=je(o);v(w)}},title:"View database details",children:e.jsx(ge,{size:14})})]},c.id))})]})]}),e.jsx("span",{className:"breadcrumb-separator",children:"/"}),e.jsxs("div",{className:"breadcrumb-segment",children:[e.jsxs("button",{className:`breadcrumb-trigger ${f==="schema"?"active":""} ${D?"selected":""}`,onClick:()=>{l&&z(f==="schema"?null:"schema")},disabled:!l||E==="schema",children:[D?e.jsx(e.Fragment,{children:e.jsx("span",{className:"breadcrumb-label",children:D})}):e.jsx("span",{className:"breadcrumb-label breadcrumb-placeholder",children:E==="schema"?"Loading...":"Schema"}),D&&Q>0&&e.jsx("span",{className:"breadcrumb-count-pill",children:Q}),E==="schema"?e.jsx(ye,{size:12,className:"breadcrumb-spinner"}):e.jsx(te,{size:12,className:"breadcrumb-chevron"})]}),f==="schema"&&U.length>0&&e.jsxs("div",{className:"breadcrumb-dropdown",children:[e.jsxs("div",{className:"dropdown-header",children:[e.jsx("span",{children:"Select Schema"}),e.jsxs("span",{className:"dropdown-count",children:[U.length," available"]})]}),e.jsx("div",{className:"dropdown-items",children:U.map(c=>e.jsxs("div",{className:"dropdown-item-wrapper",children:[e.jsxs("button",{className:`dropdown-item ${D===c.name?"selected":""}`,onClick:()=>S(c.name),children:[e.jsx(oe,{size:16}),e.jsx("span",{className:"item-name",children:c.displayName}),c.count!==void 0&&e.jsx("span",{className:"item-count",children:c.count.toLocaleString()}),D===c.name&&e.jsx(Ne,{size:14,className:"item-check"})]}),F.has(c.id)&&e.jsx("button",{className:"item-info-btn",onClick:h=>{h.stopPropagation();const o=F.get(c.id);if(o){const w=je(o);v(w)}},title:"View schema details",children:e.jsx(ge,{size:14})})]},c.id))})]})]}),a&&e.jsx("button",{className:"context-clear-btn-icon",onClick:A,title:"Clear context",children:e.jsx(Re,{size:14})})]})})}function ws({title:m,subtitle:u,children:x}){const[y,v]=n.useState(!1),[f,z]=n.useState(!1),[E,C]=n.useState(""),[P,$]=n.useState(""),[N,B]=n.useState(null),[U,_]=n.useState(!1),{context:L,contextAssets:T,error:I,setContext:G,setLoading:F,setError:H}=he(),{setAssetsWithScores:a}=We(),[r,l]=n.useState(!1),[g,D]=n.useState(!1);n.useEffect(()=>{const b=Xe();b&&$(b);const S=ss();v(!!S)},[]);const R=n.useRef(!1);n.useEffect(()=>{(async()=>{if(!(!L||!y||R.current)&&L.assetCount>0&&T.length===0){R.current=!0,O.info("AppHeader: Reloading assets from persisted context",{contextType:L.type,contextLabel:L.label,expectedCount:L.assetCount}),F(!0);try{const S=await ae(L.type,L.filters);O.info("AppHeader: Assets reloaded",{count:S.length}),he.getState().setContextAssets(S)}catch(S){O.error("AppHeader: Failed to reload assets",S),H("Failed to reload assets. Please reselect your context.")}finally{F(!1)}}})()},[L,T.length,y,F,H]),n.useEffect(()=>{R.current=!1},[L?.label]);const V=n.useRef(0);n.useEffect(()=>{T.length>0&&T.length!==V.current?(V.current=T.length,O.info("AppHeader: Triggering score calculation",{assetCount:T.length}),a(T)):T.length===0&&V.current>0&&(V.current=0)},[T,a]);const ce=async b=>{b.preventDefault(),B(null),_(!0);try{await Ze({apiKey:E,baseUrl:P}),es({apiKey:E,baseUrl:P}),v(!0),z(!1),window.dispatchEvent(new CustomEvent("atlan-connected",{detail:{baseUrl:P}}))}catch(S){let A=S instanceof Error?S.message:"Failed to connect to Atlan.";(A.includes("ERR_CONNECTION_REFUSED")||A.includes("Proxy server not running"))&&(A="Proxy server not running. Start with: npm run proxy"),B(Z(new Error(A)))}finally{_(!1)}};return n.useCallback(b=>{b.preventDefault(),b.stopPropagation(),b.dataTransfer.dropEffect="copy",l(!0)},[]),n.useCallback(b=>{b.preventDefault(),b.stopPropagation();const S=b.currentTarget.getBoundingClientRect(),{clientX:A,clientY:q}=b;(A<S.left||A>S.right||q<S.top||q>S.bottom)&&l(!1)},[]),n.useCallback(async b=>{b.preventDefault(),b.stopPropagation(),l(!1),F(!0),H(null);try{const S=b.dataTransfer.getData("application/json");if(!S)return;const A=JSON.parse(S);if(A.type==="atlan-assets"&&A.assets?.length){const q=A.assets,Q=A.nodeName||"Selected Assets";G("manual",{},Q,q)}else if(A.type==="atlan-node"){const{nodeType:q,nodeName:Q,connectorName:c,qualifiedName:h}=A;let o,w,W;if(q==="connector"||q==="connection")o="connection",w={connectionName:Q||c},W=await ae(o,w);else if(q==="database")o="database",w={connectionName:c||A.connectionName,databaseName:Q},W=await ae(o,w);else if(q==="schema"){o="schema";let J=A.databaseName;if(!J&&h){const ie=h.split("/");ie.length>=2&&(J=ie[ie.length-2])}w={connectionName:c||A.connectionName,databaseName:J,schemaName:Q},W=await ae(o,w)}else throw new Error(`Unsupported node type: ${q}`);const fe=ue(o,w);G(o,w,fe,W)}}catch(S){O.error("Failed to handle context drop",S),H(S instanceof Error?S.message:"Failed to set context")}finally{F(!1)}},[G,F,H]),e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"app-header-brand",children:[e.jsx(Ye,{to:"/",className:"app-header-logo",title:"Go to home",children:e.jsx("div",{className:"logo-icon-small",children:"MQ"})}),m&&e.jsx("div",{className:"header-divider"}),m&&e.jsx("div",{className:"app-header-title-group",children:e.jsx("h1",{children:m})})]}),e.jsx("div",{className:"app-header-context",children:y?e.jsx(bs,{}):e.jsx("div",{className:"context-placeholder",children:e.jsx("span",{children:"Connect to Atlan to explore assets"})})}),e.jsxs("div",{className:"app-header-actions",children:[x,e.jsx("div",{className:"header-divider"}),e.jsxs("button",{className:`connection-btn ${y?"connected":""}`,onClick:()=>z(!0),children:[y?e.jsx(Be,{size:16}):e.jsx(os,{size:16}),e.jsx("span",{children:y?"Connected":"Connect"})]})]})]}),e.jsx(js,{isOpen:g,onClose:()=>D(!1)}),f&&e.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:e.jsxs("form",{className:"connect-modal",onClick:b=>b.stopPropagation(),onSubmit:ce,children:[e.jsx("h2",{children:"Connect to Atlan"}),e.jsx("input",{type:"text",placeholder:"API Key",value:E,onChange:b=>C(b.target.value),autoFocus:!0}),e.jsx("input",{type:"text",placeholder:"Base URL (e.g., https://your-tenant.atlan.com)",value:P,onChange:b=>$(b.target.value)}),N&&e.jsx("div",{className:"connect-error",children:N}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>z(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:U,children:U?"Connecting...":"Connect"})]})]})})]})}export{ws as A,Te as P,ms as S,ps as U};
