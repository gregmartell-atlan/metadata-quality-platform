import{l as o,d as p,p as a}from"./index-BYXjn4hA.js";const r=new Map;function W(e){o.debug("[WidgetRegistry] Registering widget:",e.type),r.set(e.type,e)}function c(e){const i=r.get(e);return o.debug("[WidgetRegistry] Lookup:",{type:e,found:!!i,registrySize:r.size}),i}function l(e){const i=Array.from(r.values());return e?i.filter(n=>n.category===e):i}const f=p()(a((e,i)=>({pinnedWidgets:[],maxPinned:6,pinWidget:(n,t)=>{const{pinnedWidgets:d,maxPinned:s}=i();if(!d.some(g=>g.widgetType===n)){if(d.length>=s){console.warn(`Cannot pin more than ${s} widgets`);return}e({pinnedWidgets:[...d,{widgetType:n,pinnedAt:Date.now(),config:t}]})}},unpinWidget:n=>{e(t=>({pinnedWidgets:t.pinnedWidgets.filter(d=>d.widgetType!==n)}))},isPinned:n=>i().pinnedWidgets.some(t=>t.widgetType===n),reorderPinned:(n,t)=>{e(d=>{const s=[...d.pinnedWidgets],[g]=s.splice(n,1);return s.splice(t,0,g),{pinnedWidgets:s}})},clearAllPinned:()=>{e({pinnedWidgets:[]})}}),{name:"pinned-widgets-storage",version:1}));export{l as a,c as g,W as r,f as u};
