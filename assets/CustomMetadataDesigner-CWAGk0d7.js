import{c as g,b7 as f,j as l,E as h,r as y}from"./index-BYXjn4hA.js";import{u as w}from"./modelStore-DuNXWet2.js";const b=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],q=g("pencil",b);function v(t){const e=t.toLowerCase();return e.includes("table")?"Table":e.includes("view")?"View":e.includes("column")?"Column":e.includes("schema")?"Schema":e.includes("database")?"Database":e.includes("dashboard")?"Dashboard":e.includes("report")?"Report":e.includes("dataset")?"Dataset":e.includes("metric")?"Model":(e.includes("glossary"),"Table")}function k(t){return t.map(e=>({field:e,requirement:"required",helpText:`Generated requirement for ${e}`}))}function S(t){const e=new Map;t.metadataModel.forEach(i=>{const u=v(i.assetType);e.has(u)||e.set(u,new Set);const a=e.get(u);i.metadataElements.forEach(s=>a.add(s))});const r=Array.from(e.entries()).map(([i,u])=>({assetType:i,requirements:k(Array.from(u))})),n={id:f(),name:t.name,description:t.description,status:"draft",owner:"Metadata Assistant",targetDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],assetTypeRequirements:r,domainOverrides:[],connectorOverrides:[],certificationRules:[],conditionalRules:[]},d=new Date().toISOString(),c={id:f(),versionNumber:1,createdAt:d,createdBy:"assistant",description:"Initial generation from Metadata Assistant",matrix:n,changeLog:["Created from project: "+t.name]};return{id:f(),name:t.name,description:t.description,domains:t.domains,status:"draft",createdAt:d,updatedAt:d,currentMatrix:n,versions:[c],activeDraft:c,targetDate:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],managers:(t.stakeholders||[]).filter(i=>i.role.toLowerCase().includes("manager")||i.role.toLowerCase().includes("lead")).map(i=>i.email),reviewers:(t.stakeholders||[]).filter(i=>i.role.toLowerCase().includes("reviewer")||i.role.toLowerCase().includes("approver")).map(i=>i.email),owners:(t.stakeholders||[]).filter(i=>i.role.toLowerCase().includes("owner")).map(i=>i.email),owner:(t.stakeholders||[]).find(i=>i.role.toLowerCase().includes("owner"))?.email,contributors:{},requirements:[],progress:[],createdBy:"assistant"}}const T=[{id:"quick-discovery",name:"Quick Discovery",description:"Enable users to find and understand data assets quickly",useCase:"Organizations prioritizing self-service data discovery",suggestedTimeline:"4-6 weeks",prerequisites:[],personas:["analyst","data-engineer"],outcomes:["Reduced time-to-data for analysts",'Fewer "who owns this?" Slack messages',"Better search results in catalog"],fields:[{field:"description",requirement:"required",rationale:"Users need to understand what the asset contains"},{field:"ownerUsers",requirement:"required",rationale:"Users need to know who to contact for questions"},{field:"glossaryTerms",requirement:"recommended",rationale:"Standardizes terminology for search"},{field:"certificateStatus",requirement:"recommended",rationale:"Signals trustworthiness"},{field:"starredBy",requirement:"optional",rationale:"Social proof of useful assets"},{field:"readme",requirement:"optional",rationale:"Deep context for power users"}]},{id:"trusted-metrics",name:"Trusted Metrics",description:"Establish single source of truth for KPIs and calculations",useCase:"Organizations with metric inconsistency or duplicate definitions",suggestedTimeline:"6-8 weeks",prerequisites:["Glossary structure defined"],personas:["analyst","executive","data-steward"],outcomes:["One definition per metric","Clear ownership of KPI calculations","Audit trail for metric changes"],fields:[{field:"glossaryTerms",requirement:"required",rationale:"Links metrics to official definitions"},{field:"ownerUsers",requirement:"required",rationale:"Accountable party for metric accuracy"},{field:"lineage",requirement:"required",rationale:"Shows how metric is calculated"},{field:"certificateStatus",requirement:"required",rationale:"Distinguishes official vs unofficial"},{field:"description",requirement:"recommended",rationale:"Explains calculation methodology"},{field:"customMetadata",requirement:"recommended",rationale:"Business context like refresh frequency"}]},{id:"compliance-ready",name:"Compliance Ready",description:"Prepare for regulatory audits and data governance requirements",useCase:"Organizations in regulated industries (finance, healthcare, etc.)",suggestedTimeline:"8-12 weeks",prerequisites:["Classification taxonomy defined","Access policies designed"],personas:["data-steward","executive"],outcomes:["Audit-ready documentation","Automated compliance reporting","Reduced risk of regulatory fines"],fields:[{field:"atlanTags",requirement:"required",rationale:"Classification is non-negotiable for compliance"},{field:"ownerUsers",requirement:"required",rationale:"Accountability chain for auditors"},{field:"accessPolicies",requirement:"required",rationale:"Demonstrates access control"},{field:"lineage",requirement:"recommended",rationale:"Data flow documentation for audits"},{field:"description",requirement:"recommended",rationale:"Context for auditors"},{field:"customMetadata",requirement:"recommended",rationale:"Retention policies, data sources"}]},{id:"root-cause-analysis",name:"Root Cause Analysis",description:"Enable fast debugging of data quality and pipeline issues",useCase:"Organizations with frequent data incidents or quality problems",suggestedTimeline:"6-8 weeks",prerequisites:["Lineage connectors configured"],personas:["data-engineer"],outcomes:["Faster incident resolution","Clear escalation paths","Impact analysis before changes"],fields:[{field:"lineage",requirement:"required",rationale:"Must trace data flow to find issues"},{field:"ownerUsers",requirement:"required",rationale:"Know who to escalate to"},{field:"description",requirement:"recommended",rationale:"Understanding expected behavior"},{field:"customMetadata",requirement:"recommended",rationale:"SLAs, freshness expectations"},{field:"links",requirement:"optional",rationale:"Runbooks, incident playbooks"}]},{id:"data-product",name:"Data Product",description:"Package data as a self-service product for consumers",useCase:"Organizations building internal data marketplace or mesh",suggestedTimeline:"10-14 weeks",prerequisites:["Data product framework defined","Consumer personas identified"],personas:["data-engineer","data-steward","analyst"],outcomes:["Productized, consumable data","Clear SLAs and expectations","Self-service access requests"],fields:[{field:"readme",requirement:"required",rationale:"Product documentation is essential"},{field:"ownerUsers",requirement:"required",rationale:"Product owner accountability"},{field:"certificateStatus",requirement:"required",rationale:"Production-ready signal"},{field:"glossaryTerms",requirement:"required",rationale:"Consistent terminology"},{field:"description",requirement:"required",rationale:"Quick product overview"},{field:"lineage",requirement:"recommended",rationale:"Transparency on sources"},{field:"accessPolicies",requirement:"recommended",rationale:"Self-service access requests"},{field:"customMetadata",requirement:"recommended",rationale:"SLAs, update frequency, cost"},{field:"links",requirement:"optional",rationale:"Sample queries, tutorials"}]}],A=[{id:"primary-goal",question:"What's your primary goal?",multiSelect:!1,options:[{id:"find-data",label:"Help people find data faster",description:"Improve search and discovery experience",patternsToBoost:["quick-discovery"],fieldsToRequire:["description","ownerUsers"]},{id:"pass-audits",label:"Pass regulatory audits",description:"GDPR, HIPAA, SOX, or internal compliance",patternsToBoost:["compliance-ready"],fieldsToRequire:["atlanTags","ownerUsers","accessPolicies"]},{id:"fix-metrics",label:"Fix inconsistent metrics",description:"Multiple definitions of the same KPI",patternsToBoost:["trusted-metrics"],fieldsToRequire:["glossaryTerms","certificateStatus"]},{id:"debug-issues",label:"Debug data issues faster",description:"Root cause analysis and impact assessment",patternsToBoost:["root-cause-analysis"],fieldsToRequire:["lineage","ownerUsers"]},{id:"data-products",label:"Build data products",description:"Internal marketplace or data mesh",patternsToBoost:["data-product"],fieldsToRequire:["readme","certificateStatus","glossaryTerms"]}]},{id:"team-size",question:"How large is your data team?",multiSelect:!1,options:[{id:"small",label:"Small (1-10)",description:"Centralized, everyone knows everyone",patternsToBoost:["quick-discovery"]},{id:"medium",label:"Medium (10-50)",description:"Starting to need formal processes",patternsToBoost:["quick-discovery","trusted-metrics"]},{id:"large",label:"Large (50+)",description:"Federated teams, formal governance needed",patternsToBoost:["compliance-ready","data-product"]}]},{id:"maturity",question:"Where are you on the governance journey?",multiSelect:!1,options:[{id:"starting",label:"Just starting",description:"Little to no metadata today",patternsToBoost:["quick-discovery"]},{id:"scaling",label:"Scaling up",description:"Some metadata, need consistency",patternsToBoost:["trusted-metrics","compliance-ready"]},{id:"optimizing",label:"Optimizing",description:"Good coverage, need refinement",patternsToBoost:["data-product","root-cause-analysis"]}]},{id:"pain-points",question:"What are your biggest pain points? (Select all that apply)",multiSelect:!0,options:[{id:"no-owners",label:"Nobody owns the data",description:"Questions go unanswered",patternsToBoost:["quick-discovery","compliance-ready"],fieldsToRequire:["ownerUsers","ownerGroups"]},{id:"no-descriptions",label:"Can't understand what data means",description:"Cryptic column names, no context",patternsToBoost:["quick-discovery"],fieldsToRequire:["description","glossaryTerms"]},{id:"no-lineage",label:"Don't know where data comes from",description:"Impact analysis is guesswork",patternsToBoost:["root-cause-analysis"],fieldsToRequire:["lineage"]},{id:"no-trust",label:"Don't know what to trust",description:"Multiple versions, no certification",patternsToBoost:["trusted-metrics","data-product"],fieldsToRequire:["certificateStatus"]},{id:"compliance-risk",label:"Compliance risk",description:"PII exposure, audit concerns",patternsToBoost:["compliance-ready"],fieldsToRequire:["atlanTags","accessPolicies"]}]}];function D(t){return t.fields.filter(e=>e.requirement==="required").map(e=>e.field)}function R(t){return t.fields.filter(e=>e.requirement==="recommended").map(e=>e.field)}function x(t,e){let r=0;for(const[n,d]of Object.entries(e)){const c=A.find(u=>u.id===n);if(!c)continue;const i=Array.isArray(d)?d:[d];for(const u of i)c.options.find(s=>s.id===u)?.patternsToBoost.includes(t.id)&&(r+=10)}return r}function E(t){return T.map(r=>({pattern:r,score:x(r,t)})).sort((r,n)=>n.score-r.score).map(r=>r.pattern)}const L=[{id:"ownerUsers",displayName:"Owner (Users)",description:"Individual user(s) accountable for the asset",purpose:"Accountability and contact point",whenNeeded:"Always - foundational for governance",weight:30,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"ownerGroups",displayName:"Owner (Groups)",description:"Team or group accountable for the asset",purpose:"Team-level accountability",whenNeeded:"When ownership is shared across a team",weight:15,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"description",displayName:"Description",description:"Human-readable explanation of the asset",purpose:"Understanding what the data contains",whenNeeded:"Discovery use cases, onboarding",weight:20,effort:"medium",effortMinutes:4,autoPopulated:!1,bulkAssignable:!1},{id:"userDescription",displayName:"User Description",description:"Crowdsourced descriptions from data consumers",purpose:"Community knowledge capture",whenNeeded:"Self-service environments",weight:10,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!1},{id:"readme",displayName:"README",description:"Long-form documentation with formatting",purpose:"Detailed context, usage examples, caveats",whenNeeded:"Data products, complex assets",weight:5,effort:"high",effortMinutes:15,autoPopulated:!1,bulkAssignable:!1},{id:"atlanTags",displayName:"Classifications",description:"Tags for categorization and policy enforcement",purpose:"Classification, access control, compliance",whenNeeded:"Compliance, access control, PII detection",weight:25,effort:"medium",effortMinutes:3,autoPopulated:!0,bulkAssignable:!0},{id:"certificateStatus",displayName:"Certificate",description:"Trust level indicator (Draft, Verified, Deprecated)",purpose:"Signal trustworthiness to consumers",whenNeeded:"Self-service analytics, data marketplace",weight:25,effort:"low",effortMinutes:1,autoPopulated:!1,bulkAssignable:!0},{id:"glossaryTerms",displayName:"Glossary Terms",description:"Links to business glossary definitions",purpose:"Standardize terminology, link to business meaning",whenNeeded:"Metric consistency, business alignment",weight:15,effort:"medium",effortMinutes:4,autoPopulated:!1,bulkAssignable:!1},{id:"lineage",displayName:"Lineage",description:"Data flow connections (upstream/downstream)",purpose:"Impact analysis, root cause debugging",whenNeeded:"Debugging, compliance, change management",weight:10,effort:"high",effortMinutes:10,autoPopulated:!0,bulkAssignable:!1},{id:"accessPolicies",displayName:"Access Policies",description:"Who can access and what they can do",purpose:"Security and compliance enforcement",whenNeeded:"Regulated industries, sensitive data",weight:10,effort:"high",effortMinutes:8,autoPopulated:!1,bulkAssignable:!0},{id:"customMetadata",displayName:"Custom Metadata",description:"Organization-specific attributes",purpose:"Business context not covered by standard fields",whenNeeded:"Domain-specific needs, SLAs, cost tracking",weight:5,effort:"medium",effortMinutes:4,autoPopulated:!1,bulkAssignable:!0},{id:"starredBy",displayName:"Starred",description:"User favorites/bookmarks",purpose:"Social proof, popular assets",whenNeeded:"Discovery, recommendations",weight:2,effort:"low",effortMinutes:0,autoPopulated:!0,bulkAssignable:!1},{id:"links",displayName:"Links",description:"External references (runbooks, wikis, etc.)",purpose:"Connect to external documentation",whenNeeded:"Operational context, runbooks",weight:3,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!1},{id:"compliance_retention",displayName:"Retention Period",description:"Data retention policy duration",purpose:"Compliance with data privacy laws",whenNeeded:"PII data, regulated datasets",weight:10,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"compliance_legal_hold",displayName:"Legal Hold",description:"Whether data is under legal hold",purpose:"Prevent deletion during litigation",whenNeeded:"Legal proceedings",weight:10,effort:"low",effortMinutes:1,autoPopulated:!1,bulkAssignable:!0},{id:"compliance_country",displayName:"Data Source Country",description:"Country of origin for the data",purpose:"Data sovereignty compliance",whenNeeded:"Cross-border data flows",weight:5,effort:"low",effortMinutes:1,autoPopulated:!1,bulkAssignable:!0},{id:"product_sla",displayName:"SLA",description:"Service Level Agreement",purpose:"Define expected availability/performance",whenNeeded:"Data products, critical assets",weight:8,effort:"medium",effortMinutes:5,autoPopulated:!1,bulkAssignable:!0},{id:"product_refresh_rate",displayName:"Refresh Frequency",description:"How often data is updated",purpose:"Set freshness expectations",whenNeeded:"Dashboards, reporting",weight:5,effort:"low",effortMinutes:2,autoPopulated:!0,bulkAssignable:!0},{id:"product_cost",displayName:"Cost Center",description:"Department responsible for costs",purpose:"Cost allocation and tracking",whenNeeded:"Budgeting, chargeback",weight:5,effort:"low",effortMinutes:1,autoPopulated:!1,bulkAssignable:!0},{id:"dq_freshness",displayName:"Freshness SLA",description:"Maximum allowed data lag",purpose:"Monitor data timeliness",whenNeeded:"Real-time analytics",weight:8,effort:"medium",effortMinutes:5,autoPopulated:!1,bulkAssignable:!0},{id:"dq_completeness",displayName:"Completeness Threshold",description:"Minimum required data completeness %",purpose:"Ensure data quality standards",whenNeeded:"Critical reporting",weight:8,effort:"medium",effortMinutes:5,autoPopulated:!1,bulkAssignable:!0},{id:"dq_owner",displayName:"DQ Owner",description:"Person responsible for data quality",purpose:"Accountability for DQ issues",whenNeeded:"When different from asset owner",weight:5,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"ops_on_call",displayName:"On-Call Team",description:"Team to contact for urgent issues",purpose:"Incident response",whenNeeded:"Critical pipelines",weight:8,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"ops_runbook",displayName:"Runbook URL",description:"Link to operational runbook",purpose:"Guide for incident resolution",whenNeeded:"Production assets",weight:5,effort:"low",effortMinutes:2,autoPopulated:!1,bulkAssignable:!0},{id:"ops_slack",displayName:"Slack Channel",description:"Communication channel for this asset",purpose:"Team collaboration",whenNeeded:"Shared assets",weight:3,effort:"low",effortMinutes:1,autoPopulated:!1,bulkAssignable:!0}];function I({mode:t,onModeChange:e,existingCount:r,existingLabel:n="Existing",designLabel:d="Design"}){return l.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-0.5",children:[l.jsxs("button",{onClick:()=>e("existing"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="existing"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:[l.jsx(h,{size:14}),n,r!==void 0&&r>0&&l.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${t==="existing"?"bg-blue-100 text-blue-600":"bg-slate-200 text-slate-600"}`,children:r})]}),l.jsxs("button",{onClick:()=>e("design"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="design"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:[l.jsx(q,{size:14}),d]})]})}const N=[];function B(){const t=w(e=>e.model.pages.find(n=>n.id===e.model.activePageId)?.entities||N);return y.useMemo(()=>{const e=new Set,r=new Set;t.forEach(a=>{a.connectorName&&e.add(a.connectorName),a.assetType&&r.add(a.assetType)});const n=new Map;t.forEach(a=>{const s=a.connectorName||"Unknown",p=C(a.attributes,"database"),o=`${s}/${p||"default"}`;n.has(o)||n.set(o,{id:o,name:p||s,connector:s,database:p,entityCount:0,entities:[]});const m=n.get(o);m.entityCount++,m.entities.push(a)});const d=new Map;t.forEach(a=>{const s=a.attributes.find(o=>o.name==="tags"||o.name==="atlanTags");if(!s?.value)return;(typeof s.value=="string"?s.value.split(",").map(o=>o.trim()):Array.isArray(s.value)?s.value:[]).forEach(o=>{if(!o)return;d.has(o)||d.set(o,{tagName:o,entityCount:0,entities:[]});const m=d.get(o);m.entityCount++,m.entities.push(a)})});const c=new Map;t.forEach(a=>{const s=a.attributes.find(o=>o.name==="glossaryTerms"||o.name==="terms");if(!s?.value)return;(typeof s.value=="string"?s.value.split(",").map(o=>o.trim()):Array.isArray(s.value)?s.value:[]).forEach(o=>{if(!o)return;c.has(o)||c.set(o,{term:o,entityCount:0,entities:[]});const m=c.get(o);m.entityCount++,m.entities.push(a)})});const i=new Map,u=[];return t.forEach(a=>{a.attributes.forEach(s=>{i.has(s.name)||(u.push(s.name),i.set(s.name,{fieldName:s.name,fieldDisplayName:s.displayName||s.name,populatedCount:0,totalCount:0,coveragePercent:0,values:[]}));const p=i.get(s.name);p.totalCount++,s.value!==void 0&&s.value!==null&&s.value!==""&&(p.populatedCount++,p.values.push({entityId:a.id,entityName:a.displayName||a.name,value:s.value}))})}),i.forEach(a=>{a.coveragePercent=a.totalCount>0?Math.round(a.populatedCount/a.totalCount*100):0}),{totalEntities:t.length,connectors:Array.from(e).sort(),assetTypes:Array.from(r).sort(),domains:Array.from(n.values()).sort((a,s)=>s.entityCount-a.entityCount),taxonomies:Array.from(d.values()).sort((a,s)=>s.entityCount-a.entityCount),glossaryTerms:Array.from(c.values()).sort((a,s)=>s.entityCount-a.entityCount),fieldCoverage:u.map(a=>i.get(a))}},[t])}function C(t,e){return t.find(n=>n.name===e)?.value}function O({className:t=""}){return l.jsxs("div",{className:`p-8 text-center bg-slate-50 rounded-lg border border-slate-200 ${t}`,children:[l.jsx("div",{className:"text-slate-400 mb-2",children:l.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),l.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-1",children:"Canvas Designer"}),l.jsxs("p",{className:"text-sm text-slate-500",children:["The visual metadata designer is not included in this build.",l.jsx("br",{}),"Use the Assessment and Planning flows instead."]})]})}export{O as C,L as M,T as P,A as Q,I as V,R as a,S as c,D as g,E as r,B as u};
